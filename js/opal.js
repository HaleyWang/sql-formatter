!function(e){function r(n){if(t[n])return t[n].exports;var $=t[n]={i:n,l:!1,exports:{}};return e[n].call($.exports,$,$.exports,r),$.l=!0,$.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="/Users/mrdziuban/sql-formatter/dist/",r(r.s=634)}({456:function(module,exports,__webpack_require__){(function(global){(function(e){function r(){}function t(){}function n(){}function $(){}function a(){}if("undefined"!=typeof this.Opal)return console.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),this.Opal;var i,o,l,s,u,c=this.Opal={},f={},p=function(){};p.prototype=c,c.constructor=p,c.constants=[],c.global=this,c.config={missing_require_severity:"error",unsupported_features_severity:"warning"};var _=c.hasOwnProperty,h=(c.slice=Array.prototype.slice,4),d=h;c.uid=function(){return d+=2},c.cvars={},c.gvars={},c.exit=function(e){c.gvars.DEBUG&&console.log("Exited with status "+e)},c.exceptions=[],c.pop_exception=function(){c.gvars["!"]=c.exceptions.pop()||i},c.get=function(e){var r=this[e];return null==r?this.base.$const_get(e):r},c.create_scope=function(e,r,t){var n=function(){},$=n.prototype=new e.constructor;r.$$scope=$,r.$$base_module=e.base,$.base=r,$.constructor=n,$.constants=[],t&&(c.cdecl(e,t,r),n.displayName=t+"_scope_alloc")},c.casgn=function(e,r,t){function n(e,r){e.$$name=r;for(r in e.$$scope){var t=e.$$scope[r];t.$$name===i&&(t.$$is_class||t.$$is_module)&&n(t,r)}}var $=e.$$scope;if((t.$$is_class||t.$$is_module)&&((t.$$is_class||t.$$base_module===l)&&(t.$$base_module=e),t.$$name===i&&t.$$base_module.$$name!==i&&n(t,r)),$.constants.push(r),$[r]=t,e.$$is_module&&e.$$dep)for(var a=0;a<e.$$dep.length;a++){var o=e.$$dep[a];c.casgn(o,r,t)}return t},c.cdecl=function(e,r,t){return(t.$$is_class||t.$$is_module)&&null==t.$$orig_scope&&(t.$$name=r,t.$$orig_scope=e,t.$$base_module=e.base,e.constructor[r]=t),e.constants.push(r),e[r]=t},c.klass=function(e,r,t,n){var $,a,i;if(e.$$is_class||e.$$is_module||(e=e.$$class),"function"==typeof r&&(a=r,r=l),$=e.$$scope[t],$&&$.$$orig_scope===e.$$scope){if(!$.$$is_class)throw c.TypeError.$new(t+" is not a class");if(r&&$.$$super!==r)throw c.TypeError.$new("superclass mismatch for class "+t);return $}return null==r&&(r=l),i=a||c.boot_class_alloc(t,n,r),$=c.setup_class_object(t,i,r.$$name,r.constructor),$.$$super=r,$.$$parent=r,c.create_scope(e.$$scope,$,t),e[t]=$,a?c.bridge($,i):(r!==l&&r!==o&&c.donate_constants(r,$),r.$inherited&&r.$inherited($)),$},c.boot_class_alloc=function(e,r,t){if(t){var n=function(){};n.prototype=t.$$proto||t.prototype,r.prototype=new n}return e&&(r.displayName=e+"_alloc"),r.prototype.constructor=r,r},c.setup_class_object=function(e,r,t,n){var $=function(){};$.prototype=n.prototype,$.displayName=t;var a=function(){};a.prototype=new $;var o=new a;return o.$$alloc=r,o.$$name=e||i,o.$$id=c.uid(),a.displayName="#<Class:"+(e||"#<Class:"+o.$$id+">")+">",o.$$proto=r.prototype,o.$$proto.$$class=o,o.constructor=a,o.$$is_class=!0,o.$$class=u,o.$$inc=[],o},c.module=function(e,r){var t;if(e.$$is_class||e.$$is_module||(e=e.$$class),_.call(e.$$scope,r)){if(t=e.$$scope[r],!t.$$is_module&&t!==l)throw c.TypeError.$new(r+" is not a module")}else t=c.module_allocate(s),c.create_scope(e.$$scope,t,r);return t},c.module_initialize=function(e,r){if(r!==i){var t=r.$$s;r.$$s=null,r.call(e),r.$$s=t}return i},c.module_allocate=function(e){function r(){}var t=function(){};t.prototype=e.$$alloc.prototype,r.prototype=new t;var n=new r,$={};return n.$$id=c.uid(),r.displayName="#<Class:#<Module:"+n.$$id+">>",n.$$proto=$,n.constructor=r,n.$$is_module=!0,n.$$class=s,n.$$super=e,n.$$parent=e,n.$$inc=[],n.$$is_module=!0,n.$$dep=[],n.$$name=i,n},c.get_singleton_class=function(e){return e.$$meta?e.$$meta:e.$$is_class||e.$$is_module?c.build_class_singleton_class(e):c.build_object_singleton_class(e)},c.build_class_singleton_class=function(e){var r,t,n;return e.$$meta?e.$$meta:(r=e.constructor,t=e===o?u:c.build_class_singleton_class(e.$$super),n=c.setup_class_object(null,r,t.$$name,t.constructor),n.$$super=t,n.$$parent=t,c.create_scope(e.$$scope,n),n.$$is_singleton=!0,n.$$singleton_of=e,e.$$meta=n)},c.build_object_singleton_class=function(e){var r=e.$$class,t="#<Class:#<"+r.$$name+":"+r.$$id+">>",n=c.boot_class_alloc(t,function(){},r),$=c.setup_class_object(t,n,r.$$name,r.constructor);return $.$$super=r,$.$$parent=r,$.$$class=r.$$class,$.$$scope=r.$$scope,$.$$proto=e,$.$$is_singleton=!0,$.$$singleton_of=e,e.$$meta=$},c.bridge_method=function(e,r,t,n){var $,a,i,o;for($=e.$$bridge.$ancestors(),a=0,o=$.length;a<o&&(i=$[a],!_.call(i.$$proto,t)||!i.$$proto[t]||i.$$proto[t].$$donated||i.$$proto[t].$$stub||i===r);a++)if(i===r){e.prototype[t]=n;break}},c._bridge=function(e,r){var t,n,$,a,i;if("function"==typeof e){for(t=r.$__id__(),n=r.$instance_methods(),a=n.length-1;a>=0;a--)$="$"+n[a],c.bridge_method(e,r,$,r.$$proto[$]);f[t]||(f[t]=[]),f[t].push(e)}else if(i=f[e.$__id__()]){for(a=i.length-1;a>=0;a--)c._bridge(i[a],r);f[r.$__id__()]=i.slice()}},c.append_features=function(e,r){var t,n,$,a,i,o;for(o=r.$$inc.length-1;o>=0;o--)if(r.$$inc[o]===e)return;for(r.$$inc.push(e),e.$$dep.push(r),c._bridge(r,e),t={$$name:e.$$name,$$proto:e.$$proto,$$parent:r.$$parent,$$module:e,$$iclass:!0},r.$$parent=t,n=e.$$proto,$=r.$$proto,a=e.$instance_methods(),o=a.length-1;o>=0;o--)i="$"+a[o],(!$.hasOwnProperty(i)||$[i].$$donated||$[i].$$stub)&&($[i]=n[i],$[i].$$donated=e);c.donate_constants(e,r)},c.stubs={},c.bridge=function(e,t){if(t.$$bridge)throw c.ArgumentError.$new("already bridged");c.stub_subscribers.push(t.prototype);for(var n in c.stubs)n in t.prototype||(t.prototype[n]=c.stub_for(n));t.prototype.$$class=e,t.$$bridge=e;for(var $=e.$ancestors(),a=$.length-1;a>=0;a--)c._bridge(t,$[a]);for(var i in r.prototype){var o=r.prototype[o];!o||!o.$$stub||i in t.prototype||(t.prototype[i]=o)}return e},c.donate_constants=function(e,r){for(var t=e.$$scope.constants,n=r.$$scope,$=n.constants,a=0,i=t.length;a<i;a++)$.push(t[a]),n[t[a]]=e.$$scope[t[a]]},c.donate=function(e,r){var t,n,$,a,i,o,l,s,u,f,p=e.$$dep,_=e.$$proto[r];if(p)for(t=0,n=p.length;t<n;t++){if($=p[t],a=$.$$proto,i=a[r],!a.hasOwnProperty(r)||i.$$donated||i.$$stub)if(a.hasOwnProperty(r)&&!i.$$stub){for(o=$.$$inc,l=0,s=o.length;l<s;l++)o[l]===i.$$donated&&(u=l),o[l]===e&&(f=l);u<=f&&(a[r]=_,a[r].$$donated=e)}else a[r]=_,a[r].$$donated=e;else;$.$$dep&&c.donate($,r)}},c.ancestors=function(e){for(var r,t=e,n=[];t;){n.push(t);for(var $=0;$<t.$$inc.length;$++){r=c.ancestors(t.$$inc[$]);for(var a=0;a<r.length;a++)n.push(r[a])}t=t.$$is_singleton&&t.$$singleton_of.$$is_module?t.$$singleton_of.$$super:t.$$is_class?t.$$super:null}return n},c.add_stubs=function(e){var r,t,n,$,a,i=c.stub_subscribers,o=e.length,l=i.length;for(t=0;t<o;t++)for($=e[t],c.stubs[$]=!0,a=c.stub_for($),n=0;n<l;n++)r=i[n],$ in r||(r[$]=a)},c.stub_subscribers=[r.prototype],c.add_stub_for=function(e,r){var t=c.stub_for(r);e[r]=t},c.stub_for=function(e){function r(){this.$method_missing.$$p=r.$$p,r.$$p=null;for(var t=new Array(arguments.length),n=0,$=t.length;n<$;n++)t[n]=arguments[n];return this.$method_missing.apply(this,[e.slice(1)].concat(t))}return r.$$stub=!0,r},c.ac=function(e,r,t,n){var $="";throw $+=t.$$is_class||t.$$is_module?t.$$name+".":t.$$class.$$name+"#",$+=n,c.ArgumentError.$new("["+$+"] wrong number of arguments("+e+" for "+r+")")},c.block_ac=function(e,r,t){var n="`block in "+t+"'";throw c.ArgumentError.$new(n+": wrong number of arguments ("+e+" for "+r+")")},c.find_super_dispatcher=function(e,r,t,n,$){var a;if(a=$?e.$$is_class||e.$$is_module?$.$$super:e.$$class.$$proto:c.find_obj_super_dispatcher(e,r,t),a=a["$"+r],!n&&a.$$stub&&c.Kernel.$method_missing===e.$method_missing)throw c.NoMethodError.$new("super: no superclass method `"+r+"' for "+e,r);return a},c.find_iter_super_dispatcher=function(e,r,t,n,$){var a=r;if(!t)throw c.RuntimeError.$new("super called outside of method");if($&&t.$$define_meth)throw c.RuntimeError.$new("implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly");return t.$$def&&(a=t.$$jsid),c.find_super_dispatcher(e,a,t,n)},c.find_obj_super_dispatcher=function(e,r,t){var n=e.$$meta||e.$$class;if(n=c.find_owning_class(n,t),!n)throw new Error("could not find current class for super()");return r="$"+r,c.find_super_func(n,r,t)},c.find_owning_class=function(e,r){for(var t=r.$$owner;e&&(!e.$$iclass||e.$$module!==r.$$donated)&&(!e.$$iclass||e.$$module!==t)&&(!t.$$is_singleton||e!==t.$$singleton_of.$$class)&&e!==t;)e=e.$$parent;return e},c.find_super_func=function(e,r,t){for(var n=e.$$parent;n;){var $=n.$$proto[r];if($&&$!==t)break;n=n.$$parent}return n.$$proto},c.ret=function(e){throw c.returner.$v=e,c.returner},c.brk=function(e,r){throw r.$v=e,r},c.new_brk=function(){return new Error("unexpected break")},c.yield1=function(e,r){if("function"!=typeof e)throw c.LocalJumpError.$new("no block given");var t=e.$$has_top_level_mlhs_arg,n=e.$$has_trailing_comma_in_args;return(e.length>1||(t||n)&&1===e.length)&&(r=c.to_ary(r)),(e.length>1||n&&1===e.length)&&r.$$is_array?e.apply(null,r):e(r)},c.yieldX=function(e,r){if("function"!=typeof e)throw c.LocalJumpError.$new("no block given");if(e.length>1&&1===r.length&&r[0].$$is_array)return e.apply(null,r[0]);if(!r.$$is_array){for(var t=new Array(r.length),n=0,$=t.length;n<$;n++)t[n]=r[n];return e.apply(null,t)}return e.apply(null,r)},c.rescue=function(e,r){for(var t=0;t<r.length;t++){var n=r[t];if(n.$$is_array){var $=c.rescue(e,n);if($)return $}else if(n["$==="](e))return n}return null},c.is_a=function(e,r){if(e.$$meta===r)return!0;var t,n,$=c.ancestors(e.$$class);for(t=0,n=$.length;t<n;t++)if($[t]===r)return!0;for($=c.ancestors(e.$$meta),t=0,n=$.length;t<n;t++)if($[t]===r)return!0;return!1},c.to_hash=function(e){if(e.$$is_hash)return e;if(e["$respond_to?"]("to_hash",!0)){var r=e.$to_hash();if(r.$$is_hash)return r;throw c.TypeError.$new("Can't convert "+e.$$class+" to Hash ("+e.$$class+"#to_hash gives "+r.$$class+")")}throw c.TypeError.$new("no implicit conversion of "+e.$$class+" into Hash")},c.to_ary=function(e){if(e.$$is_array)return e;if(e["$respond_to?"]("to_ary",!0)){var r=e.$to_ary();if(r===i)return[e];if(r.$$is_array)return r;throw c.TypeError.$new("Can't convert "+e.$$class+" to Array ("+e.$$class+"#to_ary gives "+r.$$class+")")}return[e]},c.to_a=function(e){if(e.$$is_array)return e.slice();if(e["$respond_to?"]("to_a",!0)){var r=e.$to_a();if(r===i)return[e];if(r.$$is_array)return r;throw c.TypeError.$new("Can't convert "+e.$$class+" to Array ("+e.$$class+"#to_a gives "+r.$$class+")")}return[e]},c.extract_kwargs=function(e){var r=e[e.length-1];return null!=r&&r["$respond_to?"]("to_hash",!0)?(Array.prototype.splice.call(e,e.length-1,1),r.$to_hash()):c.hash2([],{})},c.kwrestargs=function(e,r){var t=[],n={},$=null,a=e.$$smap;for($ in a)r[$]||(t.push($),n[$]=a[$]);return c.hash2(t,n)},c.send=function(e,r){for(var t=new Array(Math.max(arguments.length-2,0)),n=0,$=t.length;n<$;n++)t[n]=arguments[n+2];var a=e["$"+r];return a?a.apply(e,t):e.$method_missing.apply(e,[r].concat(t))},c.block_send=function(e,r,t){for(var n=new Array(Math.max(arguments.length-3,0)),$=0,a=n.length;$<a;$++)n[$]=arguments[$+3];var i=e["$"+r];return i?(i.$$p=t,i.apply(e,n)):e.$method_missing.apply(e,[r].concat(n))},c.defn=function(e,r,t){if(e.$$proto[r]=t,t.$$owner=e,e.$$is_module&&(c.donate(e,r),e.$$module_function&&c.defs(e,r,t)),e.$__id__&&!e.$__id__.$$stub){var n=f[e.$__id__()];if(n)for(var $=n.length-1;$>=0;$--)c.bridge_method(n[$],e,r,t)}var a=e.$$singleton_of;return!e.$method_added||e.$method_added.$$stub||a?a&&a.$singleton_method_added&&!a.$singleton_method_added.$$stub&&a.$singleton_method_added(r.substr(1)):e.$method_added(r.substr(1)),i},c.defs=function(e,r,t){c.defn(c.get_singleton_class(e),r,t)},c.def=function(e,r,t){e.$$eval||!e.$$is_class&&!e.$$is_module?c.defs(e,r,t):c.defn(e,r,t)},c.rdef=function(e,r){if(!_.call(e.$$proto,r))throw c.NameError.$new("method '"+r.substr(1)+"' not defined in "+e.$name());delete e.$$proto[r],e.$$is_singleton?e.$$proto.$singleton_method_removed&&!e.$$proto.$singleton_method_removed.$$stub&&e.$$proto.$singleton_method_removed(r.substr(1)):e.$method_removed&&!e.$method_removed.$$stub&&e.$method_removed(r.substr(1))},c.udef=function(e,r){if(!e.$$proto[r]||e.$$proto[r].$$stub)throw c.NameError.$new("method '"+r.substr(1)+"' not defined in "+e.$name());c.add_stub_for(e.$$proto,r),e.$$is_singleton?e.$$proto.$singleton_method_undefined&&!e.$$proto.$singleton_method_undefined.$$stub&&e.$$proto.$singleton_method_undefined(r.substr(1)):e.$method_undefined&&!e.$method_undefined.$$stub&&e.$method_undefined(r.substr(1))},c.alias=function(e,r,t){var n="$"+r,$="$"+t,a=e.$$proto["$"+t];if(e.$$eval)return c.alias(c.get_singleton_class(e),r,t);if("function"!=typeof a||a.$$stub){for(var i=e.$$super;"function"!=typeof a&&i;)a=i[$],i=i.$$super;if("function"!=typeof a||a.$$stub)throw c.NameError.$new("undefined method `"+t+"' for class `"+e.$name()+"'")}return c.defn(e,n,a),e},c.alias_native=function(e,r,t){var n="$"+r,$=e.$$proto[t];if("function"!=typeof $||$.$$stub)throw c.NameError.$new("undefined native method `"+t+"' for class `"+e.$name()+"'");return c.defn(e,n,$),e},c.hash_init=function(e){e.$$smap={},e.$$map={},e.$$keys=[]},c.hash_clone=function(e,r){r.$$none=e.$$none,r.$$proc=e.$$proc;for(var t,n,$=0,a=e.$$keys,i=a.length;$<i;$++)t=e.$$keys[$],t.$$is_string?n=e.$$smap[t]:(n=t.value,t=t.key),c.hash_put(r,t,n)},c.hash_put=function(r,t,n){if(t.$$is_string)return r.$$smap.hasOwnProperty(t)||r.$$keys.push(t),void(r.$$smap[t]=n);var $,a,i=t.$hash();if(!r.$$map.hasOwnProperty(i))return $={key:t,key_hash:i,value:n},r.$$keys.push($),void(r.$$map[i]=$);for($=r.$$map[i];$;){if(t===$.key||t["$eql?"]($.key)){a=e,$.value=n;break}a=$,$=$.next}a&&($={key:t,key_hash:i,value:n},r.$$keys.push($),a.next=$)},c.hash_get=function(e,r){if(r.$$is_string){if(e.$$smap.hasOwnProperty(r))return e.$$smap[r]}else{var t,n=r.$hash();if(e.$$map.hasOwnProperty(n))for(t=e.$$map[n];t;){if(r===t.key||r["$eql?"](t.key))return t.value;t=t.next}}},c.hash_delete=function(e,r){var t,n,$=e.$$keys,a=$.length;if(r.$$is_string){if(!e.$$smap.hasOwnProperty(r))return;for(t=0;t<a;t++)if($[t]===r){$.splice(t,1);break}return n=e.$$smap[r],delete e.$$smap[r],n}var i=r.$hash();if(e.$$map.hasOwnProperty(i))for(var o,l=e.$$map[i];l;){if(r===l.key||r["$eql?"](l.key)){for(n=l.value,t=0;t<a;t++)if($[t]===l){$.splice(t,1);break}return o&&l.next?o.next=l.next:o?delete o.next:l.next?e.$$map[i]=l.next:delete e.$$map[i],n}o=l,l=l.next}},c.hash_rehash=function(r){for(var t,n,$,a=0,i=r.$$keys.length;a<i;a++)if(!r.$$keys[a].$$is_string&&(t=r.$$keys[a].key.$hash(),t!==r.$$keys[a].key_hash)){for(n=r.$$map[r.$$keys[a].key_hash],$=e;n;){if(n===r.$$keys[a]){$&&n.next?$.next=n.next:$?delete $.next:n.next?r.$$map[r.$$keys[a].key_hash]=n.next:delete r.$$map[r.$$keys[a].key_hash];break}$=n,n=n.next}if(r.$$keys[a].key_hash=t,r.$$map.hasOwnProperty(t)){for(n=r.$$map[t],$=e;n;){if(n===r.$$keys[a]){$=e;break}$=n,n=n.next}$&&($.next=r.$$keys[a])}else r.$$map[t]=r.$$keys[a]}},c.hash=function(){var e,r,t,n,$,a,i=arguments.length;if(1===i&&arguments[0].$$is_hash)return arguments[0];if(r=new c.Hash.$$alloc,c.hash_init(r),1===i&&arguments[0].$$is_array){for(e=arguments[0],n=e.length,t=0;t<n;t++){if(2!==e[t].length)throw c.ArgumentError.$new("value not of length 2: "+e[t].$inspect());$=e[t][0],a=e[t][1],c.hash_put(r,$,a)}return r}if(1===i){e=arguments[0];for($ in e)e.hasOwnProperty($)&&(a=e[$],c.hash_put(r,$,a));return r}if(i%2!==0)throw c.ArgumentError.$new("odd number of arguments for Hash");for(t=0;t<i;t+=2)$=arguments[t],a=arguments[t+1],c.hash_put(r,$,a);return r},c.hash2=function(e,r){var t=new c.Hash.$$alloc;return t.$$smap=r,t.$$map={},t.$$keys=e,t},c.range=function(e,r,t){var n=new c.Range.$$alloc;return n.begin=e,n.end=r,n.exclude=t,n},c.ivar=function(e){return"constructor"===e||"displayName"===e||"__count__"===e||"__noSuchMethod__"===e||"__parent__"===e||"__proto__"===e||"hasOwnProperty"===e||"valueOf"===e?e+"$":e},c.modules={},c.loaded_features=["corelib/runtime"],c.current_dir=".",c.require_table={"corelib/runtime":!0},c.normalize=function(e){var r,t,n=[],$="/";"."!==c.current_dir&&(e=c.current_dir.replace(/\/*$/,"/")+e),e=e.replace(/\.(rb|opal|js)$/,""),r=e.split($);for(var a=0,i=r.length;a<i;a++)t=r[a],""!==t&&(".."===t?n.pop():n.push(t));return n.join($)},c.loaded=function(e){var r,t,n;for(r=0,t=e.length;r<t;r++){if(n=c.normalize(e[r]),c.require_table[n])return;c.loaded_features.push(n),c.require_table[n]=!0}},c.load=function(e){e=c.normalize(e),c.loaded([e]);var r=c.modules[e];if(r)r(c);else{var t=c.config.missing_require_severity,n="cannot load such file -- "+e;"error"===t?c.LoadError?c.LoadError.$new(n):function(){throw n}():"warning"===t&&console.warn("WARNING: LoadError: "+n)}return!0},c.require=function(e){return e=c.normalize(e),!c.require_table[e]&&c.load(e)},c.boot_class_alloc("BasicObject",r),c.boot_class_alloc("Object",t,r),c.boot_class_alloc("Module",$,t),c.boot_class_alloc("Class",n,$),c.BasicObject=o=c.setup_class_object("BasicObject",r,"Class",n),c.Object=l=c.setup_class_object("Object",t,"BasicObject",o.constructor),c.Module=s=c.setup_class_object("Module",$,"Object",l.constructor),c.Class=u=c.setup_class_object("Class",n,"Module",s.constructor),c.constants.push("BasicObject"),c.constants.push("Object"),c.constants.push("Module"),c.constants.push("Class"),o.$$class=u,l.$$class=u,s.$$class=u,u.$$class=u,o.$$super=null,l.$$super=o,s.$$super=l,u.$$super=s,o.$$parent=null,l.$$parent=o,s.$$parent=l,u.$$parent=s,c.base=l,o.$$scope=l.$$scope=c,o.$$orig_scope=l.$$orig_scope=c,s.$$scope=l.$$scope,s.$$orig_scope=l.$$orig_scope,u.$$scope=l.$$scope,u.$$orig_scope=l.$$orig_scope,l.$$proto.toString=function(){return this.$to_s()},l.$$proto.$require=c.require,c.top=new l.$$alloc,c.klass(l,l,"NilClass",a),i=c.nil=new a,i.$$id=h,i.call=i.apply=function(){throw c.LocalJumpError.$new("no block given")},c.breaker=new Error("unexpected break (old)"),c.returner=new Error("unexpected return"),TypeError.$$super=Error}).call(this),"undefined"!=typeof global&&(global.Opal=this.Opal,Opal.global=global),"undefined"!=typeof window&&(window.Opal=this.Opal,Opal.global=window),Opal.loaded(["corelib/runtime"]),Opal.modules["corelib/helpers"]=function(e){var r=(e.top,e),t=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$new","$class","$===","$respond_to?","$raise","$type_error","$__send__","$coerce_to","$nil?","$<=>","$inspect","$coerce_to!","$!=","$[]","$upcase"]),function(r){var $,a,i,o,l,s,u,c,f,p,_,h,d,g,v=$=n(r,"Opal"),y=(v.$$proto,v.$$scope);e.defs(v,"$bridge",a=function(r,t){return e.bridge(r,t)},a.$$arity=2),e.defs(v,"$type_error",i=function(e,r,n,$){var a,i;return null==n&&(n=t),null==$&&($=t),(a=(i=n!==!1&&n!==t&&null!=n)?$:n)===t||null==a||a.$$is_boolean&&1!=a?y.get("TypeError").$new("no implicit conversion of "+e.$class()+" into "+r):y.get("TypeError").$new("can't convert "+e.$class()+" into "+r+" ("+e.$class()+"#"+n+" gives "+$.$class())},i.$$arity=-3),e.defs(v,"$coerce_to",o=function(e,r,n){var $,a=this;return($=r["$==="](e))===t||null==$||$.$$is_boolean&&1!=$?((($=e["$respond_to?"](n))===t||null==$||$.$$is_boolean&&1!=$)&&a.$raise(a.$type_error(e,r)),e.$__send__(n)):e},o.$$arity=3),e.defs(v,"$coerce_to!",l=function(e,r,n){var $,a=this,i=t;return i=a.$coerce_to(e,r,n),(($=r["$==="](i))===t||null==$||$.$$is_boolean&&1!=$)&&a.$raise(a.$type_error(e,r,n,i)),i},l.$$arity=3),e.defs(v,"$coerce_to?",s=function(e,r,n){var $,a=this,i=t;return($=e["$respond_to?"](n))===t||null==$||$.$$is_boolean&&1!=$?t:(i=a.$coerce_to(e,r,n),($=i["$nil?"]())===t||null==$||$.$$is_boolean&&1!=$?((($=r["$==="](i))===t||null==$||$.$$is_boolean&&1!=$)&&a.$raise(a.$type_error(e,r,n,i)),i):t)},s.$$arity=3),e.defs(v,"$try_convert",u=function(e,r,n){var $;return($=r["$==="](e))===t||null==$||$.$$is_boolean&&1!=$?($=e["$respond_to?"](n))===t||null==$||$.$$is_boolean&&1!=$?t:e.$__send__(n):e},u.$$arity=3),e.defs(v,"$compare",c=function(e,r){var n,$=this,a=t;return a=e["$<=>"](r),(n=a===t)===t||null==n||n.$$is_boolean&&1!=n||$.$raise(y.get("ArgumentError"),"comparison of "+e.$class()+" with "+r.$class()+" failed"),a},c.$$arity=2),e.defs(v,"$destructure",f=function(e){if(1==e.length)return e[0];if(e.$$is_array)return e;for(var r=new Array(e.length),t=0,n=r.length;t<n;t++)r[t]=e[t];return r},f.$$arity=1),e.defs(v,"$respond_to?",p=function(e,r){return!(null==e||!e.$$class)&&e["$respond_to?"](r)},p.$$arity=2),e.defs(v,"$inspect",_=function(e){return void 0===e?"undefined":null===e?"null":e.$$class?e.$inspect():e.toString()},_.$$arity=1),e.defs(v,"$instance_variable_name!",h=function(e){var r,n=this;return e=y.get("Opal")["$coerce_to!"](e,y.get("String"),"to_str"),((r=/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(e))===t||null==r||r.$$is_boolean&&1!=r)&&n.$raise(y.get("NameError").$new("'"+e+"' is not allowed as an instance variable name",e)),e},h.$$arity=1),e.defs(v,"$const_name!",d=function(e){var r,n=this;return e=y.get("Opal")["$coerce_to!"](e,y.get("String"),"to_str"),(r=e["$[]"](0)["$!="](e["$[]"](0).$upcase()))===t||null==r||r.$$is_boolean&&1!=r||n.$raise(y.get("NameError"),"wrong constant name "+e),e},d.$$arity=1),e.defs(v,"$pristine",g=function(e,r){var n,$=arguments.length,a=$-1;a<0&&(a=0),n=new Array(a);for(var i=1;i<$;i++)n[i-1]=arguments[i];for(var o,l=n.length-1;l>=0;l--)o=n[l],e.$$proto["$"+o].$$pristine=!0;return t},g.$$arity=-2)}(r.base)},Opal.modules["corelib/module"]=function(Opal){function $rb_lt(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}function $rb_gt(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}var self=Opal.top,$scope=Opal,nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$klass=Opal.klass,$range=Opal.range,$hash2=Opal.hash2;return Opal.add_stubs(["$===","$raise","$equal?","$<","$>","$nil?","$attr_reader","$attr_writer","$coerce_to!","$new","$const_name!","$=~","$inject","$const_get","$split","$const_missing","$==","$!","$start_with?","$to_proc","$lambda","$bind","$call","$class","$append_features","$included","$name","$cover?","$size","$merge","$compile","$proc","$to_s","$__id__","$constants","$include?"]),function($base,$super){function $Module(){}var self=$Module=$klass($base,$super,"Module",$Module),def=self.$$proto,$scope=self.$$scope,TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7,TMP_8,TMP_9,TMP_10,TMP_11,TMP_12,TMP_13,TMP_14,TMP_15,TMP_16,TMP_17,TMP_18,TMP_19,TMP_20,TMP_22,TMP_23,TMP_24,TMP_25,TMP_27,TMP_28,TMP_29,TMP_30,TMP_31,TMP_32,TMP_33,TMP_34,TMP_35,TMP_36,TMP_37,TMP_38,TMP_39,TMP_41,TMP_42,TMP_43,TMP_44,TMP_45,TMP_46,TMP_47,TMP_48,TMP_49;return Opal.defs(self,"$allocate",TMP_1=function(){var e,r=this;return e=Opal.module_allocate(r),Opal.create_scope(Opal.Module.$$scope,e,null),e},TMP_1.$$arity=0),Opal.defn(self,"$initialize",TMP_2=function(){var e=this,r=TMP_2.$$p,t=r||nil;return TMP_2.$$p=null,Opal.module_initialize(e,t)},TMP_2.$$arity=0),Opal.defn(self,"$===",TMP_3=function(e){var r,t=this;return!!((r=null==e)===nil||null==r||r.$$is_boolean&&1!=r)&&Opal.is_a(e,t)},TMP_3.$$arity=1),Opal.defn(self,"$<",TMP_4=function(e){var r,t=this;((r=$scope.get("Module")["$==="](e))===nil||null==r||r.$$is_boolean&&1!=r)&&t.$raise($scope.get("TypeError"),"compared with non class/module");var n,$,a,i=t;if(i===e)return!1;for($=0,n=Opal.ancestors(t),a=n.length;$<a;$++)if(n[$]===e)return!0;for($=0,n=Opal.ancestors(e),a=n.length;$<a;$++)if(n[$]===t)return!1;return nil},TMP_4.$$arity=1),Opal.defn(self,"$<=",TMP_5=function(e){var r,t=this;return(r=t["$equal?"](e))!==!1&&r!==nil&&null!=r?r:$rb_lt(t,e)},TMP_5.$$arity=1),Opal.defn(self,"$>",TMP_6=function(e){var r,t=this;return((r=$scope.get("Module")["$==="](e))===nil||null==r||r.$$is_boolean&&1!=r)&&t.$raise($scope.get("TypeError"),"compared with non class/module"),$rb_lt(e,t)},TMP_6.$$arity=1),Opal.defn(self,"$>=",TMP_7=function(e){var r,t=this;return(r=t["$equal?"](e))!==!1&&r!==nil&&null!=r?r:$rb_gt(t,e)},TMP_7.$$arity=1),Opal.defn(self,"$<=>",TMP_8=function(e){var r,t=this,n=nil;return t===e?0:(r=$scope.get("Module")["$==="](e))===nil||null==r||r.$$is_boolean&&1!=r?nil:(n=$rb_lt(t,e),(r=n["$nil?"]())===nil||null==r||r.$$is_boolean&&1!=r?n!==!1&&n!==nil&&null!=n?-1:1:nil)},TMP_8.$$arity=1),Opal.defn(self,"$alias_method",TMP_9=function(e,r){var t=this;return Opal.alias(t,e,r),t},TMP_9.$$arity=2),Opal.defn(self,"$alias_native",TMP_10=function(e,r){var t=this;return null==r&&(r=e),Opal.alias_native(t,e,r),t},TMP_10.$$arity=-2),Opal.defn(self,"$ancestors",TMP_11=function(){var e=this;return Opal.ancestors(e)},TMP_11.$$arity=0),Opal.defn(self,"$append_features",TMP_12=function(e){var r=this;return Opal.append_features(r,e),r},TMP_12.$$arity=1),Opal.defn(self,"$attr_accessor",TMP_13=function(e){var r,t,n,$=this,a=arguments.length,i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return(r=$).$attr_reader.apply(r,Opal.to_a(n)),(t=$).$attr_writer.apply(t,Opal.to_a(n))},TMP_13.$$arity=-1),Opal.alias(self,"attr","attr_accessor"),Opal.defn(self,"$attr_reader",TMP_14=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=t.$$proto,o=r.length-1;o>=0;o--){var l=r[o],s="$"+l,u=Opal.ivar(l),c=function(e){return function(){return null==this[e]?nil:this[e]}}(u);i[u]=nil,c.$$parameters=[],c.$$arity=0,t.$$is_singleton?i.constructor.prototype[s]=c:Opal.defn(t,s,c)}return nil},TMP_14.$$arity=-1),Opal.defn(self,"$attr_writer",TMP_15=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=t.$$proto,o=r.length-1;o>=0;o--){var l=r[o],s="$"+l+"=",u=Opal.ivar(l),c=function(e){return function(r){return this[e]=r}}(u);c.$$parameters=[["req"]],c.$$arity=1,i[u]=nil,t.$$is_singleton?i.constructor.prototype[s]=c:Opal.defn(t,s,c)}return nil},TMP_15.$$arity=-1),Opal.defn(self,"$autoload",TMP_16=function(e,r){var t,n=this;return(t=n.$$autoload)||(t=n.$$autoload={}),t[e]=r,nil},TMP_16.$$arity=2),Opal.defn(self,"$class_variable_get",TMP_17=function(e){var r,t=this;e=$scope.get("Opal")["$coerce_to!"](e,$scope.get("String"),"to_str"),(r=e.length<3||"@@"!==e.slice(0,2))===nil||null==r||r.$$is_boolean&&1!=r||t.$raise($scope.get("NameError").$new("class vars should start with @@",e));var n=Opal.cvars[e.slice(2)];return function(){return(r=null==n)===nil||null==r||r.$$is_boolean&&1!=r?nil:t.$raise($scope.get("NameError").$new("uninitialized class variable @@a in",e))}(),n},TMP_17.$$arity=1),Opal.defn(self,"$class_variable_set",TMP_18=function(e,r){var t,n=this;return e=$scope.get("Opal")["$coerce_to!"](e,$scope.get("String"),"to_str"),(t=e.length<3||"@@"!==e.slice(0,2))===nil||null==t||t.$$is_boolean&&1!=t||n.$raise($scope.get("NameError")),Opal.cvars[e.slice(2)]=r,r},TMP_18.$$arity=2),Opal.defn(self,"$constants",TMP_19=function(){var e=this;return e.$$scope.constants.slice(0)},TMP_19.$$arity=0),Opal.defn(self,"$const_defined?",TMP_20=function(e,r){var t,n=this;null==r&&(r=!0),e=$scope.get("Opal")["$const_name!"](e),((t=e["$=~"]($scope.get("Opal").$$scope.get("CONST_NAME_REGEXP")))===nil||null==t||t.$$is_boolean&&1!=t)&&n.$raise($scope.get("NameError").$new("wrong constant name "+e,e));var $=[n.$$scope];if(r||n===Opal.Object)for(var a=n.$$super;a!==Opal.BasicObject;)$.push(a.$$scope),a=a.$$super;for(var i=0,o=$.length;i<o;i++)if($[i].hasOwnProperty(e))return!0;return!1},TMP_20.$$arity=-2),Opal.defn(self,"$const_get",TMP_22=function(e,r){var t,n,$,a=this;if(null==r&&(r=!0),e=$scope.get("Opal")["$const_name!"](e),0===e.indexOf("::")&&"::"!==e&&(e=e.slice(2)),(t=e.indexOf("::")!=-1&&"::"!=e)!==nil&&null!=t&&(!t.$$is_boolean||1==t))return(t=(n=e.$split("::")).$inject,t.$$p=($=function(e,r){$.$$s||this;return null==e&&(e=nil),null==r&&(r=nil),e.$const_get(r)},$.$$s=a,$.$$arity=2,$),t).call(n,a);((t=e["$=~"]($scope.get("Opal").$$scope.get("CONST_NAME_REGEXP")))===nil||null==t||t.$$is_boolean&&1!=t)&&a.$raise($scope.get("NameError").$new("wrong constant name "+e,e));var i=[a.$$scope];if(r||a==Opal.Object)for(var o=a.$$super;o!==Opal.BasicObject;)i.push(o.$$scope),o=o.$$super;for(var l=0,s=i.length;l<s;l++)if(i[l].hasOwnProperty(e))return i[l][e];return a.$const_missing(e)},TMP_22.$$arity=-2),Opal.defn(self,"$const_missing",TMP_23=function(e){var r=this,t=nil;if(r.$$autoload){var n=r.$$autoload[e];if(n)return r.$require(n),r.$const_get(e)}return t=function(){return r["$=="]($scope.get("Object"))?e:""+r+"::"+e}(),r.$raise($scope.get("NameError").$new("uninitialized constant "+t,e))},TMP_23.$$arity=1),Opal.defn(self,"$const_set",TMP_24=function(e,r){var t,n,$=this;return e=$scope.get("Opal")["$const_name!"](e),(t=(n=e["$=~"]($scope.get("Opal").$$scope.get("CONST_NAME_REGEXP"))["$!"]())!==!1&&n!==nil&&null!=n?n:e["$start_with?"]("::"))===nil||null==t||t.$$is_boolean&&1!=t||$.$raise($scope.get("NameError").$new("wrong constant name "+e,e)),Opal.casgn($,e,r),r},TMP_24.$$arity=2),Opal.defn(self,"$define_method",TMP_25=function(e,r){var t,n,$,a,i=this,o=TMP_25.$$p,l=o||nil,s=nil;TMP_25.$$p=null,(t=void 0===r&&l===nil)===nil||null==t||t.$$is_boolean&&1!=t||i.$raise($scope.get("ArgumentError"),"tried to create a Proc object without a block"),(t=l)!==!1&&t!==nil&&null!=t?t:l=function(){return s=r,$scope.get("Proc")["$==="](s)?r:$scope.get("Method")["$==="](s)?r.$to_proc().$$unbound:$scope.get("UnboundMethod")["$==="](s)?(n=($=i).$lambda,n.$$p=(a=function(e){var t,n,$=a.$$s||this,i=nil,o=arguments.length,l=o-0;l<0&&(l=0),t=new Array(l);for(var s=0;s<o;s++)t[s-0]=arguments[s];return i=r.$bind($),(n=i).$call.apply(n,Opal.to_a(t))},a.$$s=i,a.$$arity=-1,a),n).call($):i.$raise($scope.get("TypeError"),"wrong argument type "+l.$class()+" (expected Proc/Method)")}();var u="$"+e;return l.$$jsid=e,l.$$s=null,l.$$def=l,l.$$define_meth=!0,Opal.defn(i,u,l),e},TMP_25.$$arity=-2),Opal.defn(self,"$remove_method",TMP_27=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=0,o=r.length;i<o;i++)Opal.rdef(t,"$"+r[i]);return t},TMP_27.$$arity=-1),Opal.defn(self,"$singleton_class?",TMP_28=function(){var e=this;return!!e.$$is_singleton},TMP_28.$$arity=0),Opal.defn(self,"$include",TMP_29=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=r.length-1;i>=0;i--){var o=r[i];o!==t&&(o.$$is_module||t.$raise($scope.get("TypeError"),"wrong argument type "+o.$class()+" (expected Module)"),o.$append_features(t),o.$included(t))}return t},TMP_29.$$arity=-1),Opal.defn(self,"$included_modules",TMP_30=function(){var e,r=this,t=function(e){for(var r=[],n=0;n!=e.$$inc.length;n++){var $=e.$$inc[n];r.push($),r=r.concat(t($))}return r};if(e=t(r),r.$$is_class)for(var n=r;n;n=n.$$super)e=e.concat(t(n));return e},TMP_30.$$arity=0),Opal.defn(self,"$include?",TMP_31=function(e){for(var r=this,t=r;t;t=t.$$super)for(var n=0;n!=t.$$inc.length;n++){var $=t.$$inc[n];if(e===$)return!0}return!1},TMP_31.$$arity=1),Opal.defn(self,"$instance_method",TMP_32=function(e){var r=this,t=r.$$proto["$"+e];return t&&!t.$$stub||r.$raise($scope.get("NameError").$new("undefined method `"+e+"' for class `"+r.$name()+"'",e)),$scope.get("UnboundMethod").$new(r,t,e)},TMP_32.$$arity=1),Opal.defn(self,"$instance_methods",TMP_33=function(e){var r=this;null==e&&(e=!0);var t=[],n=r.$$proto;for(var $ in n)if("$"===$.charAt(0)&&"function"==typeof n[$]&&!n[$].$$stub){if(!r.$$is_module){if(r!==Opal.BasicObject&&n[$]===Opal.BasicObject.$$proto[$])continue;if(!e&&!n.hasOwnProperty($))continue;if(!e&&n[$].$$donated)continue}t.push($.substr(1))}return t},TMP_33.$$arity=-1),Opal.defn(self,"$included",TMP_34=function(e){return nil},TMP_34.$$arity=1),Opal.defn(self,"$extended",TMP_35=function(e){
return nil},TMP_35.$$arity=1),Opal.defn(self,"$method_added",TMP_36=function(e){return nil},TMP_36.$$arity=-1),Opal.defn(self,"$method_removed",TMP_37=function(e){return nil},TMP_37.$$arity=-1),Opal.defn(self,"$method_undefined",TMP_38=function(e){return nil},TMP_38.$$arity=-1),Opal.defn(self,"$module_eval",TMP_39=function $$module_eval($a_rest){var $b,$c,TMP_40,self=this,args,$iter=TMP_39.$$p,block=$iter||nil,string=nil,file=nil,_lineno=nil,default_eval_options=nil,compiling_options=nil,compiled=nil,$args_len=arguments.length,$rest_len=$args_len-0;$rest_len<0&&($rest_len=0),args=new Array($rest_len);for(var $arg_idx=0;$arg_idx<$args_len;$arg_idx++)args[$arg_idx-0]=arguments[$arg_idx];TMP_39.$$p=null,$c=block["$nil?"](),($b=$c!==!1&&$c!==nil&&null!=$c?!!Opal.compile:$c)===nil||null==$b||$b.$$is_boolean&&1!=$b?($b=$rb_gt(args.$size(),0))===nil||null==$b||$b.$$is_boolean&&1!=$b||$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments ("+args.$size()+" for 0)"):((($b=$range(1,3,!1)["$cover?"](args.$size()))===nil||null==$b||$b.$$is_boolean&&1!=$b)&&$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),$b=Opal.to_a(args),string=null==$b[0]?nil:$b[0],file=null==$b[1]?nil:$b[1],_lineno=null==$b[2]?nil:$b[2],$b,default_eval_options=$hash2(["file","eval"],{file:($b=file)!==!1&&$b!==nil&&null!=$b?$b:"(eval)",eval:!0}),compiling_options=Opal.hash({arity_check:!1}).$merge(default_eval_options),compiled=$scope.get("Opal").$compile(string,compiling_options),block=($b=($c=$scope.get("Kernel")).$proc,$b.$$p=(TMP_40=function(){var self=TMP_40.$$s||this;return function(self){return eval(compiled)}(self)},TMP_40.$$s=self,TMP_40.$$arity=0,TMP_40),$b).call($c));var old=block.$$s,result;return block.$$s=null,result=block.apply(self,[self]),block.$$s=old,result},TMP_39.$$arity=-1),Opal.alias(self,"class_eval","module_eval"),Opal.defn(self,"$module_exec",TMP_41=function(e){var r,t=this,n=TMP_41.$$p,$=n||nil,a=arguments.length,i=a-0;i<0&&(i=0),r=new Array(i);for(var o=0;o<a;o++)r[o-0]=arguments[o];TMP_41.$$p=null,$===nil&&t.$raise($scope.get("LocalJumpError"),"no block given");var l,s=$.$$s;return $.$$s=null,l=$.apply(t,r),$.$$s=s,l},TMP_41.$$arity=-1),Opal.alias(self,"class_exec","module_exec"),Opal.defn(self,"$method_defined?",TMP_42=function(e){var r=this,t=r.$$proto["$"+e];return!!t&&!t.$$stub},TMP_42.$$arity=1),Opal.defn(self,"$module_function",TMP_43=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];if(0===r.length)t.$$module_function=!0;else for(var i=0,o=r.length;i<o;i++){var l=r[i],s="$"+l,u=t.$$proto[s];Opal.defs(t,s,u)}return t},TMP_43.$$arity=-1),Opal.defn(self,"$name",TMP_44=function(){var e=this;if(e.$$full_name)return e.$$full_name;for(var r=[],t=e;t;){if(t.$$name===nil)return 0===r.length?nil:r.join("::");if(r.unshift(t.$$name),t=t.$$base_module,t===Opal.Object)break}return 0===r.length?nil:e.$$full_name=r.join("::")},TMP_44.$$arity=0),Opal.defn(self,"$remove_class_variable",TMP_45=function(e){return nil},TMP_45.$$arity=-1),Opal.defn(self,"$remove_const",TMP_46=function(e){var r=this,t=r.$$scope[e];return delete r.$$scope[e],t},TMP_46.$$arity=1),Opal.defn(self,"$to_s",TMP_47=function(){var e,r=this;return(e=Opal.Module.$name.call(r))!==!1&&e!==nil&&null!=e?e:"#<"+(r.$$is_module?"Module":"Class")+":0x"+r.$__id__().$to_s(16)+">"},TMP_47.$$arity=0),Opal.defn(self,"$undef_method",TMP_48=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=0,o=r.length;i<o;i++)Opal.udef(t,"$"+r[i]);return t},TMP_48.$$arity=-1),Opal.defn(self,"$instance_variables",TMP_49=function(){var e=this,r=nil;r=e.$constants();var t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&"constructor"!==n&&!r["$include?"](n)&&t.push("@"+n);return t},TMP_49.$$arity=0),nil&&"instance_variables"}($scope.base,null)},Opal.modules["corelib/class"]=function(e){var r=e.top,t=e,n=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$allocate","$name","$to_s"]),r.$require("corelib/module"),function(r,t){function a(){}var i,o,l,s,u,c,f=a=$(r,t,"Class",a),p=(f.$$proto,f.$$scope);return e.defs(f,"$new",i=function(r){var t=i.$$p,$=t||n;if(null==r&&(r=p.get("Object")),i.$$p=null,!r.$$is_class)throw e.TypeError.$new("superclass must be a Class");var a=e.boot_class_alloc(null,function(){},r),o=e.setup_class_object(null,a,r.$$name,r.constructor);return o.$$super=r,o.$$parent=r,e.create_scope(r.$$scope,o),r.$inherited(o),e.module_initialize(o,$),o},i.$$arity=-1),e.defn(f,"$allocate",o=function(){var r=this,t=new r.$$alloc;return t.$$id=e.uid(),t},o.$$arity=0),e.defn(f,"$inherited",l=function(e){return n},l.$$arity=1),e.defn(f,"$new",s=function(e){var r,t=this,$=s.$$p,a=$||n,i=arguments.length,o=i-0;o<0&&(o=0),r=new Array(o);for(var l=0;l<i;l++)r[l-0]=arguments[l];s.$$p=null;var u=t.$allocate();return u.$initialize.$$p=a,u.$initialize.apply(u,r),u},s.$$arity=-1),e.defn(f,"$superclass",u=function(){var e=this;return e.$$super||n},u.$$arity=0),e.defn(f,"$to_s",c=function(){var r,t,n=this;c.$$p;c.$$p=null;var $=n.$$singleton_of;return $&&($.$$is_class||$.$$is_module)?"#<Class:"+$.$name()+">":$?"#<Class:#<"+$.$$class.$name()+":0x"+$.$$id.$to_s(16)+">>":(t=n,r=e.find_super_dispatcher(n,"to_s",c,!1),r.$$p=null,r).call(t)},c.$$arity=0),n&&"to_s"}(t.base,null)},Opal.modules["corelib/basic_object"]=function(Opal){function $rb_gt(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}var self=Opal.top,$scope=Opal,nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$klass=Opal.klass,$range=Opal.range,$hash2=Opal.hash2;return Opal.add_stubs(["$==","$!","$nil?","$cover?","$size","$raise","$merge","$compile","$proc","$>","$new","$inspect"]),function($base,$super){function $BasicObject(){}var self=$BasicObject=$klass($base,$super,"BasicObject",$BasicObject),def=self.$$proto,$scope=self.$$scope,TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7,TMP_8,TMP_10,TMP_11,TMP_12,TMP_13,TMP_14;return Opal.defn(self,"$initialize",TMP_1=function(e){return nil},TMP_1.$$arity=-1),Opal.defn(self,"$==",TMP_2=function(e){var r=this;return r===e},TMP_2.$$arity=1),Opal.defn(self,"$eql?",TMP_3=function(e){var r=this;return r["$=="](e)},TMP_3.$$arity=1),Opal.alias(self,"equal?","=="),Opal.defn(self,"$__id__",TMP_4=function(){var e=this;return e.$$id||(e.$$id=Opal.uid())},TMP_4.$$arity=0),Opal.defn(self,"$__send__",TMP_5=function(e,r){var t,n=this,$=TMP_5.$$p,a=$||nil,i=arguments.length,o=i-1;o<0&&(o=0),t=new Array(o);for(var l=1;l<i;l++)t[l-1]=arguments[l];TMP_5.$$p=null;var s=n["$"+e];return s?(a!==nil&&(s.$$p=a),s.apply(n,t)):(a!==nil&&(n.$method_missing.$$p=a),n.$method_missing.apply(n,[e].concat(t)))},TMP_5.$$arity=-2),Opal.defn(self,"$!",TMP_6=function(){return!1},TMP_6.$$arity=0),Opal.defn(self,"$!=",TMP_7=function(e){var r=this;return r["$=="](e)["$!"]()},TMP_7.$$arity=1),Opal.alias(self,"equal?","=="),Opal.defn(self,"$instance_eval",TMP_8=function $$instance_eval($a_rest){var $b,$c,TMP_9,self=this,args,$iter=TMP_8.$$p,block=$iter||nil,string=nil,file=nil,_lineno=nil,default_eval_options=nil,compiling_options=nil,compiled=nil,$args_len=arguments.length,$rest_len=$args_len-0;$rest_len<0&&($rest_len=0),args=new Array($rest_len);for(var $arg_idx=0;$arg_idx<$args_len;$arg_idx++)args[$arg_idx-0]=arguments[$arg_idx];TMP_8.$$p=null,$c=block["$nil?"](),($b=$c!==!1&&$c!==nil&&null!=$c?!!Opal.compile:$c)===nil||null==$b||$b.$$is_boolean&&1!=$b?($b=$rb_gt(args.$size(),0))===nil||null==$b||$b.$$is_boolean&&1!=$b||$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments ("+args.$size()+" for 0)"):((($b=$range(1,3,!1)["$cover?"](args.$size()))===nil||null==$b||$b.$$is_boolean&&1!=$b)&&$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),$b=Opal.to_a(args),string=null==$b[0]?nil:$b[0],file=null==$b[1]?nil:$b[1],_lineno=null==$b[2]?nil:$b[2],$b,default_eval_options=$hash2(["file","eval"],{file:($b=file)!==!1&&$b!==nil&&null!=$b?$b:"(eval)",eval:!0}),compiling_options=Opal.hash({arity_check:!1}).$merge(default_eval_options),compiled=$scope.get("Opal").$compile(string,compiling_options),block=($b=($c=$scope.get("Kernel")).$proc,$b.$$p=(TMP_9=function(){var self=TMP_9.$$s||this;return function(self){return eval(compiled)}(self)},TMP_9.$$s=self,TMP_9.$$arity=0,TMP_9),$b).call($c));var old=block.$$s,result;if(block.$$s=null,self.$$is_class||self.$$is_module){self.$$eval=!0;try{result=block.call(self,self)}finally{self.$$eval=!1}}else result=block.call(self,self);return block.$$s=old,result},TMP_8.$$arity=-1),Opal.defn(self,"$instance_exec",TMP_10=function(e){var r,t=this,n=TMP_10.$$p,$=n||nil,a=arguments.length,i=a-0;i<0&&(i=0),r=new Array(i);for(var o=0;o<a;o++)r[o-0]=arguments[o];TMP_10.$$p=null,$!==!1&&$!==nil&&null!=$||$scope.get("Kernel").$raise($scope.get("ArgumentError"),"no block given");var l,s=$.$$s;if($.$$s=null,t.$$is_class||t.$$is_module){t.$$eval=!0;try{l=$.apply(t,r)}finally{t.$$eval=!1}}else l=$.apply(t,r);return $.$$s=s,l},TMP_10.$$arity=-1),Opal.defn(self,"$singleton_method_added",TMP_11=function(e){return nil},TMP_11.$$arity=-1),Opal.defn(self,"$singleton_method_removed",TMP_12=function(e){return nil},TMP_12.$$arity=-1),Opal.defn(self,"$singleton_method_undefined",TMP_13=function(e){return nil},TMP_13.$$arity=-1),Opal.defn(self,"$method_missing",TMP_14=function(e,r){var t,n,$=this,a=(TMP_14.$$p,arguments.length),i=a-1;i<0&&(i=0),n=new Array(i);for(var o=1;o<a;o++)n[o-1]=arguments[o];return TMP_14.$$p=null,$scope.get("Kernel").$raise($scope.get("NoMethodError").$new(function(){return(t=$.$inspect&&!$.$inspect.$$stub)===nil||null==t||t.$$is_boolean&&1!=t?"undefined method `"+e+"' for "+$.$$class:"undefined method `"+e+"' for "+$.$inspect()+":"+$.$$class}(),e))},TMP_14.$$arity=-2),nil&&"method_missing"}($scope.base,null)},Opal.modules["corelib/kernel"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e<=r:e["$<="](r)}var n=(e.top,e),$=e.nil,a=(e.breaker,e.slice,e.module),i=e.gvars,o=e.hash2,l=e.klass;return e.add_stubs(["$raise","$new","$inspect","$!","$=~","$==","$object_id","$class","$coerce_to?","$<<","$allocate","$copy_instance_variables","$copy_singleton_methods","$initialize_clone","$initialize_copy","$define_method","$to_proc","$singleton_class","$initialize_dup","$for","$>","$size","$pop","$call","$append_features","$extended","$length","$respond_to?","$[]","$nil?","$to_a","$to_int","$fetch","$Integer","$Float","$to_ary","$to_str","$coerce_to","$to_s","$__id__","$instance_variable_name!","$coerce_to!","$===","$enum_for","$print","$format","$puts","$each","$<=","$empty?","$exception","$kind_of?","$respond_to_missing?","$try_convert!","$expand_path","$join","$start_with?","$sym","$arg","$open","$include"]),function(n){var l,s,u,c,f,p,_,h,d,g,v,y,m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R,q,j,F,L,D,B,U,H,G,X,K,Y,V,J,W,Z,Q,ee,re,te,ne,$e,ae,ie,oe,le,se,ue,ce,fe,pe,_e,he,de,ge=l=a(n,"Kernel"),ve=(ge.$$proto,ge.$$scope);e.defn(ge,"$method_missing",s=function(e,r){var t,n=this,$=(s.$$p,arguments.length),a=$-1;a<0&&(a=0),t=new Array(a);for(var i=1;i<$;i++)t[i-1]=arguments[i];return s.$$p=null,n.$raise(ve.get("NoMethodError").$new("undefined method `"+e+"' for "+n.$inspect(),e,t))},s.$$arity=-2),e.defn(ge,"$=~",u=function(e){return!1},u.$$arity=1),e.defn(ge,"$!~",c=function(e){var r=this;return r["$=~"](e)["$!"]()},c.$$arity=1),e.defn(ge,"$===",f=function(e){var r,t=this;return(r=t.$object_id()["$=="](e.$object_id()))!==!1&&r!==$&&null!=r?r:t["$=="](e)},f.$$arity=1),e.defn(ge,"$<=>",p=function(e){var r=this;r.$$comparable=!0;var t=r["$=="](e);return t&&t!==$?0:$},p.$$arity=1),e.defn(ge,"$method",_=function(e){var r=this,t=r["$"+e];return t&&!t.$$stub||r.$raise(ve.get("NameError").$new("undefined method `"+e+"' for class `"+r.$class()+"'",e)),ve.get("Method").$new(r,t,e)},_.$$arity=1),e.defn(ge,"$methods",h=function(r){var t=this;null==r&&(r=!0);var n=[];for(var a in t)if("$"==a[0]&&"function"==typeof t[a]){if((0==r||r===$)&&!e.hasOwnProperty.call(t,a))continue;void 0===t[a].$$stub&&n.push(a.substr(1))}return n},h.$$arity=-1),e.alias(ge,"public_methods","methods"),e.defn(ge,"$Array",d=function(e){var r;return e===$?[]:e.$$is_array?e:(r=ve.get("Opal")["$coerce_to?"](e,ve.get("Array"),"to_ary"),r!==$?r:(r=ve.get("Opal")["$coerce_to?"](e,ve.get("Array"),"to_a"),r!==$?r:[e]))},d.$$arity=1),e.defn(ge,"$at_exit",g=function(){var e,r=g.$$p,t=r||$;return null==i.__at_exit__&&(i.__at_exit__=$),g.$$p=null,(e=i.__at_exit__)!==!1&&e!==$&&null!=e?e:i.__at_exit__=[],i.__at_exit__["$<<"](t)},g.$$arity=0),e.defn(ge,"$caller",v=function(){return[]},v.$$arity=0),e.defn(ge,"$class",y=function(){var e=this;return e.$$class},y.$$arity=0),e.defn(ge,"$copy_instance_variables",m=function(e){var r=this;for(var t in e)e.hasOwnProperty(t)&&"$"!==t.charAt(0)&&(r[t]=e[t])},m.$$arity=1),e.defn(ge,"$copy_singleton_methods",b=function(r){var t,n=this;if(r.hasOwnProperty("$$meta")){var $=e.get_singleton_class(r).$$proto,a=e.get_singleton_class(n).$$proto;for(t in $)"$"===t.charAt(0)&&$.hasOwnProperty(t)&&(a[t]=$[t])}for(t in r)"$"===t.charAt(0)&&"$"!==t.charAt(1)&&r.hasOwnProperty(t)&&(n[t]=r[t])},b.$$arity=1),e.defn(ge,"$clone",E=function(){var e=this,r=$;return r=e.$class().$allocate(),r.$copy_instance_variables(e),r.$copy_singleton_methods(e),r.$initialize_clone(e),r},E.$$arity=0),e.defn(ge,"$initialize_clone",w=function(e){var r=this;return r.$initialize_copy(e)},w.$$arity=1),e.defn(ge,"$define_singleton_method",O=function(e,r){var t,n,a=this,i=O.$$p,o=i||$;return O.$$p=null,(t=(n=a.$singleton_class()).$define_method,t.$$p=o.$to_proc(),t).call(n,e,r)},O.$$arity=-2),e.defn(ge,"$dup",A=function(){var e=this,r=$;return r=e.$class().$allocate(),r.$copy_instance_variables(e),r.$initialize_dup(e),r},A.$$arity=0),e.defn(ge,"$initialize_dup",x=function(e){var r=this;return r.$initialize_copy(e)},x.$$arity=1),e.defn(ge,"$enum_for",T=function(r,t){var n,a,i,o=this,l=T.$$p,s=l||$;null==r&&(r="each");var u=arguments.length,c=u-1;c<0&&(c=0),i=new Array(c);for(var f=1;f<u;f++)i[f-1]=arguments[f];return T.$$p=null,(n=(a=ve.get("Enumerator")).$for,n.$$p=s.$to_proc(),n).apply(a,[o,r].concat(e.to_a(i)))},T.$$arity=-1),e.alias(ge,"to_enum","enum_for"),e.defn(ge,"$equal?",M=function(e){var r=this;return r===e},M.$$arity=1),e.defn(ge,"$exit",P=function(t){var n,a,o=$;for(null==i.__at_exit__&&(i.__at_exit__=$),null==t&&(t=!0),(n=i.__at_exit__)!==!1&&n!==$&&null!=n?n:i.__at_exit__=[];(a=r(i.__at_exit__.$size(),0))!==$&&null!=a&&(!a.$$is_boolean||1==a);)o=i.__at_exit__.$pop(),o.$call();return(n=t===!0)===$||null==n||n.$$is_boolean&&1!=n||(t=0),e.exit(t),$},P.$$arity=-1),e.defn(ge,"$extend",k=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=t.$singleton_class(),o=r.length-1;o>=0;o--){var l=r[o];l.$$is_module||t.$raise(ve.get("TypeError"),"wrong argument type "+l.$class()+" (expected Module)"),l.$append_features(i),l.$extended(t)}return t},k.$$arity=-1),e.defn(ge,"$format",I=function(e,r){function t(){C&K&&h.$raise(ve.get("ArgumentError"),"flag after width"),C&V&&h.$raise(ve.get("ArgumentError"),"flag after precision")}function n(){C&K&&h.$raise(ve.get("ArgumentError"),"width given twice"),C&V&&h.$raise(ve.get("ArgumentError"),"width after precision")}function a(e){return e>=_.length&&h.$raise(ve.get("ArgumentError"),"too few arguments"),_[e]}function o(){switch(L){case-1:h.$raise(ve.get("ArgumentError"),"unnumbered("+F+") mixed with numbered");case-2:h.$raise(ve.get("ArgumentError"),"unnumbered("+F+") mixed with named")}return L=F++,a(L-1)}function l(e){return L>0&&h.$raise(ve.get("ArgumentError"),"numbered("+e+") after unnumbered("+L+")"),L===-2&&h.$raise(ve.get("ArgumentError"),"numbered("+e+") after named"),e<1&&h.$raise(ve.get("ArgumentError"),"invalid index - "+e+"$"),L=-1,a(e-1)}function s(){return void 0===z?o():z}function u(r){for(var t,n="";;b++){if(b===j&&h.$raise(ve.get("ArgumentError"),"malformed format string - %*[0-9]"),e.charCodeAt(b)<48||e.charCodeAt(b)>57)return b--,t=parseInt(n,10)||0,t>2147483647&&h.$raise(ve.get("ArgumentError"),""+r+" too big"),t;n+=e.charAt(b)}}function c(r){var t,n=u(r);return"$"===e.charAt(b+1)?(b++,t=l(n)):t=o(),t.$to_int()}var f,p,_,h=this,d=$;null==i.DEBUG&&(i.DEBUG=$);var g=arguments.length,v=g-1;v<0&&(v=0),_=new Array(v);for(var y=1;y<g;y++)_[y-1]=arguments[y];(f=(p=_.$length()["$=="](1))?_["$[]"](0)["$respond_to?"]("to_ary"):_.$length()["$=="](1))===$||null==f||f.$$is_boolean&&1!=f||(d=ve.get("Opal")["$coerce_to?"](_["$[]"](0),ve.get("Array"),"to_ary"),((f=d["$nil?"]())===$||null==f||f.$$is_boolean&&1!=f)&&(_=d.$to_a()));var m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R="",q=0,j=e.length,F=1,L=0,D=0,B=1,U=2,H=4,G=8,X=16,K=32,Y=64,V=128;for(b=e.indexOf("%");b!==-1;b=e.indexOf("%",b)){switch(w=void 0,C=D,A=-1,x=-1,z=void 0,m=b,b++,e.charAt(b)){case"%":q=b;case"":case"\n":case"\0":b++;continue}e:for(;b<j;b++)switch(e.charAt(b)){case" ":t(),C|=X;continue e;case"#":t(),C|=B;continue e;case"+":t(),C|=H;continue e;case"-":t(),C|=U;continue e;case"0":t(),C|=G;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(T=u("width"),"$"===e.charAt(b+1)){if(b+2===j){w="%",b++;break e}void 0!==z&&h.$raise(ve.get("ArgumentError"),"value given twice - %"+T+"$"),z=l(T),b++}else n(),C|=K,A=T;continue e;case"<":case"{":for(P="<"===e.charAt(b)?">":"}",M="",b++;;b++){if(b===j&&h.$raise(ve.get("ArgumentError"),"malformed name - unmatched parenthesis"),e.charAt(b)===P){if(L>0&&h.$raise(ve.get("ArgumentError"),"named "+M+" after unnumbered("+L+")"),L===-1&&h.$raise(ve.get("ArgumentError"),"named "+M+" after numbered"),L=-2,void 0!==_[0]&&_[0].$$is_hash||h.$raise(ve.get("ArgumentError"),"one hash required"),z=_[0].$fetch(M),">"===P)continue e;if(w=z.toString(),x!==-1&&(w=w.slice(0,x)),C&U)for(;w.length<A;)w+=" ";else for(;w.length<A;)w=" "+w;break e}M+=e.charAt(b)}case"*":b++,n(),C|=K,A=c("width"),A<0&&(C|=U,A=-A);continue e;case".":if(C&V&&h.$raise(ve.get("ArgumentError"),"precision given twice"),C|=Y|V,x=0,b++,"*"===e.charAt(b)){b++,x=c("precision"),x<0&&(C&=~Y);continue e}x=u("precision");continue e;case"d":case"i":case"u":if(E=h.$Integer(s()),E>=0){for(w=E.toString();w.length<x;)w="0"+w;if(C&U)for((C&H||C&X)&&(w=(C&H?"+":" ")+w);w.length<A;)w+=" ";else if(C&G&&x===-1){for(;w.length<A-(C&H||C&X?1:0);)w="0"+w;(C&H||C&X)&&(w=(C&H?"+":" ")+w)}else for((C&H||C&X)&&(w=(C&H?"+":" ")+w);w.length<A;)w=" "+w}else{for(w=(-E).toString();w.length<x;)w="0"+w;if(C&U)for(w="-"+w;w.length<A;)w+=" ";else if(C&G&&x===-1){for(;w.length<A-1;)w="0"+w;w="-"+w}else for(w="-"+w;w.length<A;)w=" "+w}break e;case"b":case"B":case"o":case"x":case"X":switch(e.charAt(b)){case"b":case"B":k=2,I="0b",N=/^1+/,S="1";break;case"o":k=8,I="0",N=/^3?7+/,S="7";break;case"x":case"X":k=16,I="0x",N=/^f+/,S="f"}if(E=h.$Integer(s()),E>=0){for(w=E.toString(k);w.length<x;)w="0"+w;if(C&U)for((C&H||C&X)&&(w=(C&H?"+":" ")+w),C&B&&0!==E&&(w=I+w);w.length<A;)w+=" ";else if(C&G&&x===-1){for(;w.length<A-(C&H||C&X?1:0)-(C&B&&0!==E?I.length:0);)w="0"+w;C&B&&0!==E&&(w=I+w),(C&H||C&X)&&(w=(C&H?"+":" ")+w)}else for(C&B&&0!==E&&(w=I+w),(C&H||C&X)&&(w=(C&H?"+":" ")+w);w.length<A;)w=" "+w}else if(C&H||C&X){for(w=(-E).toString(k);w.length<x;)w="0"+w;if(C&U)for(C&B&&(w=I+w),w="-"+w;w.length<A;)w+=" ";else if(C&G&&x===-1){for(;w.length<A-1-(C&B?2:0);)w="0"+w;C&B&&(w=I+w),w="-"+w}else for(C&B&&(w=I+w),w="-"+w;w.length<A;)w=" "+w}else{for(w=(E>>>0).toString(k).replace(N,S);w.length<x-2;)w=S+w;if(C&U)for(w=".."+w,C&B&&(w=I+w);w.length<A;)w+=" ";else if(C&G&&x===-1){for(;w.length<A-2-(C&B?I.length:0);)w=S+w;w=".."+w,C&B&&(w=I+w)}else for(w=".."+w,C&B&&(w=I+w);w.length<A;)w=" "+w}e.charAt(b)===e.charAt(b).toUpperCase()&&(w=w.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(E=h.$Float(s()),E>=0||isNaN(E)){if(E===1/0)w="Inf";else switch(e.charAt(b)){case"f":w=E.toFixed(x===-1?6:x);break;case"e":case"E":w=E.toExponential(x===-1?6:x);break;case"g":case"G":w=E.toExponential(),O=parseInt(w.split("e")[1],10),O<-4||O>=(x===-1?6:x)||(w=E.toPrecision(x===-1?C&B?6:void 0:x))}if(C&U)for((C&H||C&X)&&(w=(C&H?"+":" ")+w);w.length<A;)w+=" ";else if(C&G&&E!==1/0&&!isNaN(E)){for(;w.length<A-(C&H||C&X?1:0);)w="0"+w;(C&H||C&X)&&(w=(C&H?"+":" ")+w)}else for((C&H||C&X)&&(w=(C&H?"+":" ")+w);w.length<A;)w=" "+w}else{if(E===-(1/0))w="Inf";else switch(e.charAt(b)){case"f":w=(-E).toFixed(x===-1?6:x);break;case"e":case"E":w=(-E).toExponential(x===-1?6:x);break;case"g":case"G":w=(-E).toExponential(),O=parseInt(w.split("e")[1],10),O<-4||O>=(x===-1?6:x)||(w=(-E).toPrecision(x===-1?C&B?6:void 0:x))}if(C&U)for(w="-"+w;w.length<A;)w+=" ";else if(C&G&&E!==-(1/0)){for(;w.length<A-1;)w="0"+w;w="-"+w}else for(w="-"+w;w.length<A;)w=" "+w}e.charAt(b)!==e.charAt(b).toUpperCase()||E===1/0||E===-(1/0)||isNaN(E)||(w=w.toUpperCase()),w=w.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":h.$raise(ve.get("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(E=s(),E["$respond_to?"]("to_ary")&&(E=E.$to_ary()[0]),w=E["$respond_to?"]("to_str")?E.$to_str():String.fromCharCode(ve.get("Opal").$coerce_to(E,ve.get("Integer"),"to_int")),1!==w.length&&h.$raise(ve.get("ArgumentError"),"%c requires a character"),C&U)for(;w.length<A;)w+=" ";else for(;w.length<A;)w=" "+w;break e;case"p":if(w=s().$inspect(),x!==-1&&(w=w.slice(0,x)),C&U)for(;w.length<A;)w+=" ";else for(;w.length<A;)w=" "+w;break e;case"s":if(w=s().$to_s(),x!==-1&&(w=w.slice(0,x)),C&U)for(;w.length<A;)w+=" ";else for(;w.length<A;)w=" "+w;break e;default:h.$raise(ve.get("ArgumentError"),"malformed format string - %"+e.charAt(b))}void 0===w&&h.$raise(ve.get("ArgumentError"),"malformed format string - %"),R+=e.slice(q,m)+w,q=b+1}return i.DEBUG&&L>=0&&F<_.length&&h.$raise(ve.get("ArgumentError"),"too many arguments for format string"),R+e.slice(q)},I.$$arity=-2),e.defn(ge,"$hash",N=function(){var e=this;return e.$__id__()},N.$$arity=0),e.defn(ge,"$initialize_copy",S=function(e){return $},S.$$arity=1),e.defn(ge,"$inspect",z=function(){var e=this;return e.$to_s()},z.$$arity=0),e.defn(ge,"$instance_of?",C=function(e){var r=this;return e.$$is_class||e.$$is_module||r.$raise(ve.get("TypeError"),"class or module required"),r.$$class===e},C.$$arity=1),e.defn(ge,"$instance_variable_defined?",R=function(r){var t=this;return r=ve.get("Opal")["$instance_variable_name!"](r),e.hasOwnProperty.call(t,r.substr(1))},R.$$arity=1),e.defn(ge,"$instance_variable_get",q=function(r){var t=this;r=ve.get("Opal")["$instance_variable_name!"](r);var n=t[e.ivar(r.substr(1))];return null==n?$:n},q.$$arity=1),e.defn(ge,"$instance_variable_set",j=function(r,t){var n=this;return r=ve.get("Opal")["$instance_variable_name!"](r),n[e.ivar(r.substr(1))]=t},j.$$arity=2),e.defn(ge,"$remove_instance_variable",F=function(r){var t=this;r=ve.get("Opal")["$instance_variable_name!"](r);var n,$=e.ivar(r.substr(1));return t.hasOwnProperty($)?(n=t[$],delete t[$],n):t.$raise(ve.get("NameError"),"instance variable "+r+" not defined")},F.$$arity=1),e.defn(ge,"$instance_variables",L=function(){var e,r=this,t=[];for(var n in r)r.hasOwnProperty(n)&&"$"!==n.charAt(0)&&(e="$"===n.substr(-1)?n.slice(0,n.length-1):n,t.push("@"+e));return t},L.$$arity=0),e.defn(ge,"$Integer",D=function(e,r){var t,n,a,i=this;return e.$$is_string?(void 0===r?r=0:(r=ve.get("Opal").$coerce_to(r,ve.get("Integer"),"to_int"),(1===r||r<0||r>36)&&i.$raise(ve.get("ArgumentError"),"invalid radix "+r)),n=e.toLowerCase(),n=n.replace(/(\d)_(?=\d)/g,"$1"),n=n.replace(/^(\s*[+-]?)(0[bodx]?)/,function(t,n,$){switch($){case"0b":if(0===r||2===r)return r=2,n;case"0":case"0o":if(0===r||8===r)return r=8,n;case"0d":if(0===r||10===r)return r=10,n;case"0x":if(0===r||16===r)return r=16,n}i.$raise(ve.get("ArgumentError"),'invalid value for Integer(): "'+e+'"')}),r=0===r?10:r,a="0-"+(r<=10?r-1:"9a-"+String.fromCharCode(97+(r-11))),new RegExp("^\\s*[+-]?["+a+"]+\\s*$").test(n)||i.$raise(ve.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),t=parseInt(n,r),isNaN(t)&&i.$raise(ve.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),t):(void 0!==r&&i.$raise(ve.get("ArgumentError"),"base specified for non string value"),e===$&&i.$raise(ve.get("TypeError"),"can't convert nil into Integer"),e.$$is_number?((e===1/0||e===-(1/0)||isNaN(e))&&i.$raise(ve.get("FloatDomainError"),e),Math.floor(e)):e["$respond_to?"]("to_int")&&(t=e.$to_int(),t!==$)?t:ve.get("Opal")["$coerce_to!"](e,ve.get("Integer"),"to_i"))},D.$$arity=-2),e.defn(ge,"$Float",B=function(e){var r,t=this;return e===$&&t.$raise(ve.get("TypeError"),"can't convert nil into Float"),e.$$is_string?(r=e.toString(),r=r.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(r)?t.$Integer(r):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(r)||t.$raise(ve.get("ArgumentError"),'invalid value for Float(): "'+e+'"'),parseFloat(r))):ve.get("Opal")["$coerce_to!"](e,ve.get("Float"),"to_f")},B.$$arity=1),e.defn(ge,"$Hash",U=function(e){var r,t;return(r=(t=e["$nil?"]())!==!1&&t!==$&&null!=t?t:e["$=="]([]))===$||null==r||r.$$is_boolean&&1!=r?(r=ve.get("Hash")["$==="](e))===$||null==r||r.$$is_boolean&&1!=r?ve.get("Opal")["$coerce_to!"](e,ve.get("Hash"),"to_hash"):e:o([],{})},U.$$arity=1),e.defn(ge,"$is_a?",H=function(r){var t=this;return r.$$is_class||r.$$is_module||t.$raise(ve.get("TypeError"),"class or module required"),e.is_a(t,r)},H.$$arity=1),e.alias(ge,"kind_of?","is_a?"),e.defn(ge,"$lambda",G=function(){var e=G.$$p,r=e||$;return G.$$p=null,r.$$is_lambda=!0,r},G.$$arity=0),e.defn(ge,"$load",X=function(r){return r=ve.get("Opal")["$coerce_to!"](r,ve.get("String"),"to_str"),e.load(r)},X.$$arity=1),e.defn(ge,"$loop",K=function(){var r=this,t=K.$$p,n=t||$;if(K.$$p=null,n===$)return r.$enum_for("loop");for(;;)e.yieldX(n,[]);return r},K.$$arity=0),e.defn(ge,"$nil?",Y=function(){return!1},Y.$$arity=0),e.alias(ge,"object_id","__id__"),e.defn(ge,"$printf",V=function(t){var n,a,i=this,o=arguments.length,l=o-0;l<0&&(l=0),a=new Array(l);for(var s=0;s<o;s++)a[s-0]=arguments[s];return(n=r(a.$length(),0))===$||null==n||n.$$is_boolean&&1!=n||i.$print((n=i).$format.apply(n,e.to_a(a))),$},V.$$arity=-1),e.defn(ge,"$proc",J=function(){var e=this,r=J.$$p,t=r||$;return J.$$p=null,t!==!1&&t!==$&&null!=t||e.$raise(ve.get("ArgumentError"),"tried to create Proc object without a block"),t.$$is_lambda=!1,t},J.$$arity=0),e.defn(ge,"$puts",W=function(r){var t,n;null==i.stdout&&(i.stdout=$);var a=arguments.length,o=a-0;o<0&&(o=0),n=new Array(o);for(var l=0;l<a;l++)n[l-0]=arguments[l];return(t=i.stdout).$puts.apply(t,e.to_a(n))},W.$$arity=-1),e.defn(ge,"$p",Z=function(e){var r,n,a,o,l=this,s=arguments.length,u=s-0;u<0&&(u=0),o=new Array(u);for(var c=0;c<s;c++)o[c-0]=arguments[c];return(r=(n=o).$each,r.$$p=(a=function(e){a.$$s||this;return null==i.stdout&&(i.stdout=$),null==e&&(e=$),i.stdout.$puts(e.$inspect())},a.$$s=l,a.$$arity=1,a),r).call(n),(r=t(o.$length(),1))===$||null==r||r.$$is_boolean&&1!=r?o:o["$[]"](0)},Z.$$arity=-1),e.defn(ge,"$print",Q=function(r){var t,n;null==i.stdout&&(i.stdout=$);var a=arguments.length,o=a-0;o<0&&(o=0),n=new Array(o);for(var l=0;l<a;l++)n[l-0]=arguments[l];return(t=i.stdout).$print.apply(t,e.to_a(n))},Q.$$arity=-1),e.defn(ge,"$warn",ee=function(r){var t,n,a;null==i.VERBOSE&&(i.VERBOSE=$),null==i.stderr&&(i.stderr=$);var o=arguments.length,l=o-0;l<0&&(l=0),a=new Array(l);for(var s=0;s<o;s++)a[s-0]=arguments[s];return(t=(n=i.VERBOSE["$nil?"]())!==!1&&n!==$&&null!=n?n:a["$empty?"]())===$||null==t||t.$$is_boolean&&1!=t?(t=i.stderr).$puts.apply(t,e.to_a(a)):$},ee.$$arity=-1),e.defn(ge,"$raise",re=function(r,t,n){if(null==i["!"]&&(i["!"]=$),null==t&&(t=$),null==n&&(n=$),null==r&&i["!"]!==$)throw i["!"];throw null==r?r=ve.get("RuntimeError").$new():r.$$is_string?r=ve.get("RuntimeError").$new(r):r.$$is_class&&r["$respond_to?"]("exception")?r=r.$exception(t):r["$kind_of?"](ve.get("Exception"))||(r=ve.get("TypeError").$new("exception class/object expected")),i["!"]!==$&&e.exceptions.push(i["!"]),i["!"]=r,r},re.$$arity=-1),e.alias(ge,"fail","raise"),e.defn(ge,"$rand",te=function(e){var r=this;if(void 0===e)return Math.random();if(e.$$is_range){var t=e.begin,n=e.end-t;return e.exclude||n++,r.$rand(n)+t}return Math.floor(Math.random()*Math.abs(ve.get("Opal").$coerce_to(e,ve.get("Integer"),"to_int")))},te.$$arity=-1),e.defn(ge,"$respond_to?",ne=function(e,r){var t,n=this;if(null==r&&(r=!1),(t=n["$respond_to_missing?"](e,r))!==$&&null!=t&&(!t.$$is_boolean||1==t))return!0;var a=n["$"+e];return"function"==typeof a&&!a.$$stub},ne.$$arity=-2),e.defn(ge,"$respond_to_missing?",$e=function(e,r){return null==r&&(r=!1),!1},$e.$$arity=-2),e.defn(ge,"$require",ae=function(r){return r=ve.get("Opal")["$coerce_to!"](r,ve.get("String"),"to_str"),e.require(r)},ae.$$arity=1),e.defn(ge,"$require_relative",ie=function(r){return ve.get("Opal")["$try_convert!"](r,ve.get("String"),"to_str"),r=ve.get("File").$expand_path(ve.get("File").$join(e.current_file,"..",r)),e.require(r)},ie.$$arity=1),e.defn(ge,"$require_tree",oe=function(r){r=ve.get("File").$expand_path(r),r["$=="](".")&&(r="");for(var t in e.modules)t["$start_with?"](r)&&e.require(t);return $},oe.$$arity=1),e.alias(ge,"send","__send__"),e.alias(ge,"public_send","__send__"),e.defn(ge,"$singleton_class",le=function(){var r=this;return e.get_singleton_class(r)},le.$$arity=0),e.defn(ge,"$sleep",se=function(e){var r=this;null==e&&(e=$),e===$&&r.$raise(ve.get("TypeError"),"can't convert NilClass into time interval"),e.$$is_number||r.$raise(ve.get("TypeError"),"can't convert "+e.$class()+" into time interval"),e<0&&r.$raise(ve.get("ArgumentError"),"time interval must be positive");for(var t=new Date;new Date-t<=1e3*e;);return e},se.$$arity=-1),e.alias(ge,"sprintf","format"),e.alias(ge,"srand","rand"),e.defn(ge,"$String",ue=function(e){var r;return(r=ve.get("Opal")["$coerce_to?"](e,ve.get("String"),"to_str"))!==!1&&r!==$&&null!=r?r:ve.get("Opal")["$coerce_to!"](e,ve.get("String"),"to_s")},ue.$$arity=1),e.defn(ge,"$tap",ce=function(){var r=this,t=ce.$$p,n=t||$;return ce.$$p=null,e.yield1(n,r),r},ce.$$arity=0),e.defn(ge,"$to_proc",fe=function(){var e=this;return e},fe.$$arity=0),e.defn(ge,"$to_s",pe=function(){var e=this;return"#<"+e.$class()+":0x"+e.$__id__().$to_s(16)+">"},pe.$$arity=0),e.defn(ge,"$catch",_e=function(r){var t=this,n=_e.$$p,a=n||$,i=$;_e.$$p=null;try{return e.yieldX(a,[])}catch(n){if(!e.rescue(n,[ve.get("UncaughtThrowError")]))throw n;i=n;try{return i.$sym()["$=="](r)?i.$arg():t.$raise()}finally{e.pop_exception()}}},_e.$$arity=1),e.defn(ge,"$throw",he=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];return t.$raise(ve.get("UncaughtThrowError").$new(r))},he.$$arity=-1),e.defn(ge,"$open",de=function(r){var t,n,a,i=de.$$p,o=i||$,l=arguments.length,s=l-0;s<0&&(s=0),a=new Array(s);for(var u=0;u<l;u++)a[u-0]=arguments[u];return de.$$p=null,(t=(n=ve.get("File")).$open,t.$$p=o.$to_proc(),t).apply(n,e.to_a(a))},de.$$arity=-1)}(n.base),function(e,r){function t(){}var n=t=l(e,r,"Object",t),$=(n.$$proto,n.$$scope);return n.$include($.get("Kernel"))}(n.base,null)},Opal.modules["corelib/error"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}var t=(e.top,e),n=e.nil,$=(e.breaker,e.slice,e.klass),a=e.module;return e.add_stubs(["$new","$clone","$to_s","$empty?","$class","$attr_reader","$[]","$>","$length","$inspect"]),function(r,t){function a(){}var i,o,l,s,u,c,f,p,_=a=$(r,t,"Exception",a),h=_.$$proto;_.$$scope;return h.message=n,e.defs(_,"$new",i=function(e){var r,t=this,$=arguments.length,a=$-0;a<0&&(a=0),r=new Array(a);for(var i=0;i<$;i++)r[i-0]=arguments[i];var o=r.length>0?r[0]:n,l=new t.$$alloc(o);return Error.captureStackTrace&&Error.captureStackTrace(l),l.name=t.$$name,l.$initialize.apply(l,r),l},i.$$arity=-1),e.defs(_,"$exception",o=function(r){
var t,n,$=this,a=arguments.length,i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return(t=$).$new.apply(t,e.to_a(n))},o.$$arity=-1),e.defn(_,"$initialize",l=function(e){var r,t=this,$=arguments.length,a=$-0;a<0&&(a=0),r=new Array(a);for(var i=0;i<$;i++)r[i-0]=arguments[i];return t.message=r.length>0?r[0]:n},l.$$arity=-1),e.defn(_,"$backtrace",s=function(){var e=this,r=e.stack;return"string"==typeof r?r.split("\n").slice(0,15):r?r.slice(0,15):[]},s.$$arity=0),e.defn(_,"$exception",u=function(e){var r=this;if(null==e&&(e=n),e===n||r===e)return r;var t=r.$clone();return t.message=e,t},u.$$arity=-1),e.defn(_,"$message",c=function(){var e=this;return e.$to_s()},c.$$arity=0),e.defn(_,"$inspect",f=function(){var e,r=this,t=n;return t=r.$to_s(),(e=t["$empty?"]())===n||null==e||e.$$is_boolean&&1!=e?"#<"+r.$class().$to_s()+": "+r.$to_s()+">":r.$class().$to_s()},f.$$arity=0),e.defn(_,"$to_s",p=function(){var e,r,t=this;return r=t.message,(e=r!==!1&&r!==n&&null!=r?t.message.$to_s():r)!==!1&&e!==n&&null!=e?e:t.$class().$to_s()},p.$$arity=0),n&&"to_s"}(t.base,Error),function(e,r){function t(){}var a=t=$(e,r,"ScriptError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("Exception")),function(e,r){function t(){}var a=t=$(e,r,"SyntaxError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("ScriptError")),function(e,r){function t(){}var a=t=$(e,r,"LoadError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("ScriptError")),function(e,r){function t(){}var a=t=$(e,r,"NotImplementedError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("ScriptError")),function(e,r){function t(){}var a=t=$(e,r,"SystemExit",t);a.$$proto,a.$$scope;return n}(t.base,t.get("Exception")),function(e,r){function t(){}var a=t=$(e,r,"NoMemoryError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("Exception")),function(e,r){function t(){}var a=t=$(e,r,"SignalException",t);a.$$proto,a.$$scope;return n}(t.base,t.get("Exception")),function(e,r){function t(){}var a=t=$(e,r,"Interrupt",t);a.$$proto,a.$$scope;return n}(t.base,t.get("Exception")),function(e,r){function t(){}var a=t=$(e,r,"SecurityError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("Exception")),function(e,r){function t(){}var a=t=$(e,r,"StandardError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("Exception")),function(e,r){function t(){}var a=t=$(e,r,"ZeroDivisionError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"NameError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"NoMethodError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("NameError")),function(e,r){function t(){}var a=t=$(e,r,"RuntimeError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"LocalJumpError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"TypeError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"ArgumentError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"IndexError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"StopIteration",t);a.$$proto,a.$$scope;return n}(t.base,t.get("IndexError")),function(e,r){function t(){}var a=t=$(e,r,"KeyError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("IndexError")),function(e,r){function t(){}var a=t=$(e,r,"RangeError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"FloatDomainError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("RangeError")),function(e,r){function t(){}var a=t=$(e,r,"IOError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(e,r){function t(){}var a=t=$(e,r,"SystemCallError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(r){var t,i=t=a(r,"Errno"),o=(i.$$proto,i.$$scope);!function(r,t){function a(){}var i,o=a=$(r,t,"EINVAL",a);o.$$proto,o.$$scope;return e.defs(o,"$new",i=function(){var r,t,n=this;i.$$p;return i.$$p=null,(t=n,r=e.find_super_dispatcher(n,"new",i,!1,a),r.$$p=null,r).call(t,"Invalid argument")},i.$$arity=0),n&&"new"}(o.base,o.get("SystemCallError"))}(t.base),function(t,a){function i(){}var o,l=i=$(t,a,"UncaughtThrowError",i),s=l.$$proto;l.$$scope;return s.sym=n,l.$attr_reader("sym","arg"),e.defn(l,"$initialize",o=function(t){var $,a,i=this;o.$$p;return o.$$p=null,i.sym=t["$[]"](0),($=r(t.$length(),1))===n||null==$||$.$$is_boolean&&1!=$||(i.arg=t["$[]"](1)),(a=i,$=e.find_super_dispatcher(i,"initialize",o,!1),$.$$p=null,$).call(a,"uncaught throw "+i.sym.$inspect())},o.$$arity=1),n&&"initialize"}(t.base,t.get("ArgumentError")),function(r,t){function a(){}var i,o=a=$(r,t,"NameError",a);o.$$proto,o.$$scope;return o.$attr_reader("name"),e.defn(o,"$initialize",i=function(r,t){var $,a,o=this;i.$$p;return null==t&&(t=n),i.$$p=null,(a=o,$=e.find_super_dispatcher(o,"initialize",i,!1),$.$$p=null,$).call(a,r),o.name=t},i.$$arity=-2),n&&"initialize"}(t.base,null),function(r,t){function a(){}var i,o=a=$(r,t,"NoMethodError",a);o.$$proto,o.$$scope;return o.$attr_reader("args"),e.defn(o,"$initialize",i=function(r,t,$){var a,o,l=this;i.$$p;return null==t&&(t=n),null==$&&($=[]),i.$$p=null,(o=l,a=e.find_super_dispatcher(l,"initialize",i,!1),a.$$p=null,a).call(o,r,t),l.args=$},i.$$arity=-2),n&&"initialize"}(t.base,null)},Opal.modules["corelib/constants"]=function(e){var r=(e.top,e);e.nil,e.breaker,e.slice;return e.cdecl(r,"RUBY_PLATFORM","opal"),e.cdecl(r,"RUBY_ENGINE","opal"),e.cdecl(r,"RUBY_VERSION","2.2.5"),e.cdecl(r,"RUBY_ENGINE_VERSION","0.10.3"),e.cdecl(r,"RUBY_RELEASE_DATE","2016-10-31"),e.cdecl(r,"RUBY_PATCHLEVEL",0),e.cdecl(r,"RUBY_REVISION",0),e.cdecl(r,"RUBY_COPYRIGHT","opal - Copyright (C) 2013-2015 Adam Beynon"),e.cdecl(r,"RUBY_DESCRIPTION","opal "+r.get("RUBY_ENGINE_VERSION")+" ("+r.get("RUBY_RELEASE_DATE")+" revision "+r.get("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(e){var r=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),r.$require("corelib/runtime"),r.$require("corelib/helpers"),r.$require("corelib/module"),r.$require("corelib/class"),r.$require("corelib/basic_object"),r.$require("corelib/kernel"),r.$require("corelib/error"),r.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}var t=(e.top,e),n=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise","$class","$new","$>","$length","$Rational"]),function(t,a){function i(){}var o,l,s,u,c,f,p,_,h,d,g,v,y,m,b,E,w,O,A=i=$(t,a,"NilClass",i),x=A.$$proto,T=A.$$scope;return x.$$meta=A,e.defn(A,"$!",o=function(){return!0},o.$$arity=0),e.defn(A,"$&",l=function(e){return!1},l.$$arity=1),e.defn(A,"$|",s=function(e){return e!==!1&&e!==n},s.$$arity=1),e.defn(A,"$^",u=function(e){return e!==!1&&e!==n},u.$$arity=1),e.defn(A,"$==",c=function(e){return e===n},c.$$arity=1),e.defn(A,"$dup",f=function(){var e=this;return e.$raise(T.get("TypeError"),"can't dup "+e.$class())},f.$$arity=0),e.defn(A,"$clone",p=function(){var e=this;return e.$raise(T.get("TypeError"),"can't clone "+e.$class())},p.$$arity=0),e.defn(A,"$inspect",_=function(){return"nil"},_.$$arity=0),e.defn(A,"$nil?",h=function(){return!0},h.$$arity=0),e.defn(A,"$singleton_class",d=function(){return T.get("NilClass")},d.$$arity=0),e.defn(A,"$to_a",g=function(){return[]},g.$$arity=0),e.defn(A,"$to_h",v=function(){return e.hash()},v.$$arity=0),e.defn(A,"$to_i",y=function(){return 0},y.$$arity=0),e.alias(A,"to_f","to_i"),e.defn(A,"$to_s",m=function(){return""},m.$$arity=0),e.defn(A,"$to_c",b=function(){return T.get("Complex").$new(0,0)},b.$$arity=0),e.defn(A,"$rationalize",E=function(e){var t,$,a=this,i=arguments.length,o=i-0;o<0&&(o=0),$=new Array(o);for(var l=0;l<i;l++)$[l-0]=arguments[l];return(t=r($.$length(),1))===n||null==t||t.$$is_boolean&&1!=t||a.$raise(T.get("ArgumentError")),a.$Rational(0,1)},E.$$arity=-1),e.defn(A,"$to_r",w=function(){var e=this;return e.$Rational(0,1)},w.$$arity=0),e.defn(A,"$instance_variables",O=function(){return[]},O.$$arity=0),n&&"instance_variables"}(t.base,null),e.cdecl(t,"NIL",n)},Opal.modules["corelib/boolean"]=function(e){var r=(e.top,e),t=e.nil,n=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise","$class"]),function(r,$){function a(){}var i,o,l,s,u,c,f,p,_,h,d=a=n(r,$,"Boolean",a),g=d.$$proto,v=d.$$scope;return g.$$is_boolean=!0,g.$$meta=d,e.defn(d,"$__id__",i=function(){var e=this;return e.valueOf()?2:0},i.$$arity=0),e.alias(d,"object_id","__id__"),e.defn(d,"$!",o=function(){var e=this;return 1!=e},o.$$arity=0),e.defn(d,"$&",l=function(e){var r=this;return 1==r&&(e!==!1&&e!==t)},l.$$arity=1),e.defn(d,"$|",s=function(e){var r=this;return 1==r||e!==!1&&e!==t},s.$$arity=1),e.defn(d,"$^",u=function(e){var r=this;return 1==r?e===!1||e===t:e!==!1&&e!==t},u.$$arity=1),e.defn(d,"$==",c=function(e){var r=this;return 1==r===e.valueOf()},c.$$arity=1),e.alias(d,"equal?","=="),e.alias(d,"eql?","=="),e.defn(d,"$singleton_class",f=function(){return v.get("Boolean")},f.$$arity=0),e.defn(d,"$to_s",p=function(){var e=this;return 1==e?"true":"false"},p.$$arity=0),e.defn(d,"$dup",_=function(){var e=this;return e.$raise(v.get("TypeError"),"can't dup "+e.$class())},_.$$arity=0),e.defn(d,"$clone",h=function(){var e=this;return e.$raise(v.get("TypeError"),"can't clone "+e.$class())},h.$$arity=0),t&&"clone"}(r.base,Boolean),e.cdecl(r,"TrueClass",r.get("Boolean")),e.cdecl(r,"FalseClass",r.get("Boolean")),e.cdecl(r,"TRUE",!0),e.cdecl(r,"FALSE",!1)},Opal.modules["corelib/comparable"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}var n=(e.top,e),$=e.nil,a=(e.breaker,e.slice,e.module);return e.add_stubs(["$===","$>","$<","$equal?","$<=>","$normalize","$raise","$class"]),function(n){var i,o,l,s,u,c,f,p,_=i=a(n,"Comparable"),h=(_.$$proto,_.$$scope);e.defs(_,"$normalize",o=function(e){var n;return(n=h.get("Integer")["$==="](e))===$||null==n||n.$$is_boolean&&1!=n?(n=r(e,0))===$||null==n||n.$$is_boolean&&1!=n?(n=t(e,0))===$||null==n||n.$$is_boolean&&1!=n?0:-1:1:e},o.$$arity=1),e.defn(_,"$==",l=function(r){var t,n=this,a=$;try{return!((t=n["$equal?"](r))===$||null==t||t.$$is_boolean&&1!=t)||n["$<=>"]!=e.Kernel["$<=>"]&&(n.$$comparable?(delete n.$$comparable,!1):!((t=a=n["$<=>"](r))===$||null==t||t.$$is_boolean&&1!=t)&&0==h.get("Comparable").$normalize(a))}catch(r){if(!e.rescue(r,[h.get("StandardError")]))throw r;try{return!1}finally{e.pop_exception()}}},l.$$arity=1),e.defn(_,"$>",s=function(e){var r,t=this,n=$;return((r=n=t["$<=>"](e))===$||null==r||r.$$is_boolean&&1!=r)&&t.$raise(h.get("ArgumentError"),"comparison of "+t.$class()+" with "+e.$class()+" failed"),h.get("Comparable").$normalize(n)>0},s.$$arity=1),e.defn(_,"$>=",u=function(e){var r,t=this,n=$;return((r=n=t["$<=>"](e))===$||null==r||r.$$is_boolean&&1!=r)&&t.$raise(h.get("ArgumentError"),"comparison of "+t.$class()+" with "+e.$class()+" failed"),h.get("Comparable").$normalize(n)>=0},u.$$arity=1),e.defn(_,"$<",c=function(e){var r,t=this,n=$;return((r=n=t["$<=>"](e))===$||null==r||r.$$is_boolean&&1!=r)&&t.$raise(h.get("ArgumentError"),"comparison of "+t.$class()+" with "+e.$class()+" failed"),h.get("Comparable").$normalize(n)<0},c.$$arity=1),e.defn(_,"$<=",f=function(e){var r,t=this,n=$;return((r=n=t["$<=>"](e))===$||null==r||r.$$is_boolean&&1!=r)&&t.$raise(h.get("ArgumentError"),"comparison of "+t.$class()+" with "+e.$class()+" failed"),h.get("Comparable").$normalize(n)<=0},f.$$arity=1),e.defn(_,"$between?",p=function(e,n){var $=this;return!t($,e)&&!r($,n)},p.$$arity=2)}(n.base)},Opal.modules["corelib/regexp"]=function(e){var r=(e.top,e),t=e.nil,n=(e.breaker,e.slice,e.klass),$=e.gvars;return e.add_stubs(["$nil?","$[]","$raise","$escape","$options","$to_str","$new","$join","$coerce_to!","$!","$match","$coerce_to?","$begin","$coerce_to","$call","$=~","$attr_reader","$===","$inspect","$to_a"]),function(e,r){function $(){}var a=$=n(e,r,"RegexpError",$);a.$$proto,a.$$scope;return t}(r.base,r.get("StandardError")),function(r,a){function i(){}var o,l,s,u,c,f,p,_,h,d,g=i=n(r,a,"Regexp",i),v=g.$$proto,y=g.$$scope;return e.cdecl(y,"IGNORECASE",1),e.cdecl(y,"MULTILINE",4),v.$$is_regexp=!0,function(r){var n,a,i,o,l,s=r.$$scope;r.$$proto;return e.defn(r,"$allocate",n=function(){var r,$,a=this,i=n.$$p,o=t,l=t,s=t;for(n.$$p=null,l=[],s=0;s<arguments.length;s++)l[s]=arguments[s];return o=($=a,r=e.find_super_dispatcher(a,"allocate",n,!1),r.$$p=i,r).apply($,l),o.uninitialized=!0,o},n.$$arity=0),e.defn(r,"$escape",a=function(e){return e.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},a.$$arity=1),e.defn(r,"$last_match",i=function(e){var r;return null==$["~"]&&($["~"]=t),null==e&&(e=t),(r=e["$nil?"]())===t||null==r||r.$$is_boolean&&1!=r?$["~"]["$[]"](e):$["~"]},i.$$arity=-1),e.alias(r,"quote","escape"),e.defn(r,"$union",o=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];var i,o,l,u,c;if(0==r.length)return/(?!)/;i=r[0].$$is_array,r.length>1&&i&&t.$raise(s.get("TypeError"),"no implicit conversion of Array into String"),i&&(r=r[0]),u=void 0,o=[];for(var f=0;f<r.length;f++)l=r[f],l.$$is_string?o.push(t.$escape(l)):l.$$is_regexp?(c=l.$options(),void 0!=u&&u!=c&&t.$raise(s.get("TypeError"),"All expressions must use the same options"),u=c,o.push("("+l.source+")")):o.push(t.$escape(l.$to_str()));return t.$new(o.$join("|"),u)},o.$$arity=-1),e.defn(r,"$new",l=function(e,r){var t=this;if(e.$$is_regexp)return new RegExp(e);if(e=s.get("Opal")["$coerce_to!"](e,s.get("String"),"to_str"),"\\"===e.charAt(e.length-1)&&"\\"!==e.charAt(e.length-2)&&t.$raise(s.get("RegexpError"),"too short escape sequence: /"+e+"/"),void 0===r||r["$!"]())return new RegExp(e);if(r.$$is_number){var n="";s.get("IGNORECASE")&r&&(n+="i"),s.get("MULTILINE")&r&&(n+="m"),r=n}else r="i";return new RegExp(e,r)},l.$$arity=-2),t&&"new"}(e.get_singleton_class(g)),e.defn(g,"$==",o=function(e){var r=this;return e.constructor==RegExp&&r.toString()===e.toString()},o.$$arity=1),e.defn(g,"$===",l=function(e){var r=this;return r.$match(y.get("Opal")["$coerce_to?"](e,y.get("String"),"to_str"))!==t},l.$$arity=1),e.defn(g,"$=~",s=function(e){var r,n=this;return null==$["~"]&&($["~"]=t),r=n.$match(e),r!==!1&&r!==t&&null!=r?$["~"].$begin(0):r},s.$$arity=1),e.alias(g,"eql?","=="),e.defn(g,"$inspect",u=function(){var e=this;return e.toString()},u.$$arity=0),e.defn(g,"$match",c=function(e,r){var n=this,a=c.$$p,i=a||t;if(null==$["~"]&&($["~"]=t),c.$$p=null,n.uninitialized&&n.$raise(y.get("TypeError"),"uninitialized Regexp"),r=void 0===r?0:y.get("Opal").$coerce_to(r,y.get("Integer"),"to_int"),e===t)return $["~"]=t;if(e=y.get("Opal").$coerce_to(e,y.get("String"),"to_str"),r<0&&(r+=e.length,r<0))return $["~"]=t;var o=n.source,l="g";n.multiline&&(o=o.replace(".","[\\s\\S]"),l+="m");for(var s,u=new RegExp(o,l+(n.ignoreCase?"i":""));;){if(s=u.exec(e),null===s)return $["~"]=t;if(s.index>=r)return $["~"]=y.get("MatchData").$new(u,s),i===t?$["~"]:i.$call($["~"]);u.lastIndex=s.index+1}},c.$$arity=-2),e.defn(g,"$~",f=function(){var e=this;return null==$._&&($._=t),e["$=~"]($._)},f.$$arity=0),e.defn(g,"$source",p=function(){var e=this;return e.source},p.$$arity=0),e.defn(g,"$options",_=function(){var e=this;e.uninitialized&&e.$raise(y.get("TypeError"),"uninitialized Regexp");var r=0;return e.multiline&&(r|=y.get("MULTILINE")),e.ignoreCase&&(r|=y.get("IGNORECASE")),r},_.$$arity=0),e.defn(g,"$casefold?",h=function(){var e=this;return e.ignoreCase},h.$$arity=0),e.alias(g,"to_s","source"),e.defs(g,"$_load",d=function(r){var t,n=this;return(t=n).$new.apply(t,e.to_a(r))},d.$$arity=1),t&&"_load"}(r.base,RegExp),function(r,a){function i(){}var o,l,s,u,c,f,p,_,h,d,g,v,y=i=n(r,a,"MatchData",i),m=y.$$proto,b=y.$$scope;return m.matches=t,y.$attr_reader("post_match","pre_match","regexp","string"),e.defn(y,"$initialize",o=function(e,r){var n=this;$["~"]=n,n.regexp=e,n.begin=r.index,n.string=r.input,n.pre_match=r.input.slice(0,r.index),n.post_match=r.input.slice(r.index+r[0].length),n.matches=[];for(var a=0,i=r.length;a<i;a++){var o=r[a];null==o?n.matches.push(t):n.matches.push(o)}},o.$$arity=2),e.defn(y,"$[]",l=function(r){var t,n,$=this,a=arguments.length,i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return(t=$.matches)["$[]"].apply(t,e.to_a(n))},l.$$arity=-1),e.defn(y,"$offset",s=function(e){var r=this;return 0!==e&&r.$raise(b.get("ArgumentError"),"MatchData#offset only supports 0th element"),[r.begin,r.begin+r.matches[e].length]},s.$$arity=1),e.defn(y,"$==",u=function(e){var r,n,$,a,i=this;return!((r=b.get("MatchData")["$==="](e))===t||null==r||r.$$is_boolean&&1!=r)&&(a=i.string==e.string,$=a!==!1&&a!==t&&null!=a?i.regexp.toString()==e.regexp.toString():a,n=$!==!1&&$!==t&&null!=$?i.pre_match==e.pre_match:$,r=n!==!1&&n!==t&&null!=n?i.post_match==e.post_match:n,r!==!1&&r!==t&&null!=r?i.begin==e.begin:r)},u.$$arity=1),e.alias(y,"eql?","=="),e.defn(y,"$begin",c=function(e){var r=this;return 0!==e&&r.$raise(b.get("ArgumentError"),"MatchData#begin only supports 0th element"),r.begin},c.$$arity=1),e.defn(y,"$end",f=function(e){var r=this;return 0!==e&&r.$raise(b.get("ArgumentError"),"MatchData#end only supports 0th element"),r.begin+r.matches[e].length},f.$$arity=1),e.defn(y,"$captures",p=function(){var e=this;return e.matches.slice(1)},p.$$arity=0),e.defn(y,"$inspect",_=function(){for(var e=this,r="#<MatchData "+e.matches[0].$inspect(),t=1,n=e.matches.length;t<n;t++)r+=" "+t+":"+e.matches[t].$inspect();return r+">"},_.$$arity=0),e.defn(y,"$length",h=function(){var e=this;return e.matches.length},h.$$arity=0),e.alias(y,"size","length"),e.defn(y,"$to_a",d=function(){var e=this;return e.matches},d.$$arity=0),e.defn(y,"$to_s",g=function(){var e=this;return e.matches[0]},g.$$arity=0),e.defn(y,"$values_at",v=function(e){var r,n=this,$=arguments.length,a=$-0;a<0&&(a=0),r=new Array(a);for(var i=0;i<$;i++)r[i-0]=arguments[i];var o,l,s,u=[];for(o=0;o<r.length;o++)r[o].$$is_range&&(l=r[o].$to_a(),l.unshift(o,1),Array.prototype.splice.apply(r,l)),s=b.get("Opal")["$coerce_to!"](r[o],b.get("Integer"),"to_int"),s<0&&(s+=n.matches.length,s<0)?u.push(t):u.push(n.matches[s]);return u},v.$$arity=-1),t&&"values_at"}(r.base,null)},Opal.modules["corelib/string"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e/r:e["$/"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e+r:e["$+"](r)}var n=e.top,$=e,a=e.nil,i=(e.breaker,e.slice,e.klass),o=e.gvars;return e.add_stubs(["$require","$include","$coerce_to?","$coerce_to","$raise","$===","$format","$to_s","$respond_to?","$to_str","$<=>","$==","$=~","$new","$empty?","$ljust","$ceil","$/","$+","$rjust","$floor","$to_a","$each_char","$to_proc","$coerce_to!","$copy_singleton_methods","$initialize_clone","$initialize_dup","$enum_for","$size","$chomp","$[]","$to_i","$each_line","$class","$match","$captures","$proc","$shift","$__send__","$succ","$escape"]),n.$require("corelib/comparable"),n.$require("corelib/regexp"),function(n,$){function l(){}function s(e){function r(e){var r,t,n,$,a,i,o="",l=e.length;for(r=0;r<l;r++)if(t=e.charAt(r),"-"===t&&r>0&&r<l-1&&!n){for($=e.charCodeAt(r-1),a=e.charCodeAt(r+1),$>a&&Ee.$raise(Oe.get("ArgumentError"),'invalid range "'+$+"-"+a+'" in string transliteration'),i=$+1;i<a+1;i++)o+=String.fromCharCode(i);n=!0,r++}else n="\\"===t,o+=t;return o}function t(e,r){if(0===e.length)return r;var t,n,$="",a=e.length;for(t=0;t<a;t++)n=e.charAt(t),r.indexOf(n)!==-1&&($+=n);return $}var n,$,a,i,o,l,s="",u="";for(n=0,$=e.length;n<$;n++)a=Oe.get("Opal").$coerce_to(e[n],Oe.get("String"),"to_str"),i="^"===a.charAt(0)&&a.length>1,a=r(i?a.slice(1):a),i?u=t(u,a):s=t(s,a);if(s.length>0&&u.length>0){for(l="",n=0,$=s.length;n<$;n++)o=s.charAt(n),u.indexOf(o)===-1&&(l+=o);s=l,u=""}return s.length>0?"["+Oe.get("Regexp").$escape(s)+"]":u.length>0?"[^"+Oe.get("Regexp").$escape(u)+"]":null}var u,c,f,p,_,h,d,g,v,y,m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R,q,j,F,L,D,B,U,H,G,X,K,Y,V,J,W,Z,Q,ee,re,te,ne,$e,ae,ie,oe,le,se,ue,ce,fe,pe,_e,he,de,ge,ve,ye,me,be,Ee=l=i(n,$,"String",l),we=Ee.$$proto,Oe=Ee.$$scope;return we.length=a,Ee.$include(Oe.get("Comparable")),we.$$is_string=!0,e.defn(Ee,"$__id__",u=function(){var e=this;return e.toString()},u.$$arity=0),e.alias(Ee,"object_id","__id__"),e.defs(Ee,"$try_convert",c=function(e){return Oe.get("Opal")["$coerce_to?"](e,Oe.get("String"),"to_str")},c.$$arity=1),e.defs(Ee,"$new",f=function(e){return null==e&&(e=""),e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),new String(e)},f.$$arity=-1),e.defn(Ee,"$initialize",p=function(e){var r=this;return void 0===e?r:r.$raise(Oe.get("NotImplementedError"),"Mutable strings are not supported in Opal.")},p.$$arity=-1),e.defn(Ee,"$%",_=function(r){var t,n=this;return(t=Oe.get("Array")["$==="](r))===a||null==t||t.$$is_boolean&&1!=t?n.$format(n,r):(t=n).$format.apply(t,[n].concat(e.to_a(r)))},_.$$arity=1),e.defn(Ee,"$*",h=function(e){var r=this;if(e=Oe.get("Opal").$coerce_to(e,Oe.get("Integer"),"to_int"),e<0&&r.$raise(Oe.get("ArgumentError"),"negative argument"),0===e)return"";var t="",n=r.toString();for(n.length*e>=1<<28&&r.$raise(Oe.get("RangeError"),"multiply count must not overflow maximum string size");1===(1&e)&&(t+=n),e>>>=1,0!==e;)n+=n;return t},h.$$arity=1),e.defn(Ee,"$+",d=function(e){var r=this;return e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),r+e.$to_s()},d.$$arity=1),e.defn(Ee,"$<=>",g=function(e){var r,t=this;if((r=e["$respond_to?"]("to_str"))===a||null==r||r.$$is_boolean&&1!=r){var n=e["$<=>"](t);return n===a?a:n>0?-1:n<0?1:0}return e=e.$to_str().$to_s(),t>e?1:t<e?-1:0},g.$$arity=1),e.defn(Ee,"$==",v=function(e){var r=this;return e.$$is_string?r.toString()===e.toString():!!Oe.get("Opal")["$respond_to?"](e,"to_str")&&e["$=="](r)},v.$$arity=1),e.alias(Ee,"eql?","=="),e.alias(Ee,"===","=="),e.defn(Ee,"$=~",y=function(e){var r=this;return e.$$is_string&&r.$raise(Oe.get("TypeError"),"type mismatch: String given"),e["$=~"](r)},y.$$arity=1),e.defn(Ee,"$[]",m=function(e,r){var t,n=this,$=n.length;if(e.$$is_range)return t=e.exclude,r=Oe.get("Opal").$coerce_to(e.end,Oe.get("Integer"),"to_int"),e=Oe.get("Opal").$coerce_to(e.begin,Oe.get("Integer"),"to_int"),Math.abs(e)>$?a:(e<0&&(e+=$),r<0&&(r+=$),t||(r+=1),r-=e,r<0&&(r=0),n.substr(e,r));if(e.$$is_string)return null!=r&&n.$raise(Oe.get("TypeError")),n.indexOf(e)!==-1?e:a;if(e.$$is_regexp){var i=n.match(e);return null===i?(o["~"]=a,a):(o["~"]=Oe.get("MatchData").$new(e,i),null==r?i[0]:(r=Oe.get("Opal").$coerce_to(r,Oe.get("Integer"),"to_int"),r<0&&-r<i.length?i[r+=i.length]:r>=0&&r<i.length?i[r]:a))}return e=Oe.get("Opal").$coerce_to(e,Oe.get("Integer"),"to_int"),e<0&&(e+=$),null==r?e>=$||e<0?a:n.substr(e,1):(r=Oe.get("Opal").$coerce_to(r,Oe.get("Integer"),"to_int"),r<0?a:e>$||e<0?a:n.substr(e,r))},m.$$arity=-2),e.alias(Ee,"byteslice","[]"),e.defn(Ee,"$capitalize",b=function(){var e=this;return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},b.$$arity=0),e.defn(Ee,"$casecmp",E=function(e){var r=this;e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str").$to_s();var t=/^[\x00-\x7F]*$/;return t.test(r)&&t.test(e)&&(r=r.toLowerCase(),e=e.toLowerCase()),r["$<=>"](e)},E.$$arity=1),e.defn(Ee,"$center",w=function(e,n){var $,i=this;if(null==n&&(n=" "),e=Oe.get("Opal").$coerce_to(e,Oe.get("Integer"),"to_int"),n=Oe.get("Opal").$coerce_to(n,Oe.get("String"),"to_str").$to_s(),($=n["$empty?"]())===a||null==$||$.$$is_boolean&&1!=$||i.$raise(Oe.get("ArgumentError"),"zero width padding"),($=e<=i.length)!==a&&null!=$&&(!$.$$is_boolean||1==$))return i;var o=i.$ljust(r(t(e,i.length),2).$ceil(),n),l=i.$rjust(r(t(e,i.length),2).$floor(),n);return l+o.slice(i.length)},w.$$arity=-2),e.defn(Ee,"$chars",O=function(){var e,r,t=this,n=O.$$p,$=n||a;return O.$$p=null,$===!1||$===a||null==$?t.$each_char().$to_a():(e=(r=t).$each_char,e.$$p=$.$to_proc(),e).call(r)},O.$$arity=0),e.defn(Ee,"$chomp",A=function(e){var r,t=this;if(null==o["/"]&&(o["/"]=a),null==e&&(e=o["/"]),(r=e===a||0===t.length)!==a&&null!=r&&(!r.$$is_boolean||1==r))return t;if(e=Oe.get("Opal")["$coerce_to!"](e,Oe.get("String"),"to_str").$to_s(),"\n"===e)return t.replace(/\r?\n?$/,"");if(""===e)return t.replace(/(\r?\n)+$/,"");if(t.length>e.length){var n=t.substr(t.length-e.length,e.length);if(n===e)return t.substr(0,t.length-e.length)}return t},A.$$arity=-1),e.defn(Ee,"$chop",x=function(){var e=this,r=e.length;return r<=1?"":"\n"===e.charAt(r-1)&&"\r"===e.charAt(r-2)?e.substr(0,r-2):e.substr(0,r-1)},x.$$arity=0),e.defn(Ee,"$chr",T=function(){var e=this;return e.charAt(0)},T.$$arity=0),e.defn(Ee,"$clone",M=function(){var e=this,r=a;return r=e.slice(),r.$copy_singleton_methods(e),r.$initialize_clone(e),r},M.$$arity=0),e.defn(Ee,"$dup",P=function(){var e=this,r=a;return r=e.slice(),r.$initialize_dup(e),r},P.$$arity=0),e.defn(Ee,"$count",k=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];0===r.length&&t.$raise(Oe.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var i=s(r);return null===i?0:t.length-t.replace(new RegExp(i,"g"),"").length},k.$$arity=-1),e.defn(Ee,"$delete",I=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];0===r.length&&t.$raise(Oe.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var i=s(r);return null===i?t:t.replace(new RegExp(i,"g"),"")},I.$$arity=-1),e.defn(Ee,"$downcase",N=function(){var e=this;return e.toLowerCase()},N.$$arity=0),e.defn(Ee,"$each_char",S=function(){var r,t,n,$=this,i=S.$$p,o=i||a;if(S.$$p=null,o===a)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=$,n.$$arity=0,n),r).call(t,"each_char");for(var l=0,s=$.length;l<s;l++)e.yield1(o,$.charAt(l));return $},S.$$arity=0),e.defn(Ee,"$each_line",z=function(r){var t=this,n=z.$$p,$=n||a;if(null==o["/"]&&(o["/"]=a),null==r&&(r=o["/"]),z.$$p=null,$===a)return t.$enum_for("each_line",r);if(r===a)return e.yield1($,t),t;r=Oe.get("Opal").$coerce_to(r,Oe.get("String"),"to_str");var i,l,s,u,c,f,p;if(0===r.length){for(i=t.split(/(\n{2,})/),l=0,s=i.length;l<s;l+=2)(i[l]||i[l+1])&&e.yield1($,(i[l]||"")+(i[l+1]||""));return t}for(c=t.$chomp(r),f=t.length!=c.length,p=c.split(r),l=0,u=p.length;l<u;l++)l<u-1||f?e.yield1($,p[l]+r):e.yield1($,p[l]);return t},z.$$arity=-1),e.defn(Ee,"$empty?",C=function(){var e=this;return 0===e.length},C.$$arity=0),e.defn(Ee,"$end_with?",R=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=0,o=r.length;i<o;i++){var l=Oe.get("Opal").$coerce_to(r[i],Oe.get("String"),"to_str").$to_s();if(t.length>=l.length&&t.substr(t.length-l.length,l.length)==l)return!0}return!1},R.$$arity=-1),e.alias(Ee,"eql?","=="),e.alias(Ee,"equal?","==="),e.defn(Ee,"$gsub",q=function(e,r){var t=this,n=q.$$p,$=n||a;if(q.$$p=null,void 0===r&&$===a)return t.$enum_for("gsub",e);var i,l,s="",u=a,c=0;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if(i=e.exec(t),null===i){o["~"]=a,s+=t.slice(c);break}u=Oe.get("MatchData").$new(e,i),void 0===r?l=$(i[0]):r.$$is_hash?l=r["$[]"](i[0]).$to_s():(r.$$is_string||(r=Oe.get("Opal").$coerce_to(r,Oe.get("String"),"to_str")),l=r.replace(/([\\]+)([0-9+&`'])/g,function(e,r,n){if(r.length%2===0)return e;switch(n){case"+":for(var $=i.length-1;$>0;$--)if(void 0!==i[$])return r.slice(1)+i[$];return"";case"&":return r.slice(1)+i[0];case"`":return r.slice(1)+t.slice(0,i.index);case"'":return r.slice(1)+t.slice(i.index+i[0].length);default:return r.slice(1)+(i[n]||"")}}).replace(/\\\\/g,"\\")),e.lastIndex===i.index?(s+=l+t.slice(c,i.index+1),e.lastIndex+=1):s+=t.slice(c,i.index)+l,c=e.lastIndex}return o["~"]=u,s},q.$$arity=-2),e.defn(Ee,"$hash",j=function(){var e=this;return e.toString()},j.$$arity=0),e.defn(Ee,"$hex",F=function(){var e=this;return e.$to_i(16)},F.$$arity=0),e.defn(Ee,"$include?",L=function(e){var r=this;return e.$$is_string||(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str")),r.indexOf(e)!==-1},L.$$arity=1),e.defn(Ee,"$index",D=function(e,r){var t,n,$,i=this;if(void 0===r)r=0;else if(r=Oe.get("Opal").$coerce_to(r,Oe.get("Integer"),"to_int"),r<0&&(r+=i.length,r<0))return a;if(e.$$is_regexp)for($=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(n=$.exec(i),null===n){o["~"]=a,t=-1;break}if(n.index>=r){o["~"]=Oe.get("MatchData").$new($,n),t=n.index;break}$.lastIndex=n.index+1}else e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),t=0===e.length&&r>i.length?-1:i.indexOf(e,r);return t===-1?a:t},D.$$arity=-2),e.defn(Ee,"$inspect",B=function(){var e=this,r=/[\\\"\x00-\x1f\x7f-\x9f\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t={"":"\\a","":"\\e","\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},n=e.replace(r,function(e){return t[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16).toUpperCase()).slice(-4)});return'"'+n.replace(/\#[\$\@\{]/g,"\\$&")+'"'},B.$$arity=0),e.defn(Ee,"$intern",U=function(){var e=this;return e},U.$$arity=0),e.defn(Ee,"$lines",H=function(e){var r,t,n=this,$=H.$$p,i=$||a,l=a;return null==o["/"]&&(o["/"]=a),null==e&&(e=o["/"]),H.$$p=null,l=(r=(t=n).$each_line,r.$$p=i.$to_proc(),r).call(t,e),i!==!1&&i!==a&&null!=i?n:l.$to_a()},H.$$arity=-1),e.defn(Ee,"$length",G=function(){var e=this;return e.length},G.$$arity=0),e.defn(Ee,"$ljust",X=function(e,r){var t,n=this;if(null==r&&(r=" "),e=Oe.get("Opal").$coerce_to(e,Oe.get("Integer"),"to_int"),r=Oe.get("Opal").$coerce_to(r,Oe.get("String"),"to_str").$to_s(),(t=r["$empty?"]())===a||null==t||t.$$is_boolean&&1!=t||n.$raise(Oe.get("ArgumentError"),"zero width padding"),(t=e<=n.length)!==a&&null!=t&&(!t.$$is_boolean||1==t))return n;var $=-1,i="";for(e-=n.length;++$<e;)i+=r;return n+i.slice(0,e)},X.$$arity=-2),e.defn(Ee,"$lstrip",K=function(){var e=this;return e.replace(/^\s*/,"")},K.$$arity=0),e.defn(Ee,"$match",Y=function(e,r){var t,n,$=this,i=Y.$$p,o=i||a;return Y.$$p=null,(t=(n=Oe.get("String")["$==="](e))!==!1&&n!==a&&null!=n?n:e["$respond_to?"]("to_str"))===a||null==t||t.$$is_boolean&&1!=t||(e=Oe.get("Regexp").$new(e.$to_str())),((t=Oe.get("Regexp")["$==="](e))===a||null==t||t.$$is_boolean&&1!=t)&&$.$raise(Oe.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)"),(t=(n=e).$match,t.$$p=o.$to_proc(),t).call(n,$,r)},Y.$$arity=-2),e.defn(Ee,"$next",V=function(){var e=this,r=e.length;if(0===r)return"";for(var t,n=e,$=e.search(/[a-zA-Z0-9]/),a=!1;r--;){if(t=e.charCodeAt(r),t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)switch(t){case 57:a=!0,t=48;break;case 90:a=!0,t=65;break;case 122:a=!0,t=97;break;default:a=!1,t+=1}else $===-1?255===t?(a=!0,t=0):(a=!1,t+=1):a=!0;if(n=n.slice(0,r)+String.fromCharCode(t)+n.slice(r+1),a&&(0===r||r===$)){switch(t){case 65:break;case 97:break;default:t+=1}n=0===r?String.fromCharCode(t)+n:n.slice(0,r)+String.fromCharCode(t)+n.slice(r),a=!1}if(!a)break}return n},V.$$arity=0),e.defn(Ee,"$oct",J=function(){var e,r=this,t=r,n=8;return/^\s*_/.test(t)?0:(t=t.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(e,r,t,$){switch($.charAt(0)){case"+":case"-":return e;case"0":if("x"===$.charAt(1)&&"0x"===t)return e}switch(t){case"0b":n=2;break;case"0":case"0o":n=8;break;case"0d":n=10;break;case"0x":n=16}return r+$}),e=parseInt(t.replace(/_(?!_)/g,""),n),isNaN(e)?0:e)},J.$$arity=0),e.defn(Ee,"$ord",W=function(){var e=this;return e.charCodeAt(0)},W.$$arity=0),e.defn(Ee,"$partition",Z=function(e){var r,t,n=this;return e.$$is_regexp?(t=e.exec(n),null===t?r=-1:(Oe.get("MatchData").$new(e,t),e=t[0],
r=t.index)):(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),r=n.indexOf(e)),r===-1?[n,"",""]:[n.slice(0,r),n.slice(r,r+e.length),n.slice(r+e.length)]},Z.$$arity=1),e.defn(Ee,"$reverse",Q=function(){var e=this;return e.split("").reverse().join("")},Q.$$arity=0),e.defn(Ee,"$rindex",ee=function(e,r){var t,n,$,i,l=this;if(void 0===r)r=l.length;else if(r=Oe.get("Opal").$coerce_to(r,Oe.get("Integer"),"to_int"),r<0&&(r+=l.length,r<0))return a;if(e.$$is_regexp){for(n=null,$=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(i=$.exec(l),null===i||i.index>r)break;n=i,$.lastIndex=n.index+1}null===n?(o["~"]=a,t=-1):(Oe.get("MatchData").$new($,n),t=n.index)}else e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),t=l.lastIndexOf(e,r);return t===-1?a:t},ee.$$arity=-2),e.defn(Ee,"$rjust",re=function(e,r){var t,n=this;if(null==r&&(r=" "),e=Oe.get("Opal").$coerce_to(e,Oe.get("Integer"),"to_int"),r=Oe.get("Opal").$coerce_to(r,Oe.get("String"),"to_str").$to_s(),(t=r["$empty?"]())===a||null==t||t.$$is_boolean&&1!=t||n.$raise(Oe.get("ArgumentError"),"zero width padding"),(t=e<=n.length)!==a&&null!=t&&(!t.$$is_boolean||1==t))return n;var $=Math.floor(e-n.length),i=Math.floor($/r.length),o=Array(i+1).join(r),l=$-o.length;return o+r.slice(0,l)+n},re.$$arity=-2),e.defn(Ee,"$rpartition",te=function(e){var r,t,n,$,a=this;if(e.$$is_regexp){for(t=null,n=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if($=n.exec(a),null===$)break;t=$,n.lastIndex=t.index+1}null===t?r=-1:(Oe.get("MatchData").$new(n,t),e=t[0],r=t.index)}else e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),r=a.lastIndexOf(e);return r===-1?["","",a]:[a.slice(0,r),a.slice(r,r+e.length),a.slice(r+e.length)]},te.$$arity=1),e.defn(Ee,"$rstrip",ne=function(){var e=this;return e.replace(/[\s\u0000]*$/,"")},ne.$$arity=0),e.defn(Ee,"$scan",$e=function(e){var r=this,t=$e.$$p,n=t||a;$e.$$p=null;var $,i=[],l=a;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=($=e.exec(r));)l=Oe.get("MatchData").$new(e,$),n===a?1==$.length?i.push($[0]):i.push(l.$captures()):1==$.length?n($[0]):n.call(r,l.$captures()),e.lastIndex===$.index&&(e.lastIndex+=1);return o["~"]=l,n!==a?r:i},$e.$$arity=1),e.alias(Ee,"size","length"),e.alias(Ee,"slice","[]"),e.defn(Ee,"$split",ae=function(e,r){var t,n=this;if(null==o[";"]&&(o[";"]=a),0===n.length)return[];if(void 0===r)r=0;else if(r=Oe.get("Opal")["$coerce_to!"](r,Oe.get("Integer"),"to_int"),1===r)return[n];void 0!==e&&e!==a||(e=(t=o[";"])!==!1&&t!==a&&null!=t?t:" ");var $,i,l=[],s=n.toString(),u=0;if(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str").$to_s()," "===e?(e=/\s+/gm,s=s.replace(/^\s+/,"")):e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm")),l=s.split(e),1===l.length&&l[0]===s)return l;for(;(i=l.indexOf(void 0))!==-1;)l.splice(i,1);if(0===r){for(;""===l[l.length-1];)l.length-=1;return l}if($=e.exec(s),r<0){if(null!==$&&""===$[0]&&e.source.indexOf("(?=")===-1)for(i=0;i<$.length;i++)l.push("");return l}if(null!==$&&""===$[0])return l.splice(r-1,l.length-1,l.slice(r-1).join("")),l;if(r>=l.length)return l;for(i=0;null!==$&&(i++,u=e.lastIndex,i+1!==r);)$=e.exec(s);return l.splice(r-1,l.length-1,s.slice(u)),l},ae.$$arity=-1),e.defn(Ee,"$squeeze",ie=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];if(0===r.length)return t.replace(/(.)\1+/g,"$1");var i=s(r);return null===i?t:t.replace(new RegExp("("+i+")\\1+","g"),"$1")},ie.$$arity=-1),e.defn(Ee,"$start_with?",oe=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=0,o=r.length;i<o;i++){var l=Oe.get("Opal").$coerce_to(r[i],Oe.get("String"),"to_str").$to_s();if(0===t.indexOf(l))return!0}return!1},oe.$$arity=-1),e.defn(Ee,"$strip",le=function(){var e=this;return e.replace(/^\s*/,"").replace(/[\s\u0000]*$/,"")},le.$$arity=0),e.defn(Ee,"$sub",se=function(e,r){var t=this,n=se.$$p,$=n||a;se.$$p=null,e.$$is_regexp||(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var i=e.exec(t);return null===i?(o["~"]=a,t.toString()):(Oe.get("MatchData").$new(e,i),void 0===r?($===a&&t.$raise(Oe.get("ArgumentError"),"wrong number of arguments (1 for 2)"),t.slice(0,i.index)+$(i[0])+t.slice(i.index+i[0].length)):r.$$is_hash?t.slice(0,i.index)+r["$[]"](i[0]).$to_s()+t.slice(i.index+i[0].length):(r=Oe.get("Opal").$coerce_to(r,Oe.get("String"),"to_str"),r=r.replace(/([\\]+)([0-9+&`'])/g,function(e,r,n){if(r.length%2===0)return e;switch(n){case"+":for(var $=i.length-1;$>0;$--)if(void 0!==i[$])return r.slice(1)+i[$];return"";case"&":return r.slice(1)+i[0];case"`":return r.slice(1)+t.slice(0,i.index);case"'":return r.slice(1)+t.slice(i.index+i[0].length);default:return r.slice(1)+(i[n]||"")}}).replace(/\\\\/g,"\\"),t.slice(0,i.index)+r+t.slice(i.index+i[0].length)))},se.$$arity=-2),e.alias(Ee,"succ","next"),e.defn(Ee,"$sum",ue=function(e){var r=this;null==e&&(e=16),e=Oe.get("Opal").$coerce_to(e,Oe.get("Integer"),"to_int");for(var t=0,n=r.length,$=0;$<n;$++)t+=r.charCodeAt($);return e<=0?t:t&Math.pow(2,e)-1},ue.$$arity=-1),e.defn(Ee,"$swapcase",ce=function(){var e=this,r=e.replace(/([a-z]+)|([A-Z]+)/g,function(e,r,t){return r?e.toUpperCase():e.toLowerCase()});return e.constructor===String?r:e.$class().$new(r)},ce.$$arity=0),e.defn(Ee,"$to_f",fe=function(){var e=this;if("_"===e.charAt(0))return 0;var r=parseFloat(e.replace(/_/g,""));return isNaN(r)||r==1/0||r==-(1/0)?0:r},fe.$$arity=0),e.defn(Ee,"$to_i",pe=function(e){var r=this;null==e&&(e=10);var t,n=r.toLowerCase(),$=Oe.get("Opal").$coerce_to(e,Oe.get("Integer"),"to_int");return(1===$||$<0||$>36)&&r.$raise(Oe.get("ArgumentError"),"invalid radix "+$),/^\s*_/.test(n)?0:(n=n.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(e,r,t,n){switch(n.charAt(0)){case"+":case"-":return e;case"0":if("x"===n.charAt(1)&&"0x"===t&&(0===$||16===$))return e}switch(t){case"0b":if(0===$||2===$)return $=2,r+n;break;case"0":case"0o":if(0===$||8===$)return $=8,r+n;break;case"0d":if(0===$||10===$)return $=10,r+n;break;case"0x":if(0===$||16===$)return $=16,r+n}return e}),t=parseInt(n.replace(/_(?!_)/g,""),$),isNaN(t)?0:t)},pe.$$arity=-1),e.defn(Ee,"$to_proc",_e=function(){var r,t,n,$=this,i=a;return i=$,(r=(t=$).$proc,r.$$p=(n=function(r){var t,$,o,l,s=n.$$s||this,u=a;t=n.$$p||a,n.$$p=null;var c=arguments.length,f=c-0;f<0&&(f=0),$=new Array(f);for(var p=0;p<c;p++)$[p-0]=arguments[p];return(o=$["$empty?"]())===a||null==o||o.$$is_boolean&&1!=o||s.$raise(Oe.get("ArgumentError"),"no receiver given"),u=$.$shift(),(o=(l=u).$__send__,o.$$p=t.$to_proc(),o).apply(l,[i].concat(e.to_a($)))},n.$$s=$,n.$$arity=-1,n),r).call(t)},_e.$$arity=0),e.defn(Ee,"$to_s",he=function(){var e=this;return e.toString()},he.$$arity=0),e.alias(Ee,"to_str","to_s"),e.alias(Ee,"to_sym","intern"),e.defn(Ee,"$tr",de=function(e,r){var t=this;if(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str").$to_s(),r=Oe.get("Opal").$coerce_to(r,Oe.get("String"),"to_str").$to_s(),0==e.length||e===r)return t;var n,$,a,i,o,l,s,u={},c=e.split(""),f=c.length,p=r.split(""),_=p.length,h=!1,d=null;"^"===c[0]&&c.length>1&&(h=!0,c.shift(),d=p[_-1],f-=1);var g=[],v=null;for($=!1,n=0;n<f;n++)if(i=c[n],null==v)v=i,g.push(i);else if("-"===i)"-"===v?(g.push("-"),g.push("-")):n==f-1?g.push("-"):$=!0;else if($){for(o=v.charCodeAt(0),l=i.charCodeAt(0),o>l&&t.$raise(Oe.get("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(l)+'" in string transliteration'),a=o+1;a<l;a++)g.push(String.fromCharCode(a));g.push(i),$=null,v=null}else g.push(i);if(c=g,f=c.length,h)for(n=0;n<f;n++)u[c[n]]=!0;else{if(_>0){var y=[],m=null;for($=!1,n=0;n<_;n++)if(i=p[n],null==m)m=i,y.push(i);else if("-"===i)"-"===m?(y.push("-"),y.push("-")):n==_-1?y.push("-"):$=!0;else if($){for(o=m.charCodeAt(0),l=i.charCodeAt(0),o>l&&t.$raise(Oe.get("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(l)+'" in string transliteration'),a=o+1;a<l;a++)y.push(String.fromCharCode(a));y.push(i),$=null,m=null}else y.push(i);p=y,_=p.length}var b=f-_;if(b>0){var E=_>0?p[_-1]:"";for(n=0;n<b;n++)p.push(E)}for(n=0;n<f;n++)u[c[n]]=p[n]}var w="";for(n=0,s=t.length;n<s;n++){i=t.charAt(n);var O=u[i];w+=h?null==O?d:i:null!=O?O:i}return w},de.$$arity=2),e.defn(Ee,"$tr_s",ge=function(e,r){var t=this;if(e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str").$to_s(),r=Oe.get("Opal").$coerce_to(r,Oe.get("String"),"to_str").$to_s(),0==e.length)return t;var n,$,a,i,o,l,s,u={},c=e.split(""),f=c.length,p=r.split(""),_=p.length,h=!1,d=null;"^"===c[0]&&c.length>1&&(h=!0,c.shift(),d=p[_-1],f-=1);var g=[],v=null;for($=!1,n=0;n<f;n++)if(i=c[n],null==v)v=i,g.push(i);else if("-"===i)"-"===v?(g.push("-"),g.push("-")):n==f-1?g.push("-"):$=!0;else if($){for(o=v.charCodeAt(0),l=i.charCodeAt(0),o>l&&t.$raise(Oe.get("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(l)+'" in string transliteration'),a=o+1;a<l;a++)g.push(String.fromCharCode(a));g.push(i),$=null,v=null}else g.push(i);if(c=g,f=c.length,h)for(n=0;n<f;n++)u[c[n]]=!0;else{if(_>0){var y=[],m=null;for($=!1,n=0;n<_;n++)if(i=p[n],null==v)v=i,y.push(i);else if("-"===i)"-"===m?(y.push("-"),y.push("-")):n==_-1?y.push("-"):$=!0;else if($){for(o=v.charCodeAt(0),l=i.charCodeAt(0),o>l&&t.$raise(Oe.get("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(l)+'" in string transliteration'),a=o+1;a<l;a++)y.push(String.fromCharCode(a));y.push(i),$=null,v=null}else y.push(i);p=y,_=p.length}var b=f-_;if(b>0){var E=_>0?p[_-1]:"";for(n=0;n<b;n++)p.push(E)}for(n=0;n<f;n++)u[c[n]]=p[n]}var w="",O=null;for(n=0,s=t.length;n<s;n++){i=t.charAt(n);var A=u[i];h?null==A?null==O&&(w+=d,O=!0):(w+=i,O=null):null!=A?null!=O&&O===A||(w+=A,O=A):(w+=i,O=null)}return w},ge.$$arity=2),e.defn(Ee,"$upcase",ve=function(){var e=this;return e.toUpperCase()},ve.$$arity=0),e.defn(Ee,"$upto",ye=function(e,r){var t=this,n=ye.$$p,$=n||a;if(null==r&&(r=!1),ye.$$p=null,$===a)return t.$enum_for("upto",e,r);e=Oe.get("Opal").$coerce_to(e,Oe.get("String"),"to_str");var i,o,l=t.toString();if(1===l.length&&1===e.length)for(i=l.charCodeAt(0),o=e.charCodeAt(0);i<=o&&(!r||i!==o);)$(String.fromCharCode(i)),i+=1;else if(parseInt(l,10).toString()===l&&parseInt(e,10).toString()===e)for(i=parseInt(l,10),o=parseInt(e,10);i<=o&&(!r||i!==o);)$(i.toString()),i+=1;else for(;l.length<=e.length&&l<=e&&(!r||l!==e);)$(l),l=l.$succ();return t},ye.$$arity=-2),e.defn(Ee,"$instance_variables",me=function(){return[]},me.$$arity=0),e.defs(Ee,"$_load",be=function(r){var t,n,$=this,a=arguments.length,i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return(t=$).$new.apply(t,e.to_a(n))},be.$$arity=-1),a&&"_load"}($.base,String),e.cdecl($,"Symbol",$.get("String"))},Opal.modules["corelib/enumerable"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e*r:e["$*"](r)}function n(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}function $(e,r){return"number"==typeof e&&"number"==typeof r?e+r:e["$+"](r)}function a(e,r){return"number"==typeof e&&"number"==typeof r?e-r:e["$-"](r)}function i(e,r){return"number"==typeof e&&"number"==typeof r?e/r:e["$/"](r)}var o=(e.top,e),l=e.nil,s=(e.breaker,e.slice,e.module);return e.add_stubs(["$each","$destructure","$raise","$new","$yield","$dup","$enum_for","$enumerator_size","$flatten","$map","$proc","$==","$nil?","$respond_to?","$coerce_to!","$>","$*","$coerce_to","$try_convert","$<","$+","$-","$to_enum","$ceil","$/","$size","$===","$<<","$[]","$[]=","$inspect","$__send__","$<=>","$first","$reverse","$sort","$to_proc","$compare","$call","$to_a","$lambda","$sort!","$map!","$zip"]),function(o){var u,c,f,p,_,h,d,g,v,y,m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R,q,j,F,L,D,B,U,H,G,X,K,Y,V,J,W,Z,Q=u=s(o,"Enumerable"),ee=(Q.$$proto,Q.$$scope);e.defn(Q,"$all?",c=function(){try{var r,t,n,$,a,i=this,o=c.$$p,s=o||l;return c.$$p=null,s!==l?(r=(t=i).$each,r.$$p=(n=function(r){var t,$,a=(n.$$s||this,arguments.length),i=a-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<a;o++)t[o-0]=arguments[o];return($=e.yieldX(s,e.to_a(t)))===l||null==$||$.$$is_boolean&&1!=$?void e.ret(!1):l},n.$$s=i,n.$$arity=-1,n),r).call(t):(r=($=i).$each,r.$$p=(a=function(r){var t,n,$=(a.$$s||this,arguments.length),i=$-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<$;o++)t[o-0]=arguments[o];return(n=ee.get("Opal").$destructure(t))===l||null==n||n.$$is_boolean&&1!=n?void e.ret(!1):l},a.$$s=i,a.$$arity=-1,a),r).call($),!0}catch(r){if(r===e.returner)return r.$v;throw r}},c.$$arity=0),e.defn(Q,"$any?",f=function(){try{var r,t,n,$,a,i=this,o=f.$$p,s=o||l;return f.$$p=null,s!==l?(r=(t=i).$each,r.$$p=(n=function(r){var t,$,a=(n.$$s||this,arguments.length),i=a-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<a;o++)t[o-0]=arguments[o];return($=e.yieldX(s,e.to_a(t)))===l||null==$||$.$$is_boolean&&1!=$?l:void e.ret(!0)},n.$$s=i,n.$$arity=-1,n),r).call(t):(r=($=i).$each,r.$$p=(a=function(r){var t,n,$=(a.$$s||this,arguments.length),i=$-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<$;o++)t[o-0]=arguments[o];return(n=ee.get("Opal").$destructure(t))===l||null==n||n.$$is_boolean&&1!=n?l:void e.ret(!0)},a.$$s=i,a.$$arity=-1,a),r).call($),!1}catch(r){if(r===e.returner)return r.$v;throw r}},f.$$arity=0),e.defn(Q,"$chunk",p=function(r){var t,n,$,a=this,i=p.$$p,o=i||l;return p.$$p=null,o!==!1&&o!==l&&null!=o||ee.get("Kernel").$raise(ee.get("ArgumentError"),"no block given"),(t=(n=e.get("Enumerator")).$new,t.$$p=($=function(t){function n(){p.length>0&&t.$yield(f,p)}var a,i,s,u=$.$$s||this;null==t&&(t=l);var c,f=l,p=[];c=void 0==r||r===l?o:(a=(i=ee.get("Proc")).$new,a.$$p=(s=function(e){s.$$s||this;return null==e&&(e=l),o.$yield(e,r.$dup())},s.$$s=u,s.$$arity=1,s),a).call(i),u.$each.$$p=function(r){var t=e.yield1(c,r);t===l?(n(),p=[],f=l):(f===l||f===t?p.push(r):(n(),p=[r]),f=t)},u.$each(),n()},$.$$s=a,$.$$arity=1,$),t).call(n)},p.$$arity=-1),e.defn(Q,"$collect",_=function(){var r,t,n,$=this,a=_.$$p,i=a||l;if(_.$$p=null,i===l)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"collect");var o=[];return $.$each.$$p=function(){var r=e.yieldX(i,arguments);o.push(r)},$.$each(),o},_.$$arity=0),e.defn(Q,"$collect_concat",h=function(){var r,t,n,$,a,i=this,o=h.$$p,s=o||l;return h.$$p=null,s===l?(r=(t=i).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=i,n.$$arity=0,n),r).call(t,"collect_concat"):(r=($=i).$map,r.$$p=(a=function(r){a.$$s||this;return null==r&&(r=l),e.yield1(s,r)},a.$$s=i,a.$$arity=1,a),r).call($).$flatten(1)},h.$$arity=0),e.defn(Q,"$count",d=function(r){var t,n,$,a,i,o,s,u=this,c=d.$$p,f=c||l,p=l;return d.$$p=null,p=0,(t=null!=r)===l||null==t||t.$$is_boolean&&1!=t?(t=f["$nil?"]())===l||null==t||t.$$is_boolean&&1!=t||(f=(t=(a=u).$proc,t.$$p=(i=function(){i.$$s||this;return!0},i.$$s=u,i.$$arity=0,i),t).call(a)):f=(t=(n=u).$proc,t.$$p=($=function(e){var t,n=($.$$s||this,arguments.length),a=n-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<n;i++)t[i-0]=arguments[i];return ee.get("Opal").$destructure(t)["$=="](r)},$.$$s=u,$.$$arity=-1,$),t).call(n),(t=(o=u).$each,t.$$p=(s=function(r){var t,n,$=(s.$$s||this,arguments.length),a=$-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<$;i++)t[i-0]=arguments[i];return(n=e.yieldX(f,t))===l||null==n||n.$$is_boolean&&1!=n?l:p++},s.$$s=u,s.$$arity=-1,s),t).call(o),p},d.$$arity=-1),e.defn(Q,"$cycle",g=function(n){var $,a,i,o=this,s=g.$$p,u=s||l;if(null==n&&(n=l),g.$$p=null,u===l)return($=(a=o).$enum_for,$.$$p=(i=function(){var e,$=i.$$s||this;return n["$=="](l)?(e=$["$respond_to?"]("size"))===l||null==e||e.$$is_boolean&&1!=e?l:ee.get("Float").$$scope.get("INFINITY"):(n=ee.get("Opal")["$coerce_to!"](n,ee.get("Integer"),"to_int"),(e=r(n,0))===l||null==e||e.$$is_boolean&&1!=e?0:t($.$enumerator_size(),n))},i.$$s=o,i.$$arity=0,i),$).call(a,"cycle",n);if(($=n["$nil?"]())===l||null==$||$.$$is_boolean&&1!=$){if(n=ee.get("Opal")["$coerce_to!"](n,ee.get("Integer"),"to_int"),($=n<=0)!==l&&null!=$&&(!$.$$is_boolean||1==$))return l}else;var c,f,p,_,h=[];if(o.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments);e.yield1(u,r);h.push(r)},o.$each(),void 0!==c)return c;if(0===h.length)return l;if(n===l)for(;;)for(f=0,p=h.length;f<p;f++)_=e.yield1(u,h[f]);else for(;n>1;){for(f=0,p=h.length;f<p;f++)_=e.yield1(u,h[f]);n--}},g.$$arity=-1),e.defn(Q,"$detect",v=function(r){try{var t,n,$,a=this,i=v.$$p,o=i||l;return v.$$p=null,o===l?a.$enum_for("detect",r):((t=(n=a).$each,t.$$p=($=function(r){var t,n,a=($.$$s||this,l),i=arguments.length,s=i-0;s<0&&(s=0),t=new Array(s);for(var u=0;u<i;u++)t[u-0]=arguments[u];return a=ee.get("Opal").$destructure(t),(n=e.yield1(o,a))===l||null==n||n.$$is_boolean&&1!=n?l:void e.ret(a)},$.$$s=a,$.$$arity=-1,$),t).call(n),void 0!==r?"function"==typeof r?r():r:l)}catch(r){if(r===e.returner)return r.$v;throw r}},v.$$arity=-1),e.defn(Q,"$drop",y=function(e){var r,t=this;e=ee.get("Opal").$coerce_to(e,ee.get("Integer"),"to_int"),(r=e<0)===l||null==r||r.$$is_boolean&&1!=r||t.$raise(ee.get("ArgumentError"),"attempt to drop negative size");var n=[],$=0;return t.$each.$$p=function(){e<=$&&n.push(ee.get("Opal").$destructure(arguments)),$++},t.$each(),n},y.$$arity=1),e.defn(Q,"$drop_while",m=function(){var r,t=this,n=m.$$p,$=n||l;if(m.$$p=null,$===l)return t.$enum_for("drop_while");var a=[],i=!0;return t.$each.$$p=function(){var t=ee.get("Opal").$destructure(arguments);if(i){var n=e.yield1($,t);((r=n)===l||null==r||r.$$is_boolean&&0==r)&&(i=!1,a.push(t))}else a.push(t)},t.$each(),a},m.$$arity=0),e.defn(Q,"$each_cons",b=function(r){var t,i,o,s=this,u=b.$$p,c=u||l;if(b.$$p=null,(t=1!=arguments.length)===l||null==t||t.$$is_boolean&&1!=t||s.$raise(ee.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),r=ee.get("Opal").$try_convert(r,ee.get("Integer"),"to_int"),(t=r<=0)===l||null==t||t.$$is_boolean&&1!=t||s.$raise(ee.get("ArgumentError"),"invalid size"),c===l)return(t=(i=s).$enum_for,t.$$p=(o=function(){var e,t,i=o.$$s||this,s=l;return s=i.$enumerator_size(),(e=s["$nil?"]())===l||null==e||e.$$is_boolean&&1!=e?(e=(t=s["$=="](0))!==!1&&t!==l&&null!=t?t:n(s,r))===l||null==e||e.$$is_boolean&&1!=e?$(a(s,r),1):0:l},o.$$s=s,o.$$arity=0,o),t).call(i,"each_cons",r);var f=[],p=l;return s.$each.$$p=function(){var t=ee.get("Opal").$destructure(arguments);f.push(t),f.length>r&&f.shift(),f.length==r&&e.yield1(c,f.slice(0,r))},s.$each(),p},b.$$arity=1),e.defn(Q,"$each_entry",E=function(r){var t,n,$,a,i=this,o=E.$$p,s=o||l,u=arguments.length,c=u-0;c<0&&(c=0),a=new Array(c);for(var f=0;f<u;f++)a[f-0]=arguments[f];return E.$$p=null,s===l?(t=(n=i).$to_enum,t.$$p=($=function(){var e=$.$$s||this;return e.$enumerator_size()},$.$$s=i,$.$$arity=0,$),t).apply(n,["each_entry"].concat(e.to_a(a))):(i.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments);e.yield1(s,r)},i.$each.apply(i,a),i)},E.$$arity=-1),e.defn(Q,"$each_slice",w=function(r){var t,n,$,a=this,o=w.$$p,s=o||l;if(w.$$p=null,r=ee.get("Opal").$coerce_to(r,ee.get("Integer"),"to_int"),(t=r<=0)===l||null==t||t.$$is_boolean&&1!=t||a.$raise(ee.get("ArgumentError"),"invalid slice size"),s===l)return(t=(n=a).$enum_for,t.$$p=($=function(){var e,t=$.$$s||this;return(e=t["$respond_to?"]("size"))===l||null==e||e.$$is_boolean&&1!=e?l:i(t.$size(),r).$ceil()},$.$$s=a,$.$$arity=0,$),t).call(n,"each_slice",r);var u,c=[];return a.$each.$$p=function(){var t=ee.get("Opal").$destructure(arguments);c.push(t),c.length===r&&(e.yield1(s,c),c=[])},a.$each(),void 0!==u?u:(c.length>0&&e.yield1(s,c),l)},w.$$arity=1),e.defn(Q,"$each_with_index",O=function(r){var t,n,$,a,i=this,o=O.$$p,s=o||l,u=arguments.length,c=u-0;c<0&&(c=0),a=new Array(c);for(var f=0;f<u;f++)a[f-0]=arguments[f];if(O.$$p=null,s===l)return(t=(n=i).$enum_for,t.$$p=($=function(){var e=$.$$s||this;return e.$enumerator_size()},$.$$s=i,$.$$arity=0,$),t).apply(n,["each_with_index"].concat(e.to_a(a)));var p,_=0;return i.$each.$$p=function(){var e=ee.get("Opal").$destructure(arguments);s(e,_),_++},i.$each.apply(i,a),void 0!==p?p:i},O.$$arity=-1),e.defn(Q,"$each_with_object",A=function(e){var r,t,n,$=this,a=A.$$p,i=a||l;if(A.$$p=null,i===l)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"each_with_object",e);var o;return $.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments);i(r,e)},$.$each(),void 0!==o?o:e},A.$$arity=1),e.defn(Q,"$entries",x=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];var i=[];return t.$each.$$p=function(){i.push(ee.get("Opal").$destructure(arguments))},t.$each.apply(t,r),i},x.$$arity=-1),e.alias(Q,"find","detect"),e.defn(Q,"$find_all",T=function(){var r,t,n,$=this,a=T.$$p,i=a||l;if(T.$$p=null,i===l)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"find_all");var o=[];return $.$each.$$p=function(){var t=ee.get("Opal").$destructure(arguments),n=e.yield1(i,t);(r=n)===l||null==r||r.$$is_boolean&&1!=r||o.push(t)},$.$each(),o},T.$$arity=0),e.defn(Q,"$find_index",M=function(r){try{var t,n,$,a,i,o=this,s=M.$$p,u=s||l,c=l;return M.$$p=null,(t=void 0===r&&u===l)===l||null==t||t.$$is_boolean&&1!=t?(c=0,(t=null!=r)===l||null==t||t.$$is_boolean&&1!=t?(t=(a=o).$each,t.$$p=(i=function(r){var t,n,$=(i.$$s||this,arguments.length),a=$-0;a<0&&(a=0),t=new Array(a);for(var o=0;o<$;o++)t[o-0]=arguments[o];return(n=e.yieldX(u,e.to_a(t)))===l||null==n||n.$$is_boolean&&1!=n||e.ret(c),c+=1},i.$$s=o,i.$$arity=-1,i),t).call(a):(t=(n=o).$each,t.$$p=($=function(t){var n,a=($.$$s||this,arguments.length),i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return ee.get("Opal").$destructure(n)["$=="](r)&&e.ret(c),c+=1},$.$$s=o,$.$$arity=-1,$),t).call(n),l):o.$enum_for("find_index")}catch(r){if(r===e.returner)return r.$v;throw r}},M.$$arity=-1),e.defn(Q,"$first",P=function(r){try{var t,n,$,a,i,o=this,s=l,u=l;return(t=void 0===r)===l||null==t||t.$$is_boolean&&1!=t?(s=[],r=ee.get("Opal").$coerce_to(r,ee.get("Integer"),"to_int"),(t=r<0)===l||null==t||t.$$is_boolean&&1!=t||o.$raise(ee.get("ArgumentError"),"attempt to take negative size"),(t=0==r)===l||null==t||t.$$is_boolean&&1!=t?(u=0,(t=(a=o).$each,t.$$p=(i=function(t){var n,$,a=(i.$$s||this,arguments.length),o=a-0;o<0&&(o=0),n=new Array(o);for(var c=0;c<a;c++)n[c-0]=arguments[c];return s.push(ee.get("Opal").$destructure(n)),($=r<=++u)===l||null==$||$.$$is_boolean&&1!=$?l:void e.ret(s)},i.$$s=o,i.$$arity=-1,i),t).call(a),s):[]):(t=(n=o).$each,t.$$p=($=function(r){$.$$s||this;null==r&&(r=l),e.ret(r)},$.$$s=o,$.$$arity=1,$),t).call(n)}catch(r){if(r===e.returner)return r.$v;throw r}},P.$$arity=-1),e.alias(Q,"flat_map","collect_concat"),e.defn(Q,"$grep",k=function(r){var t,n=this,$=k.$$p,a=$||l;k.$$p=null;var i=[];return a!==l?n.$each.$$p=function(){var n=ee.get("Opal").$destructure(arguments),$=r["$==="](n);(t=$)===l||null==t||t.$$is_boolean&&1!=t||($=e.yield1(a,n),i.push($))}:n.$each.$$p=function(){var e=ee.get("Opal").$destructure(arguments),n=r["$==="](e);(t=n)===l||null==t||t.$$is_boolean&&1!=t||i.push(e)},n.$each(),i},k.$$arity=1),e.defn(Q,"$group_by",I=function(){var r,t,n,$,a,i=this,o=I.$$p,s=o||l,u=l;if(I.$$p=null,s===l)return(r=(t=i).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=i,n.$$arity=0,n),r).call(t,"group_by");u=ee.get("Hash").$new();var c;return i.$each.$$p=function(){var t=ee.get("Opal").$destructure(arguments),n=e.yield1(s,t);(r=n,$=u,(a=$["$[]"](r))!==!1&&a!==l&&null!=a?a:$["$[]="](r,[]))["$<<"](t)},i.$each(),void 0!==c?c:u},I.$$arity=0),e.defn(Q,"$include?",N=function(r){try{var t,n,$,a=this;return(t=(n=a).$each,t.$$p=($=function(t){var n,a=($.$$s||this,arguments.length),i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return ee.get("Opal").$destructure(n)["$=="](r)?void e.ret(!0):l},$.$$s=a,$.$$arity=-1,$),t).call(n),!1}catch(r){if(r===e.returner)return r.$v;throw r}},N.$$arity=1),e.defn(Q,"$inject",S=function(r,t){var n=this,$=S.$$p,a=$||l;S.$$p=null;var i=r;return a!==l&&void 0===t?n.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments);return void 0===i?void(i=r):(r=e.yieldX(a,[i,r]),void(i=r))}:(void 0===t&&(ee.get("Symbol")["$==="](r)||n.$raise(ee.get("TypeError"),""+r.$inspect()+" is not a Symbol"),t=r,i=void 0),n.$each.$$p=function(){var e=ee.get("Opal").$destructure(arguments);return void 0===i?void(i=e):void(i=i.$__send__(t,e))}),n.$each(),void 0==i?l:i},S.$$arity=-1),e.defn(Q,"$lazy",z=function(){var r,t,n,$=this;return(r=(t=ee.get("Enumerator").$$scope.get("Lazy")).$new,r.$$p=(n=function(r,t){var $,a,i=(n.$$s||this,arguments.length),o=i-1;o<0&&(o=0),$=new Array(o);for(var s=1;s<i;s++)$[s-1]=arguments[s];return null==r&&(r=l),(a=r).$yield.apply(a,e.to_a($))},n.$$s=$,n.$$arity=-2,n),r).call(t,$,$.$enumerator_size())},z.$$arity=0),e.defn(Q,"$enumerator_size",C=function(){var e,r=this;return(e=r["$respond_to?"]("size"))===l||null==e||e.$$is_boolean&&1!=e?l:r.$size()},C.$$arity=0),e.alias(Q,"map","collect"),e.defn(Q,"$max",R=function(r){var t,n,$=this,a=R.$$p,i=a||l;if(R.$$p=null,void 0===r||r===l){var o,s;return $.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments);return void 0===o?void(o=r):(s=i!==l?e.yieldX(i,[r,o]):r["$<=>"](o),s===l&&$.$raise(ee.get("ArgumentError"),"comparison failed"),void(s>0&&(o=r)))},$.$each(),void 0===o?l:o}return r=ee.get("Opal").$coerce_to(r,ee.get("Integer"),"to_int"),(t=(n=$).$sort,t.$$p=i.$to_proc(),t).call(n).$reverse().$first(r)},R.$$arity=-1),e.defn(Q,"$max_by",q=function(){var r,t,n,$=this,a=q.$$p,i=a||l;if(q.$$p=null,i===!1||i===l||null==i)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"max_by");var o,s;return $.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments),t=e.yield1(i,r);return void 0===o?(o=r,void(s=t)):void(t["$<=>"](s)>0&&(o=r,s=t))},$.$each(),void 0===o?l:o},q.$$arity=0),e.alias(Q,"member?","include?"),e.defn(Q,"$min",j=function(){var e=this,r=j.$$p,t=r||l;j.$$p=null;var n;return t!==l?e.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments);if(void 0===n)return void(n=r);var $=t(r,n);$===l&&e.$raise(ee.get("ArgumentError"),"comparison failed"),$<0&&(n=r)}:e.$each.$$p=function(){var e=ee.get("Opal").$destructure(arguments);return void 0===n?void(n=e):void(ee.get("Opal").$compare(e,n)<0&&(n=e))},e.$each(),void 0===n?l:n},j.$$arity=0),e.defn(Q,"$min_by",F=function(){var r,t,n,$=this,a=F.$$p,i=a||l;if(F.$$p=null,i===!1||i===l||null==i)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"min_by");var o,s;return $.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments),t=e.yield1(i,r);return void 0===o?(o=r,void(s=t)):void(t["$<=>"](s)<0&&(o=r,s=t))},$.$each(),void 0===o?l:o},F.$$arity=0),e.defn(Q,"$minmax",L=function(){var e,r,t,n,$=this,a=L.$$p,i=a||l;L.$$p=null,(e=i)!==!1&&e!==l&&null!=e?e:i=(r=(t=$).$proc,r.$$p=(n=function(e,r){n.$$s||this;return null==e&&(e=l),null==r&&(r=l),e["$<=>"](r)},n.$$s=$,n.$$arity=2,n),r).call(t);var o=l,s=l,u=!0;return $.$each.$$p=function(){var e=ee.get("Opal").$destructure(arguments);if(u)o=s=e,u=!1;else{var r=i.$call(o,e);r===l?$.$raise(ee.get("ArgumentError"),"comparison failed"):r>0&&(o=e);var t=i.$call(s,e);t===l?$.$raise(ee.get("ArgumentError"),"comparison failed"):t<0&&(s=e)}},$.$each(),[o,s]},L.$$arity=0),e.defn(Q,"$minmax_by",D=function(){var e=this;D.$$p;return D.$$p=null,e.$raise(ee.get("NotImplementedError"))},D.$$arity=0),e.defn(Q,"$none?",B=function(){try{var r,t,n,$,a,i=this,o=B.$$p,s=o||l;return B.$$p=null,s!==l?(r=(t=i).$each,r.$$p=(n=function(r){var t,$,a=(n.$$s||this,arguments.length),i=a-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<a;o++)t[o-0]=arguments[o];return($=e.yieldX(s,e.to_a(t)))===l||null==$||$.$$is_boolean&&1!=$?l:void e.ret(!1)},n.$$s=i,n.$$arity=-1,n),r).call(t):(r=($=i).$each,r.$$p=(a=function(r){var t,n,$=(a.$$s||this,arguments.length),i=$-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<$;o++)t[o-0]=arguments[o];return(n=ee.get("Opal").$destructure(t))===l||null==n||n.$$is_boolean&&1!=n?l:void e.ret(!1)},a.$$s=i,a.$$arity=-1,a),r).call($),!0}catch(r){if(r===e.returner)return r.$v;throw r}},B.$$arity=0),e.defn(Q,"$one?",U=function(){try{var t,n,a,i,o,s=this,u=U.$$p,c=u||l,f=l;return U.$$p=null,f=0,c!==l?(t=(n=s).$each,t.$$p=(a=function(t){var n,i,o=(a.$$s||this,arguments.length),s=o-0;s<0&&(s=0),n=new Array(s);for(var u=0;u<o;u++)n[u-0]=arguments[u];return(i=e.yieldX(c,e.to_a(n)))===l||null==i||i.$$is_boolean&&1!=i?l:(f=$(f,1),(i=r(f,1))===l||null==i||i.$$is_boolean&&1!=i?l:void e.ret(!1))},a.$$s=s,a.$$arity=-1,a),t).call(n):(t=(i=s).$each,t.$$p=(o=function(t){var n,a,i=(o.$$s||this,arguments.length),s=i-0;s<0&&(s=0),n=new Array(s);for(var u=0;u<i;u++)n[u-0]=arguments[u];return(a=ee.get("Opal").$destructure(n))===l||null==a||a.$$is_boolean&&1!=a?l:(f=$(f,1),(a=r(f,1))===l||null==a||a.$$is_boolean&&1!=a?l:void e.ret(!1))},o.$$s=s,o.$$arity=-1,o),t).call(i),f["$=="](1)}catch(r){if(r===e.returner)return r.$v;throw r}},U.$$arity=0),e.defn(Q,"$partition",H=function(){var r,t,n,$=this,a=H.$$p,i=a||l;if(H.$$p=null,i===l)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"partition");var o=[],s=[];return $.$each.$$p=function(){var t=ee.get("Opal").$destructure(arguments),n=e.yield1(i,t);(r=n)===l||null==r||r.$$is_boolean&&1!=r?s.push(t):o.push(t)},$.$each(),[o,s]},H.$$arity=0),e.alias(Q,"reduce","inject"),e.defn(Q,"$reject",G=function(){var r,t,n,$=this,a=G.$$p,i=a||l;if(G.$$p=null,i===l)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"reject");var o=[];return $.$each.$$p=function(){var t=ee.get("Opal").$destructure(arguments),n=e.yield1(i,t);((r=n)===l||null==r||r.$$is_boolean&&0==r)&&o.push(t)},$.$each(),o},G.$$arity=0),e.defn(Q,"$reverse_each",X=function(){var r,t,n,$=this,a=X.$$p,i=a||l;if(X.$$p=null,i===l)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=$,n.$$arity=0,n),r).call(t,"reverse_each");var o=[];$.$each.$$p=function(){o.push(arguments)},$.$each();for(var s=o.length-1;s>=0;s--)e.yieldX(i,o[s]);return o},X.$$arity=0),e.alias(Q,"select","find_all"),e.defn(Q,"$slice_before",K=function(r){var t,n,$,a=this,i=K.$$p,o=i||l;return K.$$p=null,(t=void 0===r&&o===l||arguments.length>1)===l||null==t||t.$$is_boolean&&1!=t||a.$raise(ee.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),(t=(n=ee.get("Enumerator")).$new,t.$$p=($=function(t){var n,a=$.$$s||this;null==t&&(t=l);var i=[];o!==l?void 0===r?a.$each.$$p=function(){var r=ee.get("Opal").$destructure(arguments),$=e.yield1(o,r);(n=$)!==l&&null!=n&&(!n.$$is_boolean||1==n)&&i.length>0&&(t["$<<"](i),i=[]),i.push(r)}:a.$each.$$p=function(){var e=ee.get("Opal").$destructure(arguments),$=o(e,r.$dup());(n=$)!==l&&null!=n&&(!n.$$is_boolean||1==n)&&i.length>0&&(t["$<<"](i),i=[]),i.push(e)}:a.$each.$$p=function(){var e=ee.get("Opal").$destructure(arguments),$=r["$==="](e);(n=$)!==l&&null!=n&&(!n.$$is_boolean||1==n)&&i.length>0&&(t["$<<"](i),i=[]),i.push(e)},a.$each(),i.length>0&&t["$<<"](i)},$.$$s=a,$.$$arity=1,$),t).call(n)},K.$$arity=-1),e.defn(Q,"$sort",Y=function(){var e,r,t,n,$=this,a=Y.$$p,i=a||l,o=l;return Y.$$p=null,o=$.$to_a(),i!==l||(i=(e=(r=$).$lambda,e.$$p=(t=function(e,r){t.$$s||this;return null==e&&(e=l),null==r&&(r=l),e["$<=>"](r)},t.$$s=$,t.$$arity=2,t),e).call(r)),(e=(n=o).$sort,e.$$p=i.$to_proc(),e).call(n)},Y.$$arity=0),e.defn(Q,"$sort_by",V=function(){
var r,t,n,$,a,i,o,s,u,c=this,f=V.$$p,p=f||l,_=l;return V.$$p=null,p===l?(r=(t=c).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=c,n.$$arity=0,n),r).call(t,"sort_by"):(_=(r=($=c).$map,r.$$p=(a=function(){var r,t=(a.$$s||this,l);return t=ee.get("Opal").$destructure(arguments),r=e.yield1(p,t),[r,t]},a.$$s=c,a.$$arity=0,a),r).call($),(r=(i=_)["$sort!"],r.$$p=(o=function(e,r){o.$$s||this;return null==e&&(e=l),null==r&&(r=l),e[0]["$<=>"](r[0])},o.$$s=c,o.$$arity=2,o),r).call(i),(r=(s=_)["$map!"],r.$$p=(u=function(e){u.$$s||this;return null==e&&(e=l),e[1]},u.$$s=c,u.$$arity=1,u),r).call(s))},V.$$arity=0),e.defn(Q,"$take",J=function(e){var r=this;return r.$first(e)},J.$$arity=1),e.defn(Q,"$take_while",W=function(){try{var r,t,n,$=this,a=W.$$p,i=a||l,o=l;return W.$$p=null,i===!1||i===l||null==i?$.$enum_for("take_while"):(o=[],(r=(t=$).$each,r.$$p=(n=function(r){var t,$,a=(n.$$s||this,l),s=arguments.length,u=s-0;u<0&&(u=0),t=new Array(u);for(var c=0;c<s;c++)t[c-0]=arguments[c];return a=ee.get("Opal").$destructure(t),(($=e.yield1(i,a))===l||null==$||$.$$is_boolean&&1!=$)&&e.ret(o),o.push(a)},n.$$s=$,n.$$arity=-1,n),r).call(t))}catch(r){if(r===e.returner)return r.$v;throw r}},W.$$arity=0),e.alias(Q,"to_a","entries"),e.defn(Q,"$zip",Z=function(r){var t,n,$=this,a=(Z.$$p,arguments.length),i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return Z.$$p=null,(t=$.$to_a()).$zip.apply(t,e.to_a(n))},Z.$$arity=-1)}(o.base)},Opal.modules["corelib/enumerator"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e+r:e["$+"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}var n=e.top,$=e,a=e.nil,i=e.breaker,o=e.slice,l=e.klass;return e.add_stubs(["$require","$include","$allocate","$new","$to_proc","$coerce_to","$nil?","$empty?","$+","$class","$__send__","$===","$call","$enum_for","$size","$destructure","$inspect","$[]","$raise","$yield","$each","$enumerator_size","$respond_to?","$try_convert","$<","$for"]),n.$require("corelib/enumerable"),function(n,$){function s(){}var u,c,f,p,_,h,d=s=l(n,$,"Enumerator",s),g=d.$$proto,v=d.$$scope;return g.size=g.args=g.object=g.method=a,d.$include(v.get("Enumerable")),g.$$is_enumerator=!0,e.defs(d,"$for",u=function(e,r,t){var n,$=this,i=u.$$p,o=i||a;null==r&&(r="each");var l=arguments.length,s=l-2;s<0&&(s=0),n=new Array(s);for(var c=2;c<l;c++)n[c-2]=arguments[c];u.$$p=null;var f=$.$allocate();return f.object=e,f.size=o,f.method=r,f.args=n,f},u.$$arity=-2),e.defn(d,"$initialize",c=function(e){var r,t,n=this,$=c.$$p,i=$||a;return c.$$p=null,i!==!1&&i!==a&&null!=i?(n.object=(r=(t=v.get("Generator")).$new,r.$$p=i.$to_proc(),r).call(t),n.method="each",n.args=[],n.size=arguments[0]||a,(r=n.size)===a||null==r||r.$$is_boolean&&1!=r?a:n.size=v.get("Opal").$coerce_to(n.size,v.get("Integer"),"to_int")):(n.object=arguments[0],n.method=arguments[1]||"each",n.args=o.call(arguments,2),n.size=a)},c.$$arity=-1),e.defn(d,"$each",f=function(t){var n,$,i,o,l=this,s=f.$$p,u=s||a,c=arguments.length,p=c-0;p<0&&(p=0),o=new Array(p);for(var _=0;_<c;_++)o[_-0]=arguments[_];return f.$$p=null,$=u["$nil?"](),(n=$!==!1&&$!==a&&null!=$?o["$empty?"]():$)===a||null==n||n.$$is_boolean&&1!=n?(o=r(l.args,o),(n=u["$nil?"]())===a||null==n||n.$$is_boolean&&1!=n?($=(i=l.object).$__send__,$.$$p=u.$to_proc(),$).apply(i,[l.method].concat(e.to_a(o))):(n=l.$class()).$new.apply(n,[l.object,l.method].concat(e.to_a(o)))):l},f.$$arity=-1),e.defn(d,"$size",p=function(){var r,t=this;return(r=v.get("Proc")["$==="](t.size))===a||null==r||r.$$is_boolean&&1!=r?t.size:(r=t.size).$call.apply(r,e.to_a(t.args))},p.$$arity=0),e.defn(d,"$with_index",_=function(e){var r,t,n,$=this,i=_.$$p,o=i||a;if(null==e&&(e=0),_.$$p=null,e=e!==!1&&e!==a&&null!=e?v.get("Opal").$coerce_to(e,v.get("Integer"),"to_int"):0,o===!1||o===a||null==o)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=$,n.$$arity=0,n),r).call(t,"with_index",e);var l=e;return $.$each.$$p=function(){var e=v.get("Opal").$destructure(arguments),r=o(e,l);return l++,r},$.$each()},_.$$arity=-1),e.alias(d,"with_object","each_with_object"),e.defn(d,"$inspect",h=function(){var e,t=this,n=a;return n="#<"+t.$class()+": "+t.object.$inspect()+":"+t.method,((e=t.args["$empty?"]())===a||null==e||e.$$is_boolean&&1!=e)&&(n=r(n,"("+t.args.$inspect()["$[]"](v.get("Range").$new(1,-2))+")")),r(n,">")},h.$$arity=0),function(r,t){function n(){}var $,o,s=n=l(r,t,"Generator",n),u=s.$$proto,c=s.$$scope;return u.block=a,s.$include(c.get("Enumerable")),e.defn(s,"$initialize",$=function(){var e=this,r=$.$$p,t=r||a;return $.$$p=null,t!==!1&&t!==a&&null!=t||e.$raise(c.get("LocalJumpError"),"no block given"),e.block=t},$.$$arity=0),e.defn(s,"$each",o=function(r){var t,n,$,l=this,s=o.$$p,u=s||a,f=a,p=arguments.length,_=p-0;_<0&&(_=0),$=new Array(_);for(var h=0;h<p;h++)$[h-0]=arguments[h];o.$$p=null,f=(t=(n=c.get("Yielder")).$new,t.$$p=u.$to_proc(),t).call(n);try{$.unshift(f),e.yieldX(l.block,$)}catch(e){if(e===i)return i.$v;throw e}return l},o.$$arity=-1),a&&"each"}(v.base,null),function(r,t){function n(){}var $,o,s,u=n=l(r,t,"Yielder",n),c=u.$$proto;u.$$scope;return c.block=a,e.defn(u,"$initialize",$=function(){var e=this,r=$.$$p,t=r||a;return $.$$p=null,e.block=t},$.$$arity=0),e.defn(u,"$yield",o=function(r){var t,n=this,$=arguments.length,a=$-0;a<0&&(a=0),t=new Array(a);for(var o=0;o<$;o++)t[o-0]=arguments[o];var l=e.yieldX(n.block,t);if(l===i)throw i;return l},o.$$arity=-1),e.defn(u,"$<<",s=function(r){var t,n,$=this,a=arguments.length,i=a-0;i<0&&(i=0),n=new Array(i);for(var o=0;o<a;o++)n[o-0]=arguments[o];return(t=$).$yield.apply(t,e.to_a(n)),$},s.$$arity=-1),a&&"<<"}(v.base,null),function(n,$){function i(){}var o,s,u,c,f,p,_,h,d,g,v,y,m,b=i=l(n,$,"Lazy",i),E=b.$$proto,w=b.$$scope;return E.enumerator=a,function(e,r){function t(){}var n=t=l(e,r,"StopLazyError",t);n.$$proto,n.$$scope;return a}(w.base,w.get("Exception")),e.defn(b,"$initialize",o=function(r,t){var n,$,i,l=this,s=o.$$p,u=s||a;return null==t&&(t=a),o.$$p=null,u!==a||l.$raise(w.get("ArgumentError"),"tried to call lazy new without a block"),l.enumerator=r,($=l,n=e.find_super_dispatcher(l,"initialize",o,!1),n.$$p=(i=function(t,n){var $,o,l,s,c=i.$$s||this,f=arguments.length,p=f-1;p<0&&(p=0),$=new Array(p);for(var _=1;_<f;_++)$[_-1]=arguments[_];null==t&&(t=a);try{return(o=(l=r).$each,o.$$p=(s=function(r){var n,$=(s.$$s||this,arguments.length),a=$-0;a<0&&(a=0),n=new Array(a);for(var i=0;i<$;i++)n[i-0]=arguments[i];n.unshift(t),e.yieldX(u,n)},s.$$s=c,s.$$arity=-1,s),o).apply(l,e.to_a($))}catch(r){if(!e.rescue(r,[w.get("Exception")]))throw r;try{return a}finally{e.pop_exception()}}},i.$$s=l,i.$$arity=-2,i),n).call($,t)},o.$$arity=-2),e.alias(b,"force","to_a"),e.defn(b,"$lazy",s=function(){var e=this;return e},s.$$arity=0),e.defn(b,"$collect",u=function(){var r,t,n,$=this,i=u.$$p,o=i||a;return u.$$p=null,o!==!1&&o!==a&&null!=o||$.$raise(w.get("ArgumentError"),"tried to call lazy map without a block"),(r=(t=w.get("Lazy")).$new,r.$$p=(n=function(r,t){var $,i=(n.$$s||this,arguments.length),l=i-1;l<0&&(l=0),$=new Array(l);for(var s=1;s<i;s++)$[s-1]=arguments[s];null==r&&(r=a);var u=e.yieldX(o,$);r.$yield(u)},n.$$s=$,n.$$arity=-2,n),r).call(t,$,$.$enumerator_size())},u.$$arity=0),e.defn(b,"$collect_concat",c=function(){var r,t,n,$=this,i=c.$$p,o=i||a;return c.$$p=null,o!==!1&&o!==a&&null!=o||$.$raise(w.get("ArgumentError"),"tried to call lazy map without a block"),(r=(t=w.get("Lazy")).$new,r.$$p=(n=function(r,t){var $,i,l,s,u,c,f=n.$$s||this,p=arguments.length,_=p-1;_<0&&(_=0),$=new Array(_);for(var h=1;h<p;h++)$[h-1]=arguments[h];null==r&&(r=a);var d=e.yieldX(o,$);if(d["$respond_to?"]("force")&&d["$respond_to?"]("each"))(i=(l=d).$each,i.$$p=(s=function(e){s.$$s||this;return null==e&&(e=a),r.$yield(e)},s.$$s=f,s.$$arity=1,s),i).call(l);else{var g=w.get("Opal").$try_convert(d,w.get("Array"),"to_ary");g===a?r.$yield(d):(i=(u=d).$each,i.$$p=(c=function(e){c.$$s||this;return null==e&&(e=a),r.$yield(e)},c.$$s=f,c.$$arity=1,c),i).call(u)}},n.$$s=$,n.$$arity=-2,n),r).call(t,$,a)},c.$$arity=0),e.defn(b,"$drop",f=function(n){var $,i,o,l=this,s=a,u=a,c=a;return n=w.get("Opal").$coerce_to(n,w.get("Integer"),"to_int"),($=t(n,0))===a||null==$||$.$$is_boolean&&1!=$||l.$raise(w.get("ArgumentError"),"attempt to drop negative size"),s=l.$enumerator_size(),u=function(){return($=w.get("Integer")["$==="](s))===a||null==$||$.$$is_boolean&&1!=$?s:($=t(n,s))===a||null==$||$.$$is_boolean&&1!=$?s:n}(),c=0,($=(i=w.get("Lazy")).$new,$.$$p=(o=function($,i){var l,s,u=(o.$$s||this,arguments.length),f=u-1;f<0&&(f=0),l=new Array(f);for(var p=1;p<u;p++)l[p-1]=arguments[p];return null==$&&($=a),(s=t(c,n))===a||null==s||s.$$is_boolean&&1!=s?(s=$).$yield.apply(s,e.to_a(l)):c=r(c,1)},o.$$s=l,o.$$arity=-2,o),$).call(i,l,u)},f.$$arity=1),e.defn(b,"$drop_while",p=function(){var r,t,n,$=this,i=p.$$p,o=i||a,l=a;return p.$$p=null,o!==!1&&o!==a&&null!=o||$.$raise(w.get("ArgumentError"),"tried to call lazy drop_while without a block"),l=!0,(r=(t=w.get("Lazy")).$new,r.$$p=(n=function(r,t){var $,i,s,u=(n.$$s||this,arguments.length),c=u-1;c<0&&(c=0),$=new Array(c);for(var f=1;f<u;f++)$[f-1]=arguments[f];if(null==r&&(r=a),l===!1||l===a||null==l)return(s=r).$yield.apply(s,e.to_a($));var p=e.yieldX(o,$);((i=p)===a||null==i||i.$$is_boolean&&0==i)&&(l=!1,(i=r).$yield.apply(i,e.to_a($)))},n.$$s=$,n.$$arity=-2,n),r).call(t,$,a)},p.$$arity=0),e.defn(b,"$enum_for",_=function(r,t){var n,$,i,o=this,l=_.$$p,s=l||a;null==r&&(r="each");var u=arguments.length,c=u-1;c<0&&(c=0),i=new Array(c);for(var f=1;f<u;f++)i[f-1]=arguments[f];return _.$$p=null,(n=($=o.$class()).$for,n.$$p=s.$to_proc(),n).apply($,[o,r].concat(e.to_a(i)))},_.$$arity=-1),e.defn(b,"$find_all",h=function(){var r,t,n,$=this,i=h.$$p,o=i||a;return h.$$p=null,o!==!1&&o!==a&&null!=o||$.$raise(w.get("ArgumentError"),"tried to call lazy select without a block"),(r=(t=w.get("Lazy")).$new,r.$$p=(n=function(r,t){var $,i,l=(n.$$s||this,arguments.length),s=l-1;s<0&&(s=0),$=new Array(s);for(var u=1;u<l;u++)$[u-1]=arguments[u];null==r&&(r=a);var c=e.yieldX(o,$);(i=c)===a||null==i||i.$$is_boolean&&1!=i||(i=r).$yield.apply(i,e.to_a($))},n.$$s=$,n.$$arity=-2,n),r).call(t,$,a)},h.$$arity=0),e.alias(b,"flat_map","collect_concat"),e.defn(b,"$grep",d=function(r){var t,n,$,i,o,l=this,s=d.$$p,u=s||a;return d.$$p=null,u!==!1&&u!==a&&null!=u?(t=(n=w.get("Lazy")).$new,t.$$p=($=function(t,n){var i,o,l=($.$$s||this,arguments.length),s=l-1;s<0&&(s=0),i=new Array(s);for(var c=1;c<l;c++)i[c-1]=arguments[c];null==t&&(t=a);var f=w.get("Opal").$destructure(i),p=r["$==="](f);(o=p)===a||null==o||o.$$is_boolean&&1!=o||(p=e.yield1(u,f),t.$yield(e.yield1(u,f)))},$.$$s=l,$.$$arity=-2,$),t).call(n,l,a):(t=(i=w.get("Lazy")).$new,t.$$p=(o=function(e,t){var n,$,i=(o.$$s||this,arguments.length),l=i-1;l<0&&(l=0),n=new Array(l);for(var s=1;s<i;s++)n[s-1]=arguments[s];null==e&&(e=a);var u=w.get("Opal").$destructure(n),c=r["$==="](u);($=c)===a||null==$||$.$$is_boolean&&1!=$||e.$yield(u)},o.$$s=l,o.$$arity=-2,o),t).call(i,l,a)},d.$$arity=1),e.alias(b,"map","collect"),e.alias(b,"select","find_all"),e.defn(b,"$reject",g=function(){var r,t,n,$=this,i=g.$$p,o=i||a;return g.$$p=null,o!==!1&&o!==a&&null!=o||$.$raise(w.get("ArgumentError"),"tried to call lazy reject without a block"),(r=(t=w.get("Lazy")).$new,r.$$p=(n=function(r,t){var $,i,l=(n.$$s||this,arguments.length),s=l-1;s<0&&(s=0),$=new Array(s);for(var u=1;u<l;u++)$[u-1]=arguments[u];null==r&&(r=a);var c=e.yieldX(o,$);((i=c)===a||null==i||i.$$is_boolean&&0==i)&&(i=r).$yield.apply(i,e.to_a($))},n.$$s=$,n.$$arity=-2,n),r).call(t,$,a)},g.$$arity=0),e.defn(b,"$take",v=function(n){var $,i,o,l=this,s=a,u=a,c=a;return n=w.get("Opal").$coerce_to(n,w.get("Integer"),"to_int"),($=t(n,0))===a||null==$||$.$$is_boolean&&1!=$||l.$raise(w.get("ArgumentError"),"attempt to take negative size"),s=l.$enumerator_size(),u=function(){return($=w.get("Integer")["$==="](s))===a||null==$||$.$$is_boolean&&1!=$?s:($=t(n,s))===a||null==$||$.$$is_boolean&&1!=$?s:n}(),c=0,($=(i=w.get("Lazy")).$new,$.$$p=(o=function($,i){var l,s,u=o.$$s||this,f=arguments.length,p=f-1;p<0&&(p=0),l=new Array(p);for(var _=1;_<f;_++)l[_-1]=arguments[_];return null==$&&($=a),(s=t(c,n))===a||null==s||s.$$is_boolean&&1!=s?u.$raise(w.get("StopLazyError")):((s=$).$yield.apply(s,e.to_a(l)),c=r(c,1))},o.$$s=l,o.$$arity=-2,o),$).call(i,l,u)},v.$$arity=1),e.defn(b,"$take_while",y=function(){var r,t,n,$=this,i=y.$$p,o=i||a;return y.$$p=null,o!==!1&&o!==a&&null!=o||$.$raise(w.get("ArgumentError"),"tried to call lazy take_while without a block"),(r=(t=w.get("Lazy")).$new,r.$$p=(n=function(r,t){var $,i,l=n.$$s||this,s=arguments.length,u=s-1;u<0&&(u=0),$=new Array(u);for(var c=1;c<s;c++)$[c-1]=arguments[c];null==r&&(r=a);var f=e.yieldX(o,$);(i=f)===a||null==i||i.$$is_boolean&&1!=i?l.$raise(w.get("StopLazyError")):(i=r).$yield.apply(i,e.to_a($))},n.$$s=$,n.$$arity=-2,n),r).call(t,$,a)},y.$$arity=0),e.alias(b,"to_enum","enum_for"),e.defn(b,"$inspect",m=function(){var e=this;return"#<"+e.$class()+": "+e.enumerator.$inspect()+">"},m.$$arity=0),a&&"inspect"}(v.base,d)}($.base,null)},Opal.modules["corelib/numeric"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e-r:e["$-"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e*r:e["$*"](r)}function n(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}function $(e,r){return"number"==typeof e&&"number"==typeof r?e/r:e["$/"](r)}function a(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}var i=e.top,o=e,l=e.nil,s=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$include","$instance_of?","$class","$Float","$coerce","$===","$raise","$__send__","$equal?","$coerce_to!","$-@","$**","$-","$*","$div","$<","$ceil","$to_f","$denominator","$to_r","$==","$floor","$/","$%","$Complex","$zero?","$numerator","$abs","$arg","$round","$to_i","$truncate","$>"]),i.$require("corelib/comparable"),function(i,o){function u(){}var c,f,p,_,h,d,g,v,y,m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R,q,j,F,L,D,B,U,H,G,X,K=u=s(i,o,"Numeric",u),Y=(K.$$proto,K.$$scope);return K.$include(Y.get("Comparable")),e.defn(K,"$coerce",c=function(e){var r,t=this;return(r=e["$instance_of?"](t.$class()))===l||null==r||r.$$is_boolean&&1!=r?[t.$Float(e),t.$Float(t)]:[e,t]},c.$$arity=1),e.defn(K,"$__coerced__",f=function(r,t){var n,$,a=this,i=l,o=l,s=l;try{$=t.$coerce(a),n=e.to_ary($),i=null==n[0]?l:n[0],o=null==n[1]?l:n[1],$}catch(n){if(!e.rescue(n,[Y.get("StandardError")]))throw n;try{s=r,"+"["$==="](s)||"-"["$==="](s)||"*"["$==="](s)||"/"["$==="](s)||"%"["$==="](s)||"&"["$==="](s)||"|"["$==="](s)||"^"["$==="](s)||"**"["$==="](s)?a.$raise(Y.get("TypeError"),""+t.$class()+" can't be coerce into Numeric"):(">"["$==="](s)||">="["$==="](s)||"<"["$==="](s)||"<="["$==="](s)||"<=>"["$==="](s))&&a.$raise(Y.get("ArgumentError"),"comparison of "+a.$class()+" with "+t.$class()+" failed")}finally{e.pop_exception()}}return i.$__send__(r,o)},f.$$arity=2),e.defn(K,"$<=>",p=function(e){var r,t=this;return(r=t["$equal?"](e))===l||null==r||r.$$is_boolean&&1!=r?l:0},p.$$arity=1),e.defn(K,"$[]",_=function(e){var t=this,n=l,$=l;return e=Y.get("Opal")["$coerce_to!"](e,Y.get("Integer"),"to_int"),n=2["$**"](30)["$-@"](),$=r(2["$**"](30),1),e<n||e>$?0:(t>>e)%2},_.$$arity=1),e.defn(K,"$+@",h=function(){var e=this;return e},h.$$arity=0),e.defn(K,"$-@",d=function(){var e=this;return r(0,e)},d.$$arity=0),e.defn(K,"$%",g=function(e){var n=this;return r(n,t(e,n.$div(e)))},g.$$arity=1),e.defn(K,"$abs",v=function(){var e=this;return n(e,0)?e["$-@"]():e},v.$$arity=0),e.defn(K,"$abs2",y=function(){var e=this;return t(e,e)},y.$$arity=0),e.defn(K,"$angle",m=function(){var e=this;return n(e,0)?Y.get("Math").$$scope.get("PI"):0},m.$$arity=0),e.alias(K,"arg","angle"),e.defn(K,"$ceil",b=function(){var e=this;return e.$to_f().$ceil()},b.$$arity=0),e.defn(K,"$conj",E=function(){var e=this;return e},E.$$arity=0),e.alias(K,"conjugate","conj"),e.defn(K,"$denominator",w=function(){var e=this;return e.$to_r().$denominator()},w.$$arity=0),e.defn(K,"$div",O=function(e){var r=this;return e["$=="](0)&&r.$raise(Y.get("ZeroDivisionError"),"divided by o"),$(r,e).$floor()},O.$$arity=1),e.defn(K,"$divmod",A=function(e){var r=this;return[r.$div(e),r["$%"](e)]},A.$$arity=1),e.defn(K,"$fdiv",x=function(e){var r=this;return $(r.$to_f(),e)},x.$$arity=1),e.defn(K,"$floor",T=function(){var e=this;return e.$to_f().$floor()},T.$$arity=0),e.defn(K,"$i",M=function(){var e=this;return e.$Complex(0,e)},M.$$arity=0),e.defn(K,"$imag",P=function(){return 0},P.$$arity=0),e.alias(K,"imaginary","imag"),e.defn(K,"$integer?",k=function(){return!1},k.$$arity=0),e.alias(K,"magnitude","abs"),e.alias(K,"modulo","%"),e.defn(K,"$nonzero?",I=function(){var e,r=this;return(e=r["$zero?"]())===l||null==e||e.$$is_boolean&&1!=e?r:l},I.$$arity=0),e.defn(K,"$numerator",N=function(){var e=this;return e.$to_r().$numerator()},N.$$arity=0),e.alias(K,"phase","arg"),e.defn(K,"$polar",S=function(){var e=this;return[e.$abs(),e.$arg()]},S.$$arity=0),e.defn(K,"$quo",z=function(e){var r=this;return $(Y.get("Opal")["$coerce_to!"](r,Y.get("Rational"),"to_r"),e)},z.$$arity=1),e.defn(K,"$real",C=function(){var e=this;return e},C.$$arity=0),e.defn(K,"$real?",R=function(){return!0},R.$$arity=0),e.defn(K,"$rect",q=function(){var e=this;return[e,0]},q.$$arity=0),e.alias(K,"rectangular","rect"),e.defn(K,"$round",j=function(e){var r=this;return r.$to_f().$round(e)},j.$$arity=-1),e.defn(K,"$to_c",F=function(){var e=this;return e.$Complex(e,0)},F.$$arity=0),e.defn(K,"$to_int",L=function(){var e=this;return e.$to_i()},L.$$arity=0),e.defn(K,"$truncate",D=function(){var e=this;return e.$to_f().$truncate()},D.$$arity=0),e.defn(K,"$zero?",B=function(){var e=this;return e["$=="](0)},B.$$arity=0),e.defn(K,"$positive?",U=function(){var e=this;return a(e,0)},U.$$arity=0),e.defn(K,"$negative?",H=function(){var e=this;return n(e,0)},H.$$arity=0),e.defn(K,"$dup",G=function(){var e=this;return e.$raise(Y.get("TypeError"),"can't dup "+e.$class())},G.$$arity=0),e.defn(K,"$clone",X=function(){var e=this;return e.$raise(Y.get("TypeError"),"can't clone "+e.$class())},X.$$arity=0),l&&"clone"}(o.base,null)},Opal.modules["corelib/array"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e*r:e["$*"](r)}function n(e,r){return"number"==typeof e&&"number"==typeof r?e>=r:e["$>="](r)}function $(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}var a=e.top,i=e,o=e.nil,l=(e.breaker,e.slice,e.klass),s=e.hash2,u=e.gvars;return e.add_stubs(["$require","$include","$to_a","$raise","$===","$replace","$respond_to?","$to_ary","$coerce_to","$coerce_to?","$join","$to_str","$class","$clone","$hash","$<=>","$==","$object_id","$inspect","$enum_for","$coerce_to!","$>","$*","$enumerator_size","$empty?","$size","$eql?","$length","$begin","$end","$exclude_end?","$flatten","$__id__","$[]","$to_s","$new","$!","$>=","$**","$delete_if","$to_proc","$each","$reverse","$rotate","$rand","$at","$keep_if","$shuffle!","$dup","$<","$sort","$sort_by","$!=","$times","$[]=","$<<","$values","$kind_of?","$last","$first","$upto","$reject","$pristine"]),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(a,i){function c(){}function f(r,t){return t.$$name===e.Array?r:t.$allocate().$replace(r.$to_a())}function p(e,r){return e===r||0===r?1:r>0&&e>r?p(e-1,r-1)+p(e-1,r):0}function _(e,r){for(var t=r>=0?1:0;r;)t*=e,e--,r--;return t}var h,d,g,v,y,m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R,q,j,F,L,D,B,U,H,G,X,K,Y,V,J,W,Z,Q,ee,re,te,ne,$e,ae,ie,oe,le,se,ue,ce,fe,pe,_e,he,de,ge,ve,ye,me,be,Ee,we,Oe,Ae,xe,Te,Me,Pe,ke,Ie,Ne,Se,ze,Ce,Re,qe,je,Fe,Le,De,Be,Ue,He,Ge,Xe,Ke,Ye=c=l(a,i,"Array",c),Ve=Ye.$$proto,Je=Ye.$$scope;return Ve.length=o,Ye.$include(Je.get("Enumerable")),Ve.$$is_array=!0,e.defs(Ye,"$[]",h=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];return f(r,t)},h.$$arity=-1),e.defn(Ye,"$initialize",d=function(e,r){var t,n=this,$=d.$$p,a=$||o;if(null==e&&(e=o),null==r&&(r=o),d.$$p=null,(t=arguments.length>2)===o||null==t||t.$$is_boolean&&1!=t||n.$raise(Je.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0===arguments.length)return n.splice(0,n.length),n;if((t=1===arguments.length)!==o&&null!=t&&(!t.$$is_boolean||1==t)){if(!((t=Je.get("Array")["$==="](e))===o||null==t||t.$$is_boolean&&1!=t))return n.$replace(e.$to_a()),n;if((t=e["$respond_to?"]("to_ary"))!==o&&null!=t&&(!t.$$is_boolean||1==t))return n.$replace(e.$to_ary()),n}e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),(t=e<0)===o||null==t||t.$$is_boolean&&1!=t||n.$raise(Je.get("ArgumentError"),"negative array size"),n.splice(0,n.length);var i,l;if(a===o)for(i=0;i<e;i++)n.push(r);else for(i=0,l;i<e;i++)l=a(i),n[i]=l;return n},d.$$arity=-1),e.defs(Ye,"$try_convert",g=function(e){return Je.get("Opal")["$coerce_to?"](e,Je.get("Array"),"to_ary")},g.$$arity=1),e.defn(Ye,"$&",v=function(r){var t,n=this;r=(t=Je.get("Array")["$==="](r))===o||null==t||t.$$is_boolean&&1!=t?Je.get("Opal").$coerce_to(r,Je.get("Array"),"to_ary").$to_a():r.$to_a();var $,a,i,l=[],u=s([],{});for($=0,a=r.length;$<a;$++)e.hash_put(u,r[$],!0);for($=0,a=n.length;$<a;$++)i=n[$],void 0!==e.hash_delete(u,i)&&l.push(i);return l},v.$$arity=1),e.defn(Ye,"$|",y=function(r){var t,n=this;r=(t=Je.get("Array")["$==="](r))===o||null==t||t.$$is_boolean&&1!=t?Je.get("Opal").$coerce_to(r,Je.get("Array"),"to_ary").$to_a():r.$to_a();var $,a,i=s([],{});for($=0,a=n.length;$<a;$++)e.hash_put(i,n[$],!0);for($=0,a=r.length;$<a;$++)e.hash_put(i,r[$],!0);return i.$keys()},y.$$arity=1),e.defn(Ye,"$*",m=function(e){var r,t=this;if((r=e["$respond_to?"]("to_str"))!==o&&null!=r&&(!r.$$is_boolean||1==r))return t.$join(e.$to_str());e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),(r=e<0)===o||null==r||r.$$is_boolean&&1!=r||t.$raise(Je.get("ArgumentError"),"negative argument");for(var n=[],$=t.$to_a(),a=0;a<e;a++)n=n.concat($);return f(n,t.$class())},m.$$arity=1),e.defn(Ye,"$+",b=function(e){var r,t=this;return e=(r=Je.get("Array")["$==="](e))===o||null==r||r.$$is_boolean&&1!=r?Je.get("Opal").$coerce_to(e,Je.get("Array"),"to_ary").$to_a():e.$to_a(),t.concat(e)},b.$$arity=1),e.defn(Ye,"$-",E=function(r){var t,n=this;if(r=(t=Je.get("Array")["$==="](r))===o||null==t||t.$$is_boolean&&1!=t?Je.get("Opal").$coerce_to(r,Je.get("Array"),"to_ary").$to_a():r.$to_a(),(t=0===n.length)!==o&&null!=t&&(!t.$$is_boolean||1==t))return[];if((t=0===r.length)!==o&&null!=t&&(!t.$$is_boolean||1==t))return n.$clone().$to_a();var $,a,i,l=[],u=s([],{});for($=0,a=r.length;$<a;$++)e.hash_put(u,r[$],!0);for($=0,a=n.length;$<a;$++)i=n[$],void 0===e.hash_get(u,i)&&l.push(i);return l},E.$$arity=1),e.defn(Ye,"$<<",w=function(e){var r=this;return r.push(e),r},w.$$arity=1),e.defn(Ye,"$<=>",O=function(e){var r,t=this;if((r=Je.get("Array")["$==="](e))===o||null==r||r.$$is_boolean&&1!=r){if((r=e["$respond_to?"]("to_ary"))===o||null==r||r.$$is_boolean&&1!=r)return o;e=e.$to_ary().$to_a()}else e=e.$to_a();if(t.$hash()===e.$hash())return 0;for(var n=Math.min(t.length,e.length),$=0;$<n;$++){var a=t[$]["$<=>"](e[$]);if(0!==a)return a}return t.length["$<=>"](e.length)},O.$$arity=1),e.defn(Ye,"$==",A=function(e){function r(e,t){var $,a,i,o;if(e===t)return!0;if(!t.$$is_array)return!!Je.get("Opal")["$respond_to?"](t,"to_ary")&&t["$=="](e);if(e.constructor!==Array&&(e=e.$to_a()),t.constructor!==Array&&(t=t.$to_a()),e.length!==t.length)return!1;for(n[e.$object_id()]=!0,$=0,a=e.length;$<a;$++)if(i=e[$],o=t[$],i.$$is_array){if(o.$$is_array&&o.length!==i.length)return!1;if(!n.hasOwnProperty(i.$object_id())&&!r(i,o))return!1}else if(!i["$=="](o))return!1;return!0}var t=this,n={};return r(t,e)},A.$$arity=1),e.defn(Ye,"$[]",x=function(e,r){var t,n,$,a,i=this,l=i.length;if(e.$$is_range){if(t=e.exclude,n=Je.get("Opal").$coerce_to(e.begin,Je.get("Integer"),"to_int"),$=Je.get("Opal").$coerce_to(e.end,Je.get("Integer"),"to_int"),n<0&&(n+=l,n<0))return o;if(n>l)return o;if($<0&&($+=l,$<0))return[];t||($+=1),a=i.slice(n,$)}else{if(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),e<0&&(e+=l,e<0))return o;if(void 0===r)return e>=l||e<0?o:i[e];if(r=Je.get("Opal").$coerce_to(r,Je.get("Integer"),"to_int"),r<0||e>l||e<0)return o;a=i.slice(e,e+r)}return f(a,i.$class())},x.$$arity=-2),e.defn(Ye,"$[]=",T=function(e,r,t){var n,$,a=this,i=o,l=o,s=a.length;if((n=Je.get("Range")["$==="](e))===o||null==n||n.$$is_boolean&&1!=n){(n=void 0===t)===o||null==n||n.$$is_boolean&&1!=n?(l=r,r=t,i=(n=Je.get("Array")["$==="](r))===o||null==n||n.$$is_boolean&&1!=n?(n=r["$respond_to?"]("to_ary"))===o||null==n||n.$$is_boolean&&1!=n?[r]:r.$to_ary().$to_a():r.$to_a()):l=1;var u;if(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),l=Je.get("Opal").$coerce_to(l,Je.get("Integer"),"to_int"),e<0&&(u=e,e+=s,e<0&&a.$raise(Je.get("IndexError"),"index "+u+" too small for array; minimum "+-a.length)),l<0&&a.$raise(Je.get("IndexError"),"negative length ("+l+")"),e>s)for($=s;$<e;$++)a[$]=o;return void 0===t?a[e]=r:a.splice.apply(a,[e,l].concat(i)),r}i=(n=Je.get("Array")["$==="](r))===o||null==n||n.$$is_boolean&&1!=n?(n=r["$respond_to?"]("to_ary"))===o||null==n||n.$$is_boolean&&1!=n?[r]:r.$to_ary().$to_a():r.$to_a();var c=e.exclude,f=Je.get("Opal").$coerce_to(e.begin,Je.get("Integer"),"to_int"),p=Je.get("Opal").$coerce_to(e.end,Je.get("Integer"),"to_int");if(f<0&&(f+=s,f<0&&a.$raise(Je.get("RangeError"),""+e.$inspect()+" out of range")),p<0&&(p+=s),c||(p+=1),f>s)for($=s;$<f;$++)a[$]=o;return p<0?a.splice.apply(a,[f,0].concat(i)):a.splice.apply(a,[f,p-f].concat(i)),r},T.$$arity=-3),e.defn(Ye,"$assoc",M=function(e){for(var r,t=this,n=0,$=t.length;n<$;n++)if(r=t[n],r.length&&r[0]["$=="](e))return r;return o},M.$$arity=1),e.defn(Ye,"$at",P=function(e){var r=this;return e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),e<0&&(e+=r.length),e<0||e>=r.length?o:r[e]},P.$$arity=1),e.defn(Ye,"$bsearch",k=function(){var e=this,r=k.$$p,t=r||o;if(k.$$p=null,t===o)return e.$enum_for("bsearch");for(var n,$,a,i=0,l=e.length,s=!1,u=o;i<l;){if(n=i+Math.floor((l-i)/2),$=e[n],a=t($),a===!0)u=$,s=!0;else if(a===!1||a===o)s=!1;else if(a.$$is_number){if(0===a)return $;s=a<0}else e.$raise(Je.get("TypeError"),"wrong argument type "+a.$class()+" (must be numeric, true, false or nil)");s?l=n:i=n+1}return u},k.$$arity=0),e.defn(Ye,"$cycle",I=function(n){var $,a,i,l,s=this,u=I.$$p,c=u||o;if(null==n&&(n=o),I.$$p=null,c===o)return($=(a=s).$enum_for,$.$$p=(i=function(){var e,$=i.$$s||this;return n["$=="](o)?Je.get("Float").$$scope.get("INFINITY"):(n=Je.get("Opal")["$coerce_to!"](n,Je.get("Integer"),"to_int"),(e=r(n,0))===o||null==e||e.$$is_boolean&&1!=e?0:t($.$enumerator_size(),n))},i.$$s=s,i.$$arity=0,i),$).call(a,"cycle",n);if(($=(l=s["$empty?"]())!==!1&&l!==o&&null!=l?l:n["$=="](0))!==o&&null!=$&&(!$.$$is_boolean||1==$))return o;var f,p,_;if(n===o)for(;;)for(f=0,p=s.length;f<p;f++)_=e.yield1(c,s[f]);else{if(n=Je.get("Opal")["$coerce_to!"](n,Je.get("Integer"),"to_int"),n<=0)return s;for(;n>0;){for(f=0,p=s.length;f<p;f++)_=e.yield1(c,s[f]);n--}}return s},I.$$arity=-1),e.defn(Ye,"$clear",N=function(){var e=this;return e.splice(0,e.length),e},N.$$arity=0),e.defn(Ye,"$count",S=function(r){var t,n,$=this,a=S.$$p,i=a||o,l=o,s=o;for(null==r&&(r=o),S.$$p=null,l=[],s=0;s<arguments.length;s++)l[s]=arguments[s];return(t=(n=r)!==!1&&n!==o&&null!=n?n:i)===o||null==t||t.$$is_boolean&&1!=t?$.$size():(n=$,t=e.find_super_dispatcher($,"count",S,!1),t.$$p=a,t).apply(n,l)},S.$$arity=-1),e.defn(Ye,"$initialize_copy",z=function(e){var r=this;return r.$replace(e)},z.$$arity=1),e.defn(Ye,"$collect",C=function(){var r,t,n,$=this,a=C.$$p,i=a||o;if(C.$$p=null,i===o)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=$,n.$$arity=0,n),r).call(t,"collect");for(var l=[],s=0,u=$.length;s<u;s++){var c=e.yield1(i,$[s]);l.push(c)}return l},C.$$arity=0),e.defn(Ye,"$collect!",R=function(){var r,t,n,$=this,a=R.$$p,i=a||o;if(R.$$p=null,i===o)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=$,n.$$arity=0,n),r).call(t,"collect!");for(var l=0,s=$.length;l<s;l++){var u=e.yield1(i,$[l]);$[l]=u}return $},R.$$arity=0),e.defn(Ye,"$combination",q=function(r){var t,n,$,a=this,i=q.$$p,l=i||o,s=o;if(q.$$p=null,s=Je.get("Opal")["$coerce_to!"](r,Je.get("Integer"),"to_int"),l===o)return(t=(n=a).$enum_for,t.$$p=($=function(){var e=$.$$s||this;return p(e.length,s)},$.$$s=a,$.$$arity=0,$),t).call(n,"combination",s);var u,c,f,_,h,d,g;if(0===s)e.yield1(l,[]);else if(1===s)for(u=0,c=a.length;u<c;u++)e.yield1(l,[a[u]]);else if(s===a.length)e.yield1(l,a.slice());else if(s>=0&&s<a.length){for(f=[],u=0;u<=s+1;u++)f.push(0);for(_=[],h=0,d=!1,f[0]=-1;!d;){for(_[h]=a[f[h+1]];h<s-1;)h++,g=f[h+1]=f[h]+1,_[h]=a[g];e.yield1(l,_.slice()),h++;do d=0===h,f[h]++,h--;while(f[h+1]+s===a.length+h+1)}}return a},q.$$arity=1),e.defn(Ye,"$repeated_combination",j=function(r){function t(r,n,$,a){if($.length==r){var i=$.slice();return void e.yield1(s,i)}for(var o=n;o<a.length;o++)$.push(a[o]),t(r,o,$,a),$.pop()}var n,$,a,i=this,l=j.$$p,s=l||o,u=o;return j.$$p=null,u=Je.get("Opal")["$coerce_to!"](r,Je.get("Integer"),"to_int"),s===o?(n=($=i).$enum_for,n.$$p=(a=function(){var e=a.$$s||this;return p(e.length+u-1,u)},a.$$s=i,a.$$arity=0,a),n).call($,"repeated_combination",u):(u>=0&&t(u,0,[],i),i)},j.$$arity=1),e.defn(Ye,"$compact",F=function(){for(var e,r=this,t=[],n=0,$=r.length;n<$;n++)(e=r[n])!==o&&t.push(e);return t},F.$$arity=0),e.defn(Ye,"$compact!",L=function(){for(var e=this,r=e.length,t=0,n=e.length;t<n;t++)e[t]===o&&(e.splice(t,1),n--,t--);return e.length===r?o:e},L.$$arity=0),e.defn(Ye,"$concat",D=function(e){var r,t=this;e=(r=Je.get("Array")["$==="](e))===o||null==r||r.$$is_boolean&&1!=r?Je.get("Opal").$coerce_to(e,Je.get("Array"),"to_ary").$to_a():e.$to_a();for(var n=0,$=e.length;n<$;n++)t.push(e[n]);return t},D.$$arity=1),e.defn(Ye,"$delete",B=function(r){var t=this,n=B.$$p,$=n||o;B.$$p=null;for(var a=t.length,i=0,l=a;i<l;i++)t[i]["$=="](r)&&(t.splice(i,1),l--,i--);return t.length===a?$!==o?e.yieldX($,[]):o:r},B.$$arity=1),e.defn(Ye,"$delete_at",U=function(e){var r=this;if(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),e<0&&(e+=r.length),e<0||e>=r.length)return o;var t=r[e];return r.splice(e,1),t},U.$$arity=1),e.defn(Ye,"$delete_if",H=function(){var e,r,t,n=this,$=H.$$p,a=$||o;if(H.$$p=null,a===o)return(e=(r=n).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=n,t.$$arity=0,t),e).call(r,"delete_if");for(var i,l=0,s=n.length;l<s;l++)i=a(n[l]),i!==!1&&i!==o&&(n.splice(l,1),s--,l--);return n},H.$$arity=0),e.defn(Ye,"$drop",G=function(e){var r=this;return e<0&&r.$raise(Je.get("ArgumentError")),r.slice(e)},G.$$arity=1),e.defn(Ye,"$dup",X=function(){var r,t,n=this,$=X.$$p,a=o,i=o;for(X.$$p=null,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n.$$class===e.Array&&n.$allocate.$$pristine&&n.$copy_instance_variables.$$pristine&&n.$initialize_dup.$$pristine?n.slice(0):(t=n,r=e.find_super_dispatcher(n,"dup",X,!1),r.$$p=$,r).apply(t,a)},X.$$arity=0),e.defn(Ye,"$each",K=function(){var r,t,n,$=this,a=K.$$p,i=a||o;if(K.$$p=null,i===o)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=$,n.$$arity=0,n),r).call(t,"each");for(var l=0,s=$.length;l<s;l++){e.yield1(i,$[l])}return $},K.$$arity=0),e.defn(Ye,"$each_index",Y=function(){var r,t,n,$=this,a=Y.$$p,i=a||o;if(Y.$$p=null,i===o)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=$,n.$$arity=0,n),r).call(t,"each_index");for(var l=0,s=$.length;l<s;l++){e.yield1(i,l)}return $},Y.$$arity=0),e.defn(Ye,"$empty?",V=function(){var e=this;return 0===e.length},V.$$arity=0),e.defn(Ye,"$eql?",J=function(e){function r(e,t){var $,a,i,o;if(!t.$$is_array)return!1;if(t=t.$to_a(),e.length!==t.length)return!1;for(n[e.$object_id()]=!0,$=0,a=e.length;$<a;$++)if(i=e[$],
o=t[$],i.$$is_array){if(o.$$is_array&&o.length!==i.length)return!1;if(!n.hasOwnProperty(i.$object_id())&&!r(i,o))return!1}else if(!i["$eql?"](o))return!1;return!0}var t=this,n={};return r(t,e)},J.$$arity=1),e.defn(Ye,"$fetch",W=function(e,r){var t=this,n=W.$$p,$=n||o;W.$$p=null;var a=e;return e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),e<0&&(e+=t.length),e>=0&&e<t.length?t[e]:$!==o?$(a):null!=r?r:void(0===t.length?t.$raise(Je.get("IndexError"),"index "+a+" outside of array bounds: 0...0"):t.$raise(Je.get("IndexError"),"index "+a+" outside of array bounds: -"+t.length+"..."+t.length))},W.$$arity=-2),e.defn(Ye,"$fill",Z=function(r){var t,n,$,a=this,i=Z.$$p,l=i||o,s=o,u=o,c=o,f=o,p=o,_=arguments.length,h=_-0;h<0&&(h=0),$=new Array(h);for(var d=0;d<_;d++)$[d-0]=arguments[d];Z.$$p=null;var g,v,y;if(l!==!1&&l!==o&&null!=l?((t=$.length>2)===o||null==t||t.$$is_boolean&&1!=t||a.$raise(Je.get("ArgumentError"),"wrong number of arguments ("+$.$length()+" for 0..2)"),n=$,t=e.to_ary(n),s=null==t[0]?o:t[0],u=null==t[1]?o:t[1],n):((t=0==$.length)===o||null==t||t.$$is_boolean&&1!=t?(t=$.length>3)===o||null==t||t.$$is_boolean&&1!=t||a.$raise(Je.get("ArgumentError"),"wrong number of arguments ("+$.$length()+" for 1..3)"):a.$raise(Je.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),n=$,t=e.to_ary(n),c=null==t[0]?o:t[0],s=null==t[1]?o:t[1],u=null==t[2]?o:t[2],n),(t=Je.get("Range")["$==="](s))===o||null==t||t.$$is_boolean&&1!=t)if(s!==!1&&s!==o&&null!=s)if(f=Je.get("Opal").$coerce_to(s,Je.get("Integer"),"to_int"),(t=f<0)===o||null==t||t.$$is_boolean&&1!=t||(f+=a.length),(t=f<0)===o||null==t||t.$$is_boolean&&1!=t||(f=0),u!==!1&&u!==o&&null!=u){if(p=Je.get("Opal").$coerce_to(u,Je.get("Integer"),"to_int"),(t=0==p)!==o&&null!=t&&(!t.$$is_boolean||1==t))return a;p+=f}else p=a.length;else f=0,p=a.length;else if(u!==!1&&u!==o&&null!=u&&a.$raise(Je.get("TypeError"),"length invalid with range"),f=Je.get("Opal").$coerce_to(s.$begin(),Je.get("Integer"),"to_int"),(t=f<0)===o||null==t||t.$$is_boolean&&1!=t||(f+=a.length),(t=f<0)===o||null==t||t.$$is_boolean&&1!=t||a.$raise(Je.get("RangeError"),""+s.$inspect()+" out of range"),p=Je.get("Opal").$coerce_to(s.$end(),Je.get("Integer"),"to_int"),(t=p<0)===o||null==t||t.$$is_boolean&&1!=t||(p+=a.length),((t=s["$exclude_end?"]())===o||null==t||t.$$is_boolean&&1!=t)&&(p+=1),(t=p<=f)!==o&&null!=t&&(!t.$$is_boolean||1==t))return a;if((t=f>a.length)!==o&&null!=t&&(!t.$$is_boolean||1==t))for(g=a.length;g<p;g++)a[g]=o;if((t=p>a.length)===o||null==t||t.$$is_boolean&&1!=t||(a.length=p),l!==!1&&l!==o&&null!=l)for(v=a.length;f<p;f++)y=l(f),a[f]=y;else for(v=a.length;f<p;f++)a[f]=c;return a},Z.$$arity=-1),e.defn(Ye,"$first",Q=function(e){var r=this;return null==e?0===r.length?o:r[0]:(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),e<0&&r.$raise(Je.get("ArgumentError"),"negative array size"),r.slice(0,e))},Q.$$arity=-1),e.defn(Ye,"$flatten",ee=function(e){function r(e,n){var $,a,i,l,s=[];for(e=e.$to_a(),$=0,a=e.length;$<a;$++)if(i=e[$],Je.get("Opal")["$respond_to?"](i,"to_ary"))if(l=i.$to_ary(),l!==o)switch(l.$$is_array||t.$raise(Je.get("TypeError")),l===t&&t.$raise(Je.get("ArgumentError")),n){case void 0:s=s.concat(r(l));break;case 0:s.push(l);break;default:s.push.apply(s,r(l,n-1))}else s.push(i);else s.push(i);return s}var t=this;return void 0!==e&&(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int")),f(r(t,e),t.$class())},ee.$$arity=-1),e.defn(Ye,"$flatten!",re=function(e){var r=this,t=r.$flatten(e);if(r.length==t.length){for(var n=0,$=r.length;n<$&&r[n]===t[n];n++);if(n==$)return o}return r.$replace(t),r},re.$$arity=-1),e.defn(Ye,"$hash",te=function(){var r,t,n,$=this,a=void 0==e.hash_ids,i=["A"],o=$.$object_id();try{if(a&&(e.hash_ids={}),e.hash_ids.hasOwnProperty(o))return"self";for(n in e.hash_ids)if(e.hash_ids.hasOwnProperty(n)&&(r=e.hash_ids[n],$["$eql?"](r)))return"self";for(e.hash_ids[o]=$,t=0;t<$.length;t++)r=$[t],i.push(r.$hash());return i.join(",")}finally{a&&delete e.hash_ids}},te.$$arity=0),e.defn(Ye,"$include?",ne=function(e){for(var r=this,t=0,n=r.length;t<n;t++)if(r[t]["$=="](e))return!0;return!1},ne.$$arity=1),e.defn(Ye,"$index",$e=function(e){var r=this,t=$e.$$p,n=t||o;$e.$$p=null;var $,a,i;if(null!=e){for($=0,a=r.length;$<a;$++)if(r[$]["$=="](e))return $}else{if(n===o)return r.$enum_for("index");for($=0,a=r.length;$<a;$++)if(i=n(r[$]),i!==!1&&i!==o)return $}return o},$e.$$arity=-1),e.defn(Ye,"$insert",ae=function(e,r){var t,n=this,$=arguments.length,a=$-1;a<0&&(a=0),t=new Array(a);for(var i=1;i<$;i++)t[i-1]=arguments[i];if(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),t.length>0){if(e<0&&(e+=n.length+1,e<0&&n.$raise(Je.get("IndexError"),""+e+" is out of bounds")),e>n.length)for(var l=n.length;l<e;l++)n.push(o);n.splice.apply(n,[e,0].concat(t))}return n},ae.$$arity=-2),e.defn(Ye,"$inspect",ie=function(){for(var e=this,r=[],t=e.$__id__(),n=0,$=e.length;n<$;n++){var a=e["$[]"](n);a.$__id__()===t?r.push("[...]"):r.push(a.$inspect())}return"["+r.join(", ")+"]"},ie.$$arity=0),e.defn(Ye,"$join",oe=function(e){var r,t=this;if(null==u[","]&&(u[","]=o),null==e&&(e=o),(r=0===t.length)!==o&&null!=r&&(!r.$$is_boolean||1==r))return"";(r=e===o)===o||null==r||r.$$is_boolean&&1!=r||(e=u[","]);var n,$,a,i,l=[];for(n=0,$=t.length;n<$;n++)a=t[n],Je.get("Opal")["$respond_to?"](a,"to_str")&&(i=a.$to_str(),i!==o)?l.push(i.$to_s()):Je.get("Opal")["$respond_to?"](a,"to_ary")&&(i=a.$to_ary(),i===t&&t.$raise(Je.get("ArgumentError")),i!==o)?l.push(i.$join(e)):Je.get("Opal")["$respond_to?"](a,"to_s")&&(i=a.$to_s(),i!==o)?l.push(i):t.$raise(Je.get("NoMethodError").$new(""+Je.get("Opal").$inspect(a)+" doesn't respond to #to_str, #to_ary or #to_s","to_str"));return e===o?l.join(""):l.join(Je.get("Opal")["$coerce_to!"](e,Je.get("String"),"to_str").$to_s())},oe.$$arity=-1),e.defn(Ye,"$keep_if",le=function(){var e,r,t,n=this,$=le.$$p,a=$||o;if(le.$$p=null,a===o)return(e=(r=n).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=n,t.$$arity=0,t),e).call(r,"keep_if");for(var i,l=0,s=n.length;l<s;l++)i=a(n[l]),i!==!1&&i!==o||(n.splice(l,1),s--,l--);return n},le.$$arity=0),e.defn(Ye,"$last",se=function(e){var r=this;return null==e?0===r.length?o:r[r.length-1]:(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),e<0&&r.$raise(Je.get("ArgumentError"),"negative array size"),e>r.length&&(e=r.length),r.slice(r.length-e,r.length))},se.$$arity=-1),e.defn(Ye,"$length",ue=function(){var e=this;return e.length},ue.$$arity=0),e.alias(Ye,"map","collect"),e.alias(Ye,"map!","collect!"),e.defn(Ye,"$permutation",ce=function(r){var t,n,$,a=this,i=ce.$$p,l=i||o,s=o,u=o;if(ce.$$p=null,l===o)return(t=(n=a).$enum_for,t.$$p=($=function(){var e=$.$$s||this;return _(e.length,void 0===r?e.length:r)},$.$$s=a,$.$$arity=0,$),t).call(n,"permutation",r);var c,f,p;if(r=void 0===r?a.length:Je.get("Opal").$coerce_to(r,Je.get("Integer"),"to_int"),r<0||a.length<r);else if(0===r)e.yield1(l,[]);else if(1===r)for(var h=0;h<a.length;h++)e.yield1(l,[a[h]]);else s=Je.get("Array").$new(r),u=Je.get("Array").$new(a.length,!1),c=function(r,t,n,$,i){a=this;for(var o=0;o<a.length;o++)if($["$[]"](o)["$!"]())if(t[n]=o,n<r-1)$[o]=!0,c.call(a,r,t,n+1,$,i),$[o]=!1;else{p=[];for(var l=0;l<t.length;l++)p.push(a[t[l]]);e.yield1(i,p)}},l!==o?(f=a.slice(),c.call(f,r,s,0,u,l)):c.call(a,r,s,0,u,l);return a},ce.$$arity=-1),e.defn(Ye,"$repeated_permutation",fe=function(r){function t(r,n,$){if(n.length==r){var a=n.slice();return void e.yield1(u,a)}for(var i=0;i<$.length;i++)n.push($[i]),t(r,n,$),n.pop()}var $,a,i,l=this,s=fe.$$p,u=s||o,c=o;return fe.$$p=null,c=Je.get("Opal")["$coerce_to!"](r,Je.get("Integer"),"to_int"),u===o?($=(a=l).$enum_for,$.$$p=(i=function(){var e,r=i.$$s||this;return(e=n(c,0))===o||null==e||e.$$is_boolean&&1!=e?0:r.$size()["$**"](c)},i.$$s=l,i.$$arity=0,i),$).call(a,"repeated_permutation",c):(t(c,[],l.slice()),l)},fe.$$arity=1),e.defn(Ye,"$pop",pe=function(e){var r,t=this;return(r=void 0===e)===o||null==r||r.$$is_boolean&&1!=r?(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),(r=e<0)===o||null==r||r.$$is_boolean&&1!=r||t.$raise(Je.get("ArgumentError"),"negative array size"),(r=0===t.length)===o||null==r||r.$$is_boolean&&1!=r?(r=e>t.length)===o||null==r||r.$$is_boolean&&1!=r?t.splice(t.length-e,t.length):t.splice(0,t.length):[]):(r=0===t.length)===o||null==r||r.$$is_boolean&&1!=r?t.pop():o},pe.$$arity=-1),e.defn(Ye,"$product",_e=function(r){var t,n=this,$=_e.$$p,a=$||o,i=arguments.length,l=i-0;l<0&&(l=0),t=new Array(l);for(var s=0;s<i;s++)t[s-0]=arguments[s];_e.$$p=null;var u,c,f,p,_=a!==o?null:[],h=t.length+1,d=new Array(h),g=new Array(h),v=new Array(h),y=1;for(v[0]=n,u=1;u<h;u++)v[u]=Je.get("Opal").$coerce_to(t[u-1],Je.get("Array"),"to_ary");for(u=0;u<h;u++){if(p=v[u].length,0===p)return _||n;y*=p,y>2147483647&&n.$raise(Je.get("RangeError"),"too big to product"),g[u]=p,d[u]=0}e:for(;;){for(f=[],u=0;u<h;u++)f.push(v[u][d[u]]);for(_?_.push(f):e.yield1(a,f),c=h-1,d[c]++;d[c]===g[c];){if(d[c]=0,--c<0)break e;d[c]++}}return _||n},_e.$$arity=-1),e.defn(Ye,"$push",he=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=0,o=r.length;i<o;i++)t.push(r[i]);return t},he.$$arity=-1),e.defn(Ye,"$rassoc",de=function(e){for(var r,t=this,n=0,$=t.length;n<$;n++)if(r=t[n],r.length&&void 0!==r[1]&&r[1]["$=="](e))return r;return o},de.$$arity=1),e.defn(Ye,"$reject",ge=function(){var e,r,t,n=this,$=ge.$$p,a=$||o;if(ge.$$p=null,a===o)return(e=(r=n).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=n,t.$$arity=0,t),e).call(r,"reject");for(var i,l=[],s=0,u=n.length;s<u;s++)i=a(n[s]),i!==!1&&i!==o||l.push(n[s]);return l},ge.$$arity=0),e.defn(Ye,"$reject!",ve=function(){var e,r,t,n,$=this,a=ve.$$p,i=a||o,l=o;return ve.$$p=null,i===o?(e=(r=$).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=$,t.$$arity=0,t),e).call(r,"reject!"):(l=$.$length(),(e=(n=$).$delete_if,e.$$p=i.$to_proc(),e).call(n),$.$length()["$=="](l)?o:$)},ve.$$arity=0),e.defn(Ye,"$replace",ye=function(e){var r,t=this;return e=(r=Je.get("Array")["$==="](e))===o||null==r||r.$$is_boolean&&1!=r?Je.get("Opal").$coerce_to(e,Je.get("Array"),"to_ary").$to_a():e.$to_a(),t.splice(0,t.length),t.push.apply(t,e),t},ye.$$arity=1),e.defn(Ye,"$reverse",me=function(){var e=this;return e.slice(0).reverse()},me.$$arity=0),e.defn(Ye,"$reverse!",be=function(){var e=this;return e.reverse()},be.$$arity=0),e.defn(Ye,"$reverse_each",Ee=function(){var e,r,t,n,$=this,a=Ee.$$p,i=a||o;return Ee.$$p=null,i===o?(e=(r=$).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=$,t.$$arity=0,t),e).call(r,"reverse_each"):((e=(n=$.$reverse()).$each,e.$$p=i.$to_proc(),e).call(n),$)},Ee.$$arity=0),e.defn(Ye,"$rindex",we=function(e){var r=this,t=we.$$p,n=t||o;we.$$p=null;var $,a;if(null!=e){for($=r.length-1;$>=0&&!($>=r.length);$--)if(r[$]["$=="](e))return $}else if(n!==o){for($=r.length-1;$>=0&&!($>=r.length);$--)if(a=n(r[$]),a!==!1&&a!==o)return $}else if(null==e)return r.$enum_for("rindex");return o},we.$$arity=-1),e.defn(Ye,"$rotate",Oe=function(e){var r=this;null==e&&(e=1),e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int");var t,n,$,a;return 1===r.length?r.slice():0===r.length?[]:(t=r.slice(),n=e%t.length,$=t.slice(n),a=t.slice(0,n),$.concat(a))},Oe.$$arity=-1),e.defn(Ye,"$rotate!",Ae=function(e){var r=this,t=o;return null==e&&(e=1),0===r.length||1===r.length?r:(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),t=r.$rotate(e),r.$replace(t))},Ae.$$arity=-1),function(r,t){function n(){}var $,a,i=n=l(r,t,"SampleRandom",n),s=i.$$proto,u=i.$$scope;return s.rng=o,e.defn(i,"$initialize",$=function(e){var r=this;return r.rng=e},$.$$arity=1),e.defn(i,"$rand",a=function(e){var r,t=this,n=o;return n=u.get("Opal").$coerce_to(t.rng.$rand(e),u.get("Integer"),"to_int"),(r=n<0)===o||null==r||r.$$is_boolean&&1!=r||t.$raise(u.get("RangeError"),"random value must be >= 0"),((r=n<e)===o||null==r||r.$$is_boolean&&1!=r)&&t.$raise(u.get("RangeError"),"random value must be less than Array size"),n},a.$$arity=1),o&&"rand"}(Je.base,null),e.defn(Ye,"$sample",xe=function(e,r){var t,n,$=this,a=o,i=o;if((t=void 0===e)!==o&&null!=t&&(!t.$$is_boolean||1==t))return $.$at(Je.get("Kernel").$rand($.length));if((t=void 0===r)===o||null==t||t.$$is_boolean&&1!=t?(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),r=Je.get("Opal").$coerce_to(r,Je.get("Hash"),"to_hash")):(t=a=Je.get("Opal")["$coerce_to?"](e,Je.get("Hash"),"to_hash"))===o||null==t||t.$$is_boolean&&1!=t?(r=o,e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int")):(r=a,e=o),(t=(n=e!==!1&&e!==o&&null!=e)?e<0:e)===o||null==t||t.$$is_boolean&&1!=t||$.$raise(Je.get("ArgumentError"),"count must be greater than 0"),r!==!1&&r!==o&&null!=r&&(i=r["$[]"]("random")),i=(t=(n=i!==!1&&i!==o&&null!=i)?i["$respond_to?"]("rand"):i)===o||null==t||t.$$is_boolean&&1!=t?Je.get("Kernel"):Je.get("SampleRandom").$new(i),e===!1||e===o||null==e)return $[i.$rand($.length)];var l,s,u,c,f,p,_,h;switch(e>$.length&&(e=$.length),e){case 0:return[];case 1:return[$[i.$rand($.length)]];case 2:return c=i.$rand($.length),f=i.$rand($.length),c===f&&(f=0===c?c+1:c-1),[$[c],$[f]];default:if($.length/e>3){for(l=!1,s=0,u=Je.get("Array").$new(e),c=1,u[0]=i.$rand($.length);c<e;){for(p=i.$rand($.length),f=0;f<c;){for(;p===u[f];){if(s++,s>100){l=!0;break}p=i.$rand($.length)}if(l)break;f++}if(l)break;u[c]=p,c++}if(!l){for(c=0;c<e;)u[c]=$[u[c]],c++;return u}}u=$.slice();for(var d=0;d<e;d++)_=i.$rand($.length),h=u[d],u[d]=u[_],u[_]=h;return e===$.length?u:u["$[]"](0,e)}},xe.$$arity=-1),e.defn(Ye,"$select",Te=function(){var r,t,n,$=this,a=Te.$$p,i=a||o;if(Te.$$p=null,i===o)return(r=(t=$).$enum_for,r.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=$,n.$$arity=0,n),r).call(t,"select");for(var l,s,u=[],c=0,f=$.length;c<f;c++)l=$[c],s=e.yield1(i,l),s!==!1&&s!==o&&u.push(l);return u},Te.$$arity=0),e.defn(Ye,"$select!",Me=function(){var e,r,t,n,$=this,a=Me.$$p,i=a||o;if(Me.$$p=null,i===o)return(e=(r=$).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=$,t.$$arity=0,t),e).call(r,"select!");var l=$.length;return(e=(n=$).$keep_if,e.$$p=i.$to_proc(),e).call(n),$.length===l?o:$},Me.$$arity=0),e.defn(Ye,"$shift",Pe=function(e){var r,t=this;return(r=void 0===e)===o||null==r||r.$$is_boolean&&1!=r?(e=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),(r=e<0)===o||null==r||r.$$is_boolean&&1!=r||t.$raise(Je.get("ArgumentError"),"negative array size"),(r=0===t.length)===o||null==r||r.$$is_boolean&&1!=r?t.splice(0,e):[]):(r=0===t.length)===o||null==r||r.$$is_boolean&&1!=r?t.shift():o},Pe.$$arity=-1),e.alias(Ye,"size","length"),e.defn(Ye,"$shuffle",ke=function(e){var r=this;return r.$dup().$to_a()["$shuffle!"](e)},ke.$$arity=-1),e.defn(Ye,"$shuffle!",Ie=function(e){var r,t,n,$=this,a=$.length;for(void 0!==e&&(e=Je.get("Opal")["$coerce_to?"](e,Je.get("Hash"),"to_hash"),e!==o&&(e=e["$[]"]("random"),e!==o&&e["$respond_to?"]("rand")&&(r=e)));a;)r?(t=r.$rand(a).$to_int(),t<0&&$.$raise(Je.get("RangeError"),"random number too small "+t),t>=a&&$.$raise(Je.get("RangeError"),"random number too big "+t)):t=Math.floor(Math.random()*a),n=$[--a],$[a]=$[t],$[t]=n;return $},Ie.$$arity=-1),e.alias(Ye,"slice","[]"),e.defn(Ye,"$slice!",Ne=function(e,r){var t,n=this,$=o,a=o,i=o,l=o,s=o;if($=o,(t=void 0===r)===o||null==t||t.$$is_boolean&&1!=t){if(s=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),r=Je.get("Opal").$coerce_to(r,Je.get("Integer"),"to_int"),r<0)return o;$=n["$[]"](s,r),s<0&&(s+=n.length),s+r>n.length&&(r=n.length-s),s<n.length&&s>=0&&n.splice(s,r)}else if((t=Je.get("Range")["$==="](e))===o||null==t||t.$$is_boolean&&1!=t){if(s=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),s<0&&(s+=n.length),s<0||s>=n.length)return o;$=n[s],0===s?n.shift():n.splice(s,1)}else{a=e,$=n["$[]"](a),i=Je.get("Opal").$coerce_to(a.$begin(),Je.get("Integer"),"to_int"),l=Je.get("Opal").$coerce_to(a.$end(),Je.get("Integer"),"to_int"),i<0&&(i+=n.length),l<0?l+=n.length:l>=n.length&&(l=n.length-1,a.exclude&&(l+=1));var u=l-i;a.exclude?l-=1:u+=1,i<n.length&&i>=0&&l<n.length&&l>=0&&u>0&&n.splice(i,u)}return $},Ne.$$arity=-2),e.defn(Ye,"$sort",Se=function(){var e,t=this,n=Se.$$p,a=n||o;return Se.$$p=null,(e=t.length>1)===o||null==e||e.$$is_boolean&&1!=e?t:(a===o&&(a=function(e,r){return e["$<=>"](r)}),t.slice().sort(function(e,n){var i=a(e,n);return i===o&&t.$raise(Je.get("ArgumentError"),"comparison of "+e.$inspect()+" with "+n.$inspect()+" failed"),r(i,0)?1:$(i,0)?-1:0}))},Se.$$arity=0),e.defn(Ye,"$sort!",ze=function(){var e,r,t=this,n=ze.$$p,$=n||o;ze.$$p=null;var a;a=$!==o?(e=(r=t.slice()).$sort,e.$$p=$.$to_proc(),e).call(r):t.slice().$sort(),t.length=0;for(var i=0,l=a.length;i<l;i++)t.push(a[i]);return t},ze.$$arity=0),e.defn(Ye,"$sort_by!",Ce=function(){var e,r,t,n,$=this,a=Ce.$$p,i=a||o;return Ce.$$p=null,i===o?(e=(r=$).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=$,t.$$arity=0,t),e).call(r,"sort_by!"):$.$replace((e=(n=$).$sort_by,e.$$p=i.$to_proc(),e).call(n))},Ce.$$arity=0),e.defn(Ye,"$take",Re=function(e){var r=this;return e<0&&r.$raise(Je.get("ArgumentError")),r.slice(0,e)},Re.$$arity=1),e.defn(Ye,"$take_while",qe=function(){var e=this,r=qe.$$p,t=r||o;qe.$$p=null;for(var n,$,a=[],i=0,l=e.length;i<l;i++){if(n=e[i],$=t(n),$===!1||$===o)return a;a.push(n)}return a},qe.$$arity=0),e.defn(Ye,"$to_a",je=function(){var e=this;return e},je.$$arity=0),e.alias(Ye,"to_ary","to_a"),e.defn(Ye,"$to_h",Fe=function(){var r,t,n,$,a=this,i=a.length,o=s([],{});for(r=0;r<i;r++)t=Je.get("Opal")["$coerce_to?"](a[r],Je.get("Array"),"to_ary"),t.$$is_array||a.$raise(Je.get("TypeError"),"wrong element type "+t.$class()+" at "+r+" (expected array)"),2!==t.length&&a.$raise(Je.get("ArgumentError"),"wrong array length at "+r+" (expected 2, was "+t.$length()+")"),n=t[0],$=t[1],e.hash_put(o,n,$);return o},Fe.$$arity=0),e.alias(Ye,"to_s","inspect"),e.defn(Ye,"$transpose",Le=function(){var e,r,t,n=this,$=o,a=o;return(e=n["$empty?"]())===o||null==e||e.$$is_boolean&&1!=e?($=[],a=o,(e=(r=n).$each,e.$$p=(t=function(e){var r,n,i,l=t.$$s||this;return null==e&&(e=o),e=(r=Je.get("Array")["$==="](e))===o||null==r||r.$$is_boolean&&1!=r?Je.get("Opal").$coerce_to(e,Je.get("Array"),"to_ary").$to_a():e.$to_a(),(r=a)!==!1&&r!==o&&null!=r?r:a=e.length,(r=e.length["$!="](a))===o||null==r||r.$$is_boolean&&1!=r||l.$raise(Je.get("IndexError"),"element size differs ("+e.length+" should be "+a),(r=(n=e.length).$times,r.$$p=(i=function(r){var t,n,a,l=(i.$$s||this,o);return null==r&&(r=o),t=r,n=$,l=(a=n["$[]"](t))!==!1&&a!==o&&null!=a?a:n["$[]="](t,[]),l["$<<"](e.$at(r))},i.$$s=l,i.$$arity=1,i),r).call(n)},t.$$s=n,t.$$arity=1,t),e).call(r),$):[]},Le.$$arity=0),e.defn(Ye,"$uniq",De=function(){var r=this,t=De.$$p,n=t||o;De.$$p=null;var $,a,i,l,u=s([],{});if(n===o)for($=0,a=r.length;$<a;$++)i=r[$],void 0===e.hash_get(u,i)&&e.hash_put(u,i,i);else for($=0,a=r.length;$<a;$++)i=r[$],l=e.yield1(n,i),void 0===e.hash_get(u,l)&&e.hash_put(u,l,i);return f(u.$values(),r.$class())},De.$$arity=0),e.defn(Ye,"$uniq!",Be=function(){var r=this,t=Be.$$p,n=t||o;Be.$$p=null;var $,a,i,l,u=r.length,c=s([],{});for($=0,a=u;$<a;$++)i=r[$],l=n===o?i:e.yield1(n,i),void 0!==e.hash_get(c,l)?(r.splice($,1),a--,$--):e.hash_put(c,l,i);return r.length===u?o:r},Be.$$arity=0),e.defn(Ye,"$unshift",Ue=function(e){var r,t=this,n=arguments.length,$=n-0;$<0&&($=0),r=new Array($);for(var a=0;a<n;a++)r[a-0]=arguments[a];for(var i=r.length-1;i>=0;i--)t.unshift(r[i]);return t},Ue.$$arity=-1),e.defn(Ye,"$values_at",He=function(e){var r,t,n,$,a=this,i=o,l=arguments.length,s=l-0;s<0&&(s=0),$=new Array(s);for(var u=0;u<l;u++)$[u-0]=arguments[u];return i=[],(r=(t=$).$each,r.$$p=(n=function(e){var r,t,$,a=n.$$s||this,l=o,s=o,u=o;return null==e&&(e=o),(r=e["$kind_of?"](Je.get("Range")))===o||null==r||r.$$is_boolean&&1!=r?(u=Je.get("Opal").$coerce_to(e,Je.get("Integer"),"to_int"),i["$<<"](a.$at(u))):(l=Je.get("Opal").$coerce_to(e.$last(),Je.get("Integer"),"to_int"),s=Je.get("Opal").$coerce_to(e.$first(),Je.get("Integer"),"to_int"),s<0?(s+=a.length,o):(l<0&&(l+=a.length),e["$exclude_end?"]()&&l--,l<s?o:(r=(t=s).$upto,r.$$p=($=function(e){var r=$.$$s||this;return null==e&&(e=o),i["$<<"](r.$at(e))},$.$$s=a,$.$$arity=1,$),r).call(t,l)))},n.$$s=a,n.$$arity=1,n),r).call(t),i},He.$$arity=-1),e.defn(Ye,"$zip",Ge=function(e){var r,t,n=this,$=Ge.$$p,a=$||o,i=arguments.length,l=i-0;l<0&&(l=0),t=new Array(l);for(var s=0;s<i;s++)t[s-0]=arguments[s];Ge.$$p=null;var u,c,f,p,_,h=[],d=n.length;for(p=0,_=t.length;p<_;p++)c=t[p],c.$$is_array||(c.$$is_enumerator?c.$size()===1/0?t[p]=c.$take(d):t[p]=c.$to_a():t[p]=((r=Je.get("Opal")["$coerce_to?"](c,Je.get("Array"),"to_ary"))!==!1&&r!==o&&null!=r?r:Je.get("Opal")["$coerce_to!"](c,Je.get("Enumerator"),"each")).$to_a());for(f=0;f<d;f++){for(u=[n[f]],p=0,_=t.length;p<_;p++)c=t[p][f],null==c&&(c=o),u[p+1]=c;h[f]=u}if(a!==o){for(f=0;f<d;f++)a(h[f]);return o}return h},Ge.$$arity=-1),e.defs(Ye,"$inherited",Xe=function(e){e.$$proto.$to_a=function(){return this.slice(0,this.length)}},Xe.$$arity=1),e.defn(Ye,"$instance_variables",Ke=function(){var r,t,n,$,a,i=this,l=Ke.$$p,s=o,u=o;for(Ke.$$p=null,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return(r=(t=(a=i,$=e.find_super_dispatcher(i,"instance_variables",Ke,!1),$.$$p=l,$).apply(a,s)).$reject,r.$$p=(n=function(e){var r;n.$$s||this;return null==e&&(e=o),(r=/^@\d+$/.test(e))!==!1&&r!==o&&null!=r?r:e["$=="]("@length")},n.$$s=i,n.$$arity=1,n),r).call(t)},Ke.$$arity=0),Je.get("Opal").$pristine(Ye,"allocate","copy_instance_variables","initialize_dup")}(i.base,Array)},Opal.modules["corelib/hash"]=function(e){var r=e.top,t=e,n=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$include","$coerce_to?","$[]","$merge!","$allocate","$raise","$==","$coerce_to!","$lambda?","$abs","$arity","$call","$enum_for","$size","$inspect","$flatten","$eql?","$default","$to_proc","$dup","$===","$default_proc","$default_proc=","$default=","$alias_method"]),r.$require("corelib/enumerable"),function(r,t){function a(){}var i,o,l,s,u,c,f,p,_,h,d,g,v,y,m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R,q,j,F,L,D,B,U,H,G,X,K,Y,V,J,W,Z=a=$(r,t,"Hash",a),Q=Z.$$proto,ee=Z.$$scope;Z.$include(ee.get("Enumerable")),Q.$$is_hash=!0,e.defs(Z,"$[]",i=function(e){var r,t=this,$=arguments.length,a=$-0;a<0&&(a=0),r=new Array(a);for(var i=0;i<$;i++)r[i-0]=arguments[i];var o,l,s=r.length;if(1===s){if(o=ee.get("Opal")["$coerce_to?"](r["$[]"](0),ee.get("Hash"),"to_hash"),o!==n)return t.$allocate()["$merge!"](o);for(r=ee.get("Opal")["$coerce_to?"](r["$[]"](0),ee.get("Array"),"to_ary"),r===n&&t.$raise(ee.get("ArgumentError"),"odd number of arguments for Hash"),s=r.length,o=t.$allocate(),l=0;l<s;l++)if(r[l].$$is_array)switch(r[l].length){case 1:o.$store(r[l][0],n);break;case 2:o.$store(r[l][0],r[l][1]);break;default:t.$raise(ee.get("ArgumentError"),"invalid number of elements ("+r[l].length+" for 1..2)")}return o}for(s%2!==0&&t.$raise(ee.get("ArgumentError"),"odd number of arguments for Hash"),o=t.$allocate(),l=0;l<s;l+=2)o.$store(r[l],r[l+1]);return o},i.$$arity=-1),e.defs(Z,"$allocate",o=function(){var r=this,t=new r.$$alloc;return e.hash_init(t),t.$$none=n,t.$$proc=n,t},o.$$arity=0),e.defs(Z,"$try_convert",l=function(e){return ee.get("Opal")["$coerce_to?"](e,ee.get("Hash"),"to_hash")},l.$$arity=1),e.defn(Z,"$initialize",s=function(e){var r=this,t=s.$$p,$=t||n;return s.$$p=null,void 0!==e&&$!==n&&r.$raise(ee.get("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=void 0===e?n:e,r.$$proc=$,r},s.$$arity=-1),e.defn(Z,"$==",u=function(r){var t=this;if(t===r)return!0;if(!r.$$is_hash)return!1;if(t.$$keys.length!==r.$$keys.length)return!1;for(var n,$,a,i=0,o=t.$$keys,l=o.length;i<l;i++)if(n=o[i],n.$$is_string?($=t.$$smap[n],a=r.$$smap[n]):($=n.value,a=e.hash_get(r,n.key)),void 0===a||!$["$eql?"](a))return!1;return!0},u.$$arity=1),e.defn(Z,"$[]",c=function(r){var t=this,n=e.hash_get(t,r);return void 0!==n?n:t.$default(r)},c.$$arity=1),e.defn(Z,"$[]=",f=function(r,t){var n=this;return e.hash_put(n,r,t),t},f.$$arity=2),e.defn(Z,"$assoc",p=function(e){for(var r,t=this,$=0,a=t.$$keys,i=a.length;$<i;$++)if(r=a[$],r.$$is_string){if(r["$=="](e))return[r,t.$$smap[r]]}else if(r.key["$=="](e))return[r.key,r.value];return n},p.$$arity=1),e.defn(Z,"$clear",_=function(){var r=this;return e.hash_init(r),r},_.$$arity=0),e.defn(Z,"$clone",h=function(){var r=this,t=new r.$$class.$$alloc;return e.hash_init(t),e.hash_clone(r,t),t},h.$$arity=0),e.defn(Z,"$default",d=function(e){var r=this;return void 0!==e&&r.$$proc!==n&&void 0!==r.$$proc?r.$$proc.$call(r,e):void 0===r.$$none?n:r.$$none},d.$$arity=-1),e.defn(Z,"$default=",g=function(e){var r=this;return r.$$proc=n,r.$$none=e,e},g.$$arity=1),e.defn(Z,"$default_proc",v=function(){var e=this;return void 0!==e.$$proc?e.$$proc:n},v.$$arity=0),e.defn(Z,"$default_proc=",y=function(e){var r=this;return e!==n&&(e=ee.get("Opal")["$coerce_to!"](e,ee.get("Proc"),"to_proc"),e["$lambda?"]()&&2!==e.$arity().$abs()&&r.$raise(ee.get("TypeError"),"default_proc takes two arguments")),r.$$none=n,r.$$proc=e,e},y.$$arity=1),e.defn(Z,"$delete",m=function(r){var t=this,$=m.$$p,a=$||n;m.$$p=null;var i=e.hash_delete(t,r);return void 0!==i?i:a!==n?a.$call(r):n},m.$$arity=1),e.defn(Z,"$delete_if",b=function(){var r,t,$,a=this,i=b.$$p,o=i||n;if(b.$$p=null,o===!1||o===n||null==o)return(r=(t=a).$enum_for,r.$$p=($=function(){var e=$.$$s||this;return e.$size()},$.$$s=a,$.$$arity=0,$),r).call(t,"delete_if");for(var l,s,u,c=0,f=a.$$keys,p=f.length;c<p;c++)l=f[c],l.$$is_string?s=a.$$smap[l]:(s=l.value,l=l.key),u=o(l,s),u!==!1&&u!==n&&void 0!==e.hash_delete(a,l)&&(p--,c--);return a},b.$$arity=0),e.alias(Z,"dup","clone"),e.defn(Z,"$each",E=function(){var r,t,$,a=this,i=E.$$p,o=i||n;if(E.$$p=null,o===!1||o===n||null==o)return(r=(t=a).$enum_for,r.$$p=($=function(){var e=$.$$s||this;return e.$size()},$.$$s=a,$.$$arity=0,$),r).call(t,"each");for(var l,s,u=0,c=a.$$keys,f=c.length;u<f;u++)l=c[u],l.$$is_string?s=a.$$smap[l]:(s=l.value,l=l.key),e.yield1(o,[l,s]);return a},E.$$arity=0),e.defn(Z,"$each_key",w=function(){var e,r,t,$=this,a=w.$$p,i=a||n;if(w.$$p=null,i===!1||i===n||null==i)return(e=(r=$).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=$,t.$$arity=0,t),e).call(r,"each_key");for(var o,l=0,s=$.$$keys,u=s.length;l<u;l++)o=s[l],i(o.$$is_string?o:o.key);return $},w.$$arity=0),e.alias(Z,"each_pair","each"),e.defn(Z,"$each_value",O=function(){var e,r,t,$=this,a=O.$$p,i=a||n;if(O.$$p=null,i===!1||i===n||null==i)return(e=(r=$).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e.$size()},t.$$s=$,t.$$arity=0,t),e).call(r,"each_value");for(var o,l=0,s=$.$$keys,u=s.length;l<u;l++)o=s[l],i(o.$$is_string?$.$$smap[o]:o.value);return $},O.$$arity=0),e.defn(Z,"$empty?",A=function(){var e=this;return 0===e.$$keys.length},A.$$arity=0),e.alias(Z,"eql?","=="),e.defn(Z,"$fetch",x=function(r,t){var $=this,a=x.$$p,i=a||n;x.$$p=null;var o=e.hash_get($,r);return void 0!==o?o:i!==n?i(r):void 0!==t?t:$.$raise(ee.get("KeyError"),"key not found: "+r.$inspect())},x.$$arity=-2),e.defn(Z,"$flatten",T=function(e){var r=this;null==e&&(e=1),e=ee.get("Opal")["$coerce_to!"](e,ee.get("Integer"),"to_int");for(var t,n,$=[],a=0,i=r.$$keys,o=i.length;a<o;a++)if(t=i[a],t.$$is_string?n=r.$$smap[t]:(n=t.value,t=t.key),$.push(t),n.$$is_array){if(1===e){$.push(n);continue}$=$.concat(n.$flatten(e-2))}else $.push(n);return $},T.$$arity=-1),e.defn(Z,"$has_key?",M=function(r){var t=this;return void 0!==e.hash_get(t,r)},M.$$arity=1),e.defn(Z,"$has_value?",P=function(e){for(var r,t=this,n=0,$=t.$$keys,a=$.length;n<a;n++)if(r=$[n],(r.$$is_string?t.$$smap[r]:r.value)["$=="](e))return!0;return!1},P.$$arity=1),e.defn(Z,"$hash",k=function(){var r,t,n=this,$=void 0===e.hash_ids,a=n.$object_id(),i=["Hash"];try{if($&&(e.hash_ids={}),e.hash_ids.hasOwnProperty(a))return"self";for(r in e.hash_ids)if(e.hash_ids.hasOwnProperty(r)&&(t=e.hash_ids[r],n["$eql?"](t)))return"self";e.hash_ids[a]=n;for(var o=0,l=n.$$keys,s=l.length;o<s;o++)r=l[o],r.$$is_string?i.push([r,n.$$smap[r].$hash()]):i.push([r.key_hash,r.value.$hash()]);return i.sort().join()}finally{$&&delete e.hash_ids}},k.$$arity=0),e.alias(Z,"include?","has_key?"),e.defn(Z,"$index",I=function(e){for(var r,t,$=this,a=0,i=$.$$keys,o=i.length;a<o;a++)if(r=i[a],r.$$is_string?t=$.$$smap[r]:(t=r.value,r=r.key),t["$=="](e))return r;return n},I.$$arity=1),e.defn(Z,"$indexes",N=function(r){var t,n=this,$=arguments.length,a=$-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<$;i++)t[i-0]=arguments[i];for(var o,l,s=[],u=0,c=t.length;u<c;u++)o=t[u],l=e.hash_get(n,o),void 0!==l?s.push(l):s.push(n.$default());return s},N.$$arity=-1),e.alias(Z,"indices","indexes");var re;return e.defn(Z,"$inspect",S=function(){var e=this,r=void 0===re,t=e.$object_id(),n=[];try{if(r&&(re={}),re.hasOwnProperty(t))return"{...}";re[t]=!0;for(var $,a,i=0,o=e.$$keys,l=o.length;i<l;i++)$=o[i],$.$$is_string?a=e.$$smap[$]:(a=$.value,$=$.key),n.push($.$inspect()+"=>"+a.$inspect());return"{"+n.join(", ")+"}"}finally{r&&(re=void 0)}},S.$$arity=0),e.defn(Z,"$invert",z=function(){for(var r,t,n=this,$=e.hash(),a=0,i=n.$$keys,o=i.length;a<o;a++)r=i[a],r.$$is_string?t=n.$$smap[r]:(t=r.value,r=r.key),e.hash_put($,t,r);return $},z.$$arity=0),e.defn(Z,"$keep_if",C=function(){var r,t,$,a=this,i=C.$$p,o=i||n;if(C.$$p=null,o===!1||o===n||null==o)return(r=(t=a).$enum_for,r.$$p=($=function(){var e=$.$$s||this;return e.$size()},$.$$s=a,$.$$arity=0,$),r).call(t,"keep_if");for(var l,s,u,c=0,f=a.$$keys,p=f.length;c<p;c++)l=f[c],l.$$is_string?s=a.$$smap[l]:(s=l.value,l=l.key),u=o(l,s),u!==!1&&u!==n||void 0!==e.hash_delete(a,l)&&(p--,c--);return a},C.$$arity=0),e.alias(Z,"key","index"),e.alias(Z,"key?","has_key?"),e.defn(Z,"$keys",R=function(){for(var e,r=this,t=[],n=0,$=r.$$keys,a=$.length;n<a;n++)e=$[n],e.$$is_string?t.push(e):t.push(e.key);return t},R.$$arity=0),e.defn(Z,"$length",q=function(){var e=this;return e.$$keys.length},q.$$arity=0),e.alias(Z,"member?","has_key?"),e.defn(Z,"$merge",j=function(e){var r,t,$=this,a=j.$$p,i=a||n;return j.$$p=null,(r=(t=$.$dup())["$merge!"],r.$$p=i.$to_proc(),r).call(t,e)},j.$$arity=1),e.defn(Z,"$merge!",F=function(r){var t=this,$=F.$$p,a=$||n;F.$$p=null,ee.get("Hash")["$==="](r)||(r=ee.get("Opal")["$coerce_to!"](r,ee.get("Hash"),"to_hash"));var i,o,l,s,u=r.$$keys,c=u.length;if(a===n){for(i=0;i<c;i++)o=u[i],o.$$is_string?s=r.$$smap[o]:(s=o.value,o=o.key),e.hash_put(t,o,s);return t}for(i=0;i<c;i++)o=u[i],o.$$is_string?s=r.$$smap[o]:(s=o.value,o=o.key),l=e.hash_get(t,o),void 0!==l?e.hash_put(t,o,a(o,l,s)):e.hash_put(t,o,s);return t},F.$$arity=1),e.defn(Z,"$rassoc",L=function(e){for(var r,t,$=this,a=0,i=$.$$keys,o=i.length;a<o;a++)if(r=i[a],r.$$is_string?t=$.$$smap[r]:(t=r.value,r=r.key),t["$=="](e))return[r,t];return n},L.$$arity=1),e.defn(Z,"$rehash",D=function(){var r=this;return e.hash_rehash(r),r},D.$$arity=0),e.defn(Z,"$reject",B=function(){var r,t,$,a=this,i=B.$$p,o=i||n;if(B.$$p=null,o===!1||o===n||null==o)return(r=(t=a).$enum_for,r.$$p=($=function(){var e=$.$$s||this;return e.$size()},$.$$s=a,$.$$arity=0,$),r).call(t,"reject");for(var l,s,u,c=e.hash(),f=0,p=a.$$keys,_=p.length;f<_;f++)l=p[f],l.$$is_string?s=a.$$smap[l]:(s=l.value,l=l.key),u=o(l,s),u!==!1&&u!==n||e.hash_put(c,l,s);return c},B.$$arity=0),e.defn(Z,"$reject!",U=function(){var r,t,$,a=this,i=U.$$p,o=i||n;if(U.$$p=null,o===!1||o===n||null==o)return(r=(t=a).$enum_for,r.$$p=($=function(){var e=$.$$s||this;return e.$size()},$.$$s=a,$.$$arity=0,$),r).call(t,"reject!");for(var l,s,u,c=!1,f=0,p=a.$$keys,_=p.length;f<_;f++)l=p[f],l.$$is_string?s=a.$$smap[l]:(s=l.value,l=l.key),u=o(l,s),u!==!1&&u!==n&&void 0!==e.hash_delete(a,l)&&(c=!0,_--,f--);return c?a:n},U.$$arity=0),e.defn(Z,"$replace",H=function(r){var t,$,a=this;r=ee.get("Opal")["$coerce_to!"](r,ee.get("Hash"),"to_hash"),e.hash_init(a);for(var i,o,l=0,s=r.$$keys,u=s.length;l<u;l++)i=s[l],i.$$is_string?o=r.$$smap[i]:(o=i.value,i=i.key),e.hash_put(a,i,o);return(t=r.$default_proc())===n||null==t||t.$$is_boolean&&1!=t?(t=[r.$default()],
$=a,$["$default="].apply($,t),t[t.length-1]):(t=[r.$default_proc()],$=a,$["$default_proc="].apply($,t),t[t.length-1]),a},H.$$arity=1),e.defn(Z,"$select",G=function(){var r,t,$,a=this,i=G.$$p,o=i||n;if(G.$$p=null,o===!1||o===n||null==o)return(r=(t=a).$enum_for,r.$$p=($=function(){var e=$.$$s||this;return e.$size()},$.$$s=a,$.$$arity=0,$),r).call(t,"select");for(var l,s,u,c=e.hash(),f=0,p=a.$$keys,_=p.length;f<_;f++)l=p[f],l.$$is_string?s=a.$$smap[l]:(s=l.value,l=l.key),u=o(l,s),u!==!1&&u!==n&&e.hash_put(c,l,s);return c},G.$$arity=0),e.defn(Z,"$select!",X=function(){var r,t,$,a=this,i=X.$$p,o=i||n;if(X.$$p=null,o===!1||o===n||null==o)return(r=(t=a).$enum_for,r.$$p=($=function(){var e=$.$$s||this;return e.$size()},$.$$s=a,$.$$arity=0,$),r).call(t,"select!");for(var l,s,u,c=n,f=0,p=a.$$keys,_=p.length;f<_;f++)l=p[f],l.$$is_string?s=a.$$smap[l]:(s=l.value,l=l.key),u=o(l,s),u!==!1&&u!==n||(void 0!==e.hash_delete(a,l)&&(_--,f--),c=a);return c},X.$$arity=0),e.defn(Z,"$shift",K=function(){var r,t=this,$=t.$$keys;return $.length>0?(r=$[0],r=r.$$is_string?r:r.key,[r,e.hash_delete(t,r)]):t.$default(n)},K.$$arity=0),e.alias(Z,"size","length"),Z.$alias_method("store","[]="),e.defn(Z,"$to_a",Y=function(){for(var e,r,t=this,n=[],$=0,a=t.$$keys,i=a.length;$<i;$++)e=a[$],e.$$is_string?r=t.$$smap[e]:(r=e.value,e=e.key),n.push([e,r]);return n},Y.$$arity=0),e.defn(Z,"$to_h",V=function(){var r=this;if(r.$$class===e.Hash)return r;var t=new e.Hash.$$alloc;return e.hash_init(t),e.hash_clone(r,t),t},V.$$arity=0),e.defn(Z,"$to_hash",J=function(){var e=this;return e},J.$$arity=0),e.alias(Z,"to_s","inspect"),e.alias(Z,"update","merge!"),e.alias(Z,"value?","has_value?"),e.alias(Z,"values_at","indexes"),e.defn(Z,"$values",W=function(){for(var e,r=this,t=[],n=0,$=r.$$keys,a=$.length;n<a;n++)e=$[n],e.$$is_string?t.push(r.$$smap[e]):t.push(e.value);return t},W.$$arity=0),n&&"values"}(t.base,null)},Opal.modules["corelib/number"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e>r:e["$>"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}function n(e,r){return"number"==typeof e&&"number"==typeof r?e+r:e["$+"](r)}function $(e,r){return"number"==typeof e&&"number"==typeof r?e-r:e["$-"](r)}function a(e,r){return"number"==typeof e&&"number"==typeof r?e/r:e["$/"](r)}function i(e,r){return"number"==typeof e&&"number"==typeof r?e*r:e["$*"](r)}function o(e,r){return"number"==typeof e&&"number"==typeof r?e<=r:e["$<="](r)}function l(e,r){return"number"==typeof e&&"number"==typeof r?e>=r:e["$>="](r)}var s=e.top,u=e,c=e.nil,f=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$bridge","$raise","$class","$Float","$respond_to?","$coerce_to!","$__coerced__","$===","$!","$>","$**","$new","$<","$to_f","$==","$nan?","$infinite?","$enum_for","$+","$-","$gcd","$lcm","$/","$frexp","$to_i","$ldexp","$rationalize","$*","$<<","$to_r","$-@","$size","$<=","$>="]),s.$require("corelib/numeric"),function(s,u){function p(){}var _,h,d,g,v,y,m,b,E,w,O,A,x,T,M,P,k,I,N,S,z,C,R,q,j,F,L,D,B,U,H,G,X,K,Y,V,J,W,Z,Q,ee,re,te,ne,$e,ae,ie,oe,le,se,ue,ce,fe,pe,_e,he,de,ge,ve,ye,me,be,Ee,we,Oe=p=f(s,u,"Number",p),Ae=(Oe.$$proto,Oe.$$scope);Ae.get("Opal").$bridge(Oe,Number),Number.prototype.$$is_number=!0,e.defn(Oe,"$coerce",_=function(e){var r=this;if(e===c)r.$raise(Ae.get("TypeError"),"can't convert "+e.$class()+" into Float");else{if(e.$$is_string)return[r.$Float(e),r];if(e["$respond_to?"]("to_f"))return[Ae.get("Opal")["$coerce_to!"](e,Ae.get("Float"),"to_f"),r];if(e.$$is_number)return[e,r];r.$raise(Ae.get("TypeError"),"can't convert "+e.$class()+" into Float")}},_.$$arity=1),e.defn(Oe,"$__id__",h=function(){var e=this;return 2*e+1},h.$$arity=0),e.alias(Oe,"object_id","__id__"),e.defn(Oe,"$+",d=function(e){var r=this;return e.$$is_number?r+e:r.$__coerced__("+",e)},d.$$arity=1),e.defn(Oe,"$-",g=function(e){var r=this;return e.$$is_number?r-e:r.$__coerced__("-",e)},g.$$arity=1),e.defn(Oe,"$*",v=function(e){var r=this;return e.$$is_number?r*e:r.$__coerced__("*",e)},v.$$arity=1),e.defn(Oe,"$/",y=function(e){var r=this;return e.$$is_number?r/e:r.$__coerced__("/",e)},y.$$arity=1),e.alias(Oe,"fdiv","/"),e.defn(Oe,"$%",m=function(e){var r=this;return e.$$is_number?e==-(1/0)?e:0!=e?e<0||r<0?(r%e+e)%e:r%e:void r.$raise(Ae.get("ZeroDivisionError"),"divided by 0"):r.$__coerced__("%",e)},m.$$arity=1),e.defn(Oe,"$&",b=function(e){var r=this;return e.$$is_number?r&e:r.$__coerced__("&",e)},b.$$arity=1),e.defn(Oe,"$|",E=function(e){var r=this;return e.$$is_number?r|e:r.$__coerced__("|",e)},E.$$arity=1),e.defn(Oe,"$^",w=function(e){var r=this;return e.$$is_number?r^e:r.$__coerced__("^",e)},w.$$arity=1),e.defn(Oe,"$<",O=function(e){var r=this;return e.$$is_number?r<e:r.$__coerced__("<",e)},O.$$arity=1),e.defn(Oe,"$<=",A=function(e){var r=this;return e.$$is_number?r<=e:r.$__coerced__("<=",e)},A.$$arity=1),e.defn(Oe,"$>",x=function(e){var r=this;return e.$$is_number?r>e:r.$__coerced__(">",e)},x.$$arity=1),e.defn(Oe,"$>=",T=function(e){var r=this;return e.$$is_number?r>=e:r.$__coerced__(">=",e)},T.$$arity=1);var xe=function(e,r){return r.$$is_number?isNaN(e)||isNaN(r)?c:e>r?1:e<r?-1:0:e.$__coerced__("<=>",r)};return e.defn(Oe,"$<=>",M=function(r){var t=this;try{return xe(t,r)}catch(r){if(!e.rescue(r,[Ae.get("ArgumentError")]))throw r;try{return c}finally{e.pop_exception()}}},M.$$arity=1),e.defn(Oe,"$<<",P=function(e){var r=this;return e=Ae.get("Opal")["$coerce_to!"](e,Ae.get("Integer"),"to_int"),e>0?r<<e:r>>-e},P.$$arity=1),e.defn(Oe,"$>>",k=function(e){var r=this;return e=Ae.get("Opal")["$coerce_to!"](e,Ae.get("Integer"),"to_int"),e>0?r>>e:r<<-e},k.$$arity=1),e.defn(Oe,"$[]",I=function(e){var r=this;return e=Ae.get("Opal")["$coerce_to!"](e,Ae.get("Integer"),"to_int"),e<0?0:e>=32?r<0?1:0:r>>e&1},I.$$arity=1),e.defn(Oe,"$+@",N=function(){var e=this;return+e},N.$$arity=0),e.defn(Oe,"$-@",S=function(){var e=this;return-e},S.$$arity=0),e.defn(Oe,"$~",z=function(){var e=this;return~e},z.$$arity=0),e.defn(Oe,"$**",C=function(e){var n,$,a,i=this;return(n=Ae.get("Integer")["$==="](e))===c||null==n||n.$$is_boolean&&1!=n?(n=($=t(i,0))?(a=Ae.get("Float")["$==="](e))!==!1&&a!==c&&null!=a?a:Ae.get("Rational")["$==="](e):t(i,0))===c||null==n||n.$$is_boolean&&1!=n?(n=null!=e.$$is_number)===c||null==n||n.$$is_boolean&&1!=n?i.$__coerced__("**",e):Math.pow(i,e):Ae.get("Complex").$new(i,0)["$**"](e.$to_f()):(n=($=Ae.get("Integer")["$==="](i)["$!"]())!==!1&&$!==c&&null!=$?$:r(e,0))===c||null==n||n.$$is_boolean&&1!=n?Ae.get("Rational").$new(i,1)["$**"](e):Math.pow(i,e)},C.$$arity=1),e.defn(Oe,"$==",R=function(e){var r=this;return e.$$is_number?r==Number(e):!!e["$respond_to?"]("==")&&e["$=="](r)},R.$$arity=1),e.defn(Oe,"$abs",q=function(){var e=this;return Math.abs(e)},q.$$arity=0),e.defn(Oe,"$abs2",j=function(){var e=this;return Math.abs(e*e)},j.$$arity=0),e.defn(Oe,"$angle",F=function(){var e,r=this;return(e=r["$nan?"]())===c||null==e||e.$$is_boolean&&1!=e?0==r?1/r>0?0:Math.PI:r<0?Math.PI:0:r},F.$$arity=0),e.alias(Oe,"arg","angle"),e.alias(Oe,"phase","angle"),e.defn(Oe,"$bit_length",L=function(){var e,r=this;if(((e=Ae.get("Integer")["$==="](r))===c||null==e||e.$$is_boolean&&1!=e)&&r.$raise(Ae.get("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),0===r||r===-1)return 0;for(var t=0,n=r<0?~r:r;0!=n;)t+=1,n>>>=1;return t},L.$$arity=0),e.defn(Oe,"$ceil",D=function(){var e=this;return Math.ceil(e)},D.$$arity=0),e.defn(Oe,"$chr",B=function(e){var r=this;return String.fromCharCode(r)},B.$$arity=-1),e.defn(Oe,"$denominator",U=function(){var r,t,n=this,$=U.$$p,a=c,i=c;for(U.$$p=null,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return(r=(t=n["$nan?"]())!==!1&&t!==c&&null!=t?t:n["$infinite?"]())===c||null==r||r.$$is_boolean&&1!=r?(t=n,r=e.find_super_dispatcher(n,"denominator",U,!1),r.$$p=$,r).apply(t,a):1},U.$$arity=0),e.defn(Oe,"$downto",H=function(e){var t,a,i,o=this,l=H.$$p,s=l||c;if(H.$$p=null,s===c)return(t=(a=o).$enum_for,t.$$p=(i=function(){var t,a=i.$$s||this;return((t=Ae.get("Numeric")["$==="](e))===c||null==t||t.$$is_boolean&&1!=t)&&a.$raise(Ae.get("ArgumentError"),"comparison of "+a.$class()+" with "+e.$class()+" failed"),(t=r(e,a))===c||null==t||t.$$is_boolean&&1!=t?n($(a,e),1):0},i.$$s=o,i.$$arity=0,i),t).call(a,"downto",e);e.$$is_number||o.$raise(Ae.get("ArgumentError"),"comparison of "+o.$class()+" with "+e.$class()+" failed");for(var u=o;u>=e;u--)s(u);return o},H.$$arity=1),e.alias(Oe,"eql?","=="),e.defn(Oe,"$equal?",G=function(e){var r,t=this;return(r=t["$=="](e))!==!1&&r!==c&&null!=r?r:isNaN(t)&&isNaN(e)},G.$$arity=1),e.defn(Oe,"$even?",X=function(){var e=this;return e%2===0},X.$$arity=0),e.defn(Oe,"$floor",K=function(){var e=this;return Math.floor(e)},K.$$arity=0),e.defn(Oe,"$gcd",Y=function(e){var r,t=this;((r=Ae.get("Integer")["$==="](e))===c||null==r||r.$$is_boolean&&1!=r)&&t.$raise(Ae.get("TypeError"),"not an integer");for(var n=Math.abs(t),$=Math.abs(e);n>0;){var a=n;n=$%n,$=a}return $},Y.$$arity=1),e.defn(Oe,"$gcdlcm",V=function(e){var r=this;return[r.$gcd(),r.$lcm()]},V.$$arity=1),e.defn(Oe,"$integer?",J=function(){var e=this;return e%1===0},J.$$arity=0),e.defn(Oe,"$is_a?",W=function(r){var t,n,$=this,a=W.$$p,i=c,o=c;for(W.$$p=null,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return!((t=(n=r["$=="](Ae.get("Fixnum")))?Ae.get("Integer")["$==="]($):r["$=="](Ae.get("Fixnum")))===c||null==t||t.$$is_boolean&&1!=t)||(!((t=(n=r["$=="](Ae.get("Integer")))?Ae.get("Integer")["$==="]($):r["$=="](Ae.get("Integer")))===c||null==t||t.$$is_boolean&&1!=t)||(!((t=(n=r["$=="](Ae.get("Float")))?Ae.get("Float")["$==="]($):r["$=="](Ae.get("Float")))===c||null==t||t.$$is_boolean&&1!=t)||(n=$,t=e.find_super_dispatcher($,"is_a?",W,!1),t.$$p=a,t).apply(n,i)))},W.$$arity=1),e.alias(Oe,"kind_of?","is_a?"),e.defn(Oe,"$instance_of?",Z=function(r){var t,n,$=this,a=Z.$$p,i=c,o=c;for(Z.$$p=null,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return!((t=(n=r["$=="](Ae.get("Fixnum")))?Ae.get("Integer")["$==="]($):r["$=="](Ae.get("Fixnum")))===c||null==t||t.$$is_boolean&&1!=t)||(!((t=(n=r["$=="](Ae.get("Integer")))?Ae.get("Integer")["$==="]($):r["$=="](Ae.get("Integer")))===c||null==t||t.$$is_boolean&&1!=t)||(!((t=(n=r["$=="](Ae.get("Float")))?Ae.get("Float")["$==="]($):r["$=="](Ae.get("Float")))===c||null==t||t.$$is_boolean&&1!=t)||(n=$,t=e.find_super_dispatcher($,"instance_of?",Z,!1),t.$$p=a,t).apply(n,i)))},Z.$$arity=1),e.defn(Oe,"$lcm",Q=function(e){var r,t=this;return((r=Ae.get("Integer")["$==="](e))===c||null==r||r.$$is_boolean&&1!=r)&&t.$raise(Ae.get("TypeError"),"not an integer"),0==t||0==e?0:Math.abs(t*e/t.$gcd(e))},Q.$$arity=1),e.alias(Oe,"magnitude","abs"),e.alias(Oe,"modulo","%"),e.defn(Oe,"$next",ee=function(){var e=this;return e+1},ee.$$arity=0),e.defn(Oe,"$nonzero?",re=function(){var e=this;return 0==e?c:e},re.$$arity=0),e.defn(Oe,"$numerator",te=function(){var r,t,n=this,$=te.$$p,a=c,i=c;for(te.$$p=null,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return(r=(t=n["$nan?"]())!==!1&&t!==c&&null!=t?t:n["$infinite?"]())===c||null==r||r.$$is_boolean&&1!=r?(t=n,r=e.find_super_dispatcher(n,"numerator",te,!1),r.$$p=$,r).apply(t,a):n},te.$$arity=0),e.defn(Oe,"$odd?",ne=function(){var e=this;return e%2!==0},ne.$$arity=0),e.defn(Oe,"$ord",$e=function(){var e=this;return e},$e.$$arity=0),e.defn(Oe,"$pred",ae=function(){var e=this;return e-1},ae.$$arity=0),e.defn(Oe,"$quo",ie=function(r){var t,n,$=this,i=ie.$$p,o=c,l=c;for(ie.$$p=null,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return(t=Ae.get("Integer")["$==="]($))===c||null==t||t.$$is_boolean&&1!=t?a($,r):(n=$,t=e.find_super_dispatcher($,"quo",ie,!1),t.$$p=i,t).apply(n,o)},ie.$$arity=1),e.defn(Oe,"$rationalize",oe=function(r){var t,n,a=this,o=c,l=c;return arguments.length>1&&a.$raise(Ae.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),(t=Ae.get("Integer")["$==="](a))===c||null==t||t.$$is_boolean&&1!=t?(t=a["$infinite?"]())===c||null==t||t.$$is_boolean&&1!=t?(t=a["$nan?"]())===c||null==t||t.$$is_boolean&&1!=t?(t=null==r)===c||null==t||t.$$is_boolean&&1!=t?a.$to_r().$rationalize(r):(n=Ae.get("Math").$frexp(a),t=e.to_ary(n),o=null==t[0]?c:t[0],l=null==t[1]?c:t[1],n,o=Ae.get("Math").$ldexp(o,Ae.get("Float").$$scope.get("MANT_DIG")).$to_i(),l=$(l,Ae.get("Float").$$scope.get("MANT_DIG")),Ae.get("Rational").$new(i(2,o),1["$<<"]($(1,l))).$rationalize(Ae.get("Rational").$new(1,1["$<<"]($(1,l))))):a.$raise(Ae.get("FloatDomainError"),"NaN"):a.$raise(Ae.get("FloatDomainError"),"Infinity"):Ae.get("Rational").$new(a,1)},oe.$$arity=-1),e.defn(Oe,"$round",le=function(i){var s,u,f=this,p=c,_=c;if((s=Ae.get("Integer")["$==="](f))===c||null==s||s.$$is_boolean&&1!=s){if(u=f["$nan?"](),(s=u!==!1&&u!==c&&null!=u?null==i:u)===c||null==s||s.$$is_boolean&&1!=s||f.$raise(Ae.get("FloatDomainError"),"NaN"),i=Ae.get("Opal")["$coerce_to!"](i||0,Ae.get("Integer"),"to_int"),(s=o(i,0))===c||null==s||s.$$is_boolean&&1!=s){if(i["$=="](0))return Math.round(f);if((s=(u=f["$nan?"]())!==!1&&u!==c&&null!=u?u:f["$infinite?"]())!==c&&null!=s&&(!s.$$is_boolean||1==s))return f}else(s=f["$nan?"]())===c||null==s||s.$$is_boolean&&1!=s?(s=f["$infinite?"]())===c||null==s||s.$$is_boolean&&1!=s||f.$raise(Ae.get("FloatDomainError"),"Infinity"):f.$raise(Ae.get("RangeError"),"NaN");return u=Ae.get("Math").$frexp(f),s=e.to_ary(u),p=null==s[0]?c:s[0],_=null==s[1]?c:s[1],u,(s=l(i,$(n(Ae.get("Float").$$scope.get("DIG"),2),function(){return(u=r(_,0))===c||null==u||u.$$is_boolean&&1!=u?$(a(_,3),1):a(_,4)}())))===c||null==s||s.$$is_boolean&&1!=s?(s=t(i,function(){return(u=r(_,0))===c||null==u||u.$$is_boolean&&1!=u?a(_,4):n(a(_,3),1)}()["$-@"]()))===c||null==s||s.$$is_boolean&&1!=s?Math.round(f*Math.pow(10,i))/Math.pow(10,i):0:f}if((s=null==i)!==c&&null!=s&&(!s.$$is_boolean||1==s))return f;if(u=Ae.get("Float")["$==="](i),(s=u!==!1&&u!==c&&null!=u?i["$infinite?"]():u)===c||null==s||s.$$is_boolean&&1!=s||f.$raise(Ae.get("RangeError"),"Infinity"),i=Ae.get("Opal")["$coerce_to!"](i,Ae.get("Integer"),"to_int"),(s=t(i,Ae.get("Integer").$$scope.get("MIN")))===c||null==s||s.$$is_boolean&&1!=s||f.$raise(Ae.get("RangeError"),"out of bounds"),(s=i>=0)!==c&&null!=s&&(!s.$$is_boolean||1==s))return f;if(i=i["$-@"](),.415241*i-.125>f.$size())return 0;var h=Math.pow(10,i),d=Math.floor((Math.abs(d)+h/2)/h)*h;return f<0?-d:d},le.$$arity=-1),e.defn(Oe,"$step",se=function(e,r){var t,n=this,$=se.$$p,a=$||c;if(null==r&&(r=1),se.$$p=null,a===!1||a===c||null==a)return n.$enum_for("step",e,r);(t=0==r)===c||null==t||t.$$is_boolean&&1!=t||n.$raise(Ae.get("ArgumentError"),"step cannot be 0");var i=n;if(e===1/0||e===-(1/0))return a(i),n;if(r>0)for(;i<=e;)a(i),i+=r;else for(;i>=e;)a(i),i+=r;return n},se.$$arity=-2),e.alias(Oe,"succ","next"),e.defn(Oe,"$times",ue=function(){var e,r,t,n=this,$=ue.$$p,a=$||c;if(ue.$$p=null,a===!1||a===c||null==a)return(e=(r=n).$enum_for,e.$$p=(t=function(){var e=t.$$s||this;return e},t.$$s=n,t.$$arity=0,t),e).call(r,"times");for(var i=0;i<n;i++)a(i);return n},ue.$$arity=0),e.defn(Oe,"$to_f",ce=function(){var e=this;return e},ce.$$arity=0),e.defn(Oe,"$to_i",fe=function(){var e=this;return parseInt(e,10)},fe.$$arity=0),e.alias(Oe,"to_int","to_i"),e.defn(Oe,"$to_r",pe=function(){var r,t,n=this,a=c,o=c;return(r=Ae.get("Integer")["$==="](n))===c||null==r||r.$$is_boolean&&1!=r?(t=Ae.get("Math").$frexp(n),r=e.to_ary(t),a=null==r[0]?c:r[0],o=null==r[1]?c:r[1],t,a=Ae.get("Math").$ldexp(a,Ae.get("Float").$$scope.get("MANT_DIG")).$to_i(),o=$(o,Ae.get("Float").$$scope.get("MANT_DIG")),i(a,Ae.get("Float").$$scope.get("RADIX")["$**"](o)).$to_r()):Ae.get("Rational").$new(n,1)},pe.$$arity=0),e.defn(Oe,"$to_s",_e=function(e){var n,$,a=this;return null==e&&(e=10),(n=($=t(e,2))!==!1&&$!==c&&null!=$?$:r(e,36))===c||null==n||n.$$is_boolean&&1!=n||a.$raise(Ae.get("ArgumentError"),"base must be between 2 and 36"),a.toString(e)},_e.$$arity=-1),e.alias(Oe,"truncate","to_i"),e.alias(Oe,"inspect","to_s"),e.defn(Oe,"$divmod",he=function(r){var t,n,$=this,a=he.$$p,i=c,o=c;for(he.$$p=null,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return(t=(n=$["$nan?"]())!==!1&&n!==c&&null!=n?n:r["$nan?"]())===c||null==t||t.$$is_boolean&&1!=t?(t=$["$infinite?"]())===c||null==t||t.$$is_boolean&&1!=t?(n=$,t=e.find_super_dispatcher($,"divmod",he,!1),t.$$p=a,t).apply(n,i):$.$raise(Ae.get("FloatDomainError"),"Infinity"):$.$raise(Ae.get("FloatDomainError"),"NaN")},he.$$arity=1),e.defn(Oe,"$upto",de=function(e){var r,a,i,o=this,l=de.$$p,s=l||c;if(de.$$p=null,s===c)return(r=(a=o).$enum_for,r.$$p=(i=function(){var r,a=i.$$s||this;return((r=Ae.get("Numeric")["$==="](e))===c||null==r||r.$$is_boolean&&1!=r)&&a.$raise(Ae.get("ArgumentError"),"comparison of "+a.$class()+" with "+e.$class()+" failed"),(r=t(e,a))===c||null==r||r.$$is_boolean&&1!=r?n($(e,a),1):0},i.$$s=o,i.$$arity=0,i),r).call(a,"upto",e);e.$$is_number||o.$raise(Ae.get("ArgumentError"),"comparison of "+o.$class()+" with "+e.$class()+" failed");for(var u=o;u<=e;u++)s(u);return o},de.$$arity=1),e.defn(Oe,"$zero?",ge=function(){var e=this;return 0==e},ge.$$arity=0),e.defn(Oe,"$size",ve=function(){return 4},ve.$$arity=0),e.defn(Oe,"$nan?",ye=function(){var e=this;return isNaN(e)},ye.$$arity=0),e.defn(Oe,"$finite?",me=function(){var e=this;return e!=1/0&&e!=-(1/0)&&!isNaN(e)},me.$$arity=0),e.defn(Oe,"$infinite?",be=function(){var e=this;return e==1/0?1:e==-(1/0)?-1:c},be.$$arity=0),e.defn(Oe,"$positive?",Ee=function(){var e=this;return e==1/0||1/e>0},Ee.$$arity=0),e.defn(Oe,"$negative?",we=function(){var e=this;return e==-(1/0)||1/e<0},we.$$arity=0),c&&"negative?"}(u.base,u.get("Numeric")),e.cdecl(u,"Fixnum",u.get("Number")),function(r,t){function n(){}var $,a=n=f(r,t,"Integer",n),i=(a.$$proto,a.$$scope);return e.defs(a,"$===",$=function(e){return!!e.$$is_number&&e%1===0},$.$$arity=1),e.cdecl(i,"MAX",Math.pow(2,30)-1),e.cdecl(i,"MIN",-Math.pow(2,30))}(u.base,u.get("Numeric")),function(r,t){function n(){}var $,a,i=n=f(r,t,"Float",n),o=(i.$$proto,i.$$scope);return e.defs(i,"$===",$=function(e){return!!e.$$is_number},$.$$arity=1),e.cdecl(o,"INFINITY",1/0),e.cdecl(o,"MAX",Number.MAX_VALUE),e.cdecl(o,"MIN",Number.MIN_VALUE),e.cdecl(o,"NAN",NaN),e.cdecl(o,"DIG",15),e.cdecl(o,"MANT_DIG",53),e.cdecl(o,"RADIX",2),(a="undefined"!=typeof Number.EPSILON)===c||null==a||a.$$is_boolean&&1!=a?e.cdecl(o,"EPSILON",2.220446049250313e-16):e.cdecl(o,"EPSILON",Number.EPSILON)}(u.base,u.get("Numeric"))},Opal.modules["corelib/range"]=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e<=r:e["$<="](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}function n(e,r){return"number"==typeof e&&"number"==typeof r?e-r:e["$-"](r)}var $=e.top,a=e,i=e.nil,o=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$include","$attr_reader","$<=>","$raise","$include?","$<=","$<","$enum_for","$upto","$to_proc","$succ","$!","$==","$===","$exclude_end?","$eql?","$begin","$end","$-","$abs","$to_i","$inspect","$[]"]),$.$require("corelib/enumerable"),function($,a){function l(){}var s,u,c,f,p,_,h,d,g,v,y,m,b,E=l=o($,a,"Range",l),w=E.$$proto,O=E.$$scope;return w.begin=w.exclude=w.end=i,E.$include(O.get("Enumerable")),w.$$is_range=!0,E.$attr_reader("begin","end"),e.defn(E,"$initialize",s=function(e,r,t){var n,$=this;return null==t&&(t=!1),((n=e["$<=>"](r))===i||null==n||n.$$is_boolean&&1!=n)&&$.$raise(O.get("ArgumentError")),$.begin=e,$.end=r,$.exclude=t},s.$$arity=-3),e.defn(E,"$==",u=function(e){var r=this;return!!e.$$is_range&&(r.exclude===e.exclude&&r.begin==e.begin&&r.end==e.end)},u.$$arity=1),e.defn(E,"$===",c=function(e){var r=this;return r["$include?"](e)},c.$$arity=1),e.defn(E,"$cover?",f=function(e){var n,$,a=this;return n=r(a.begin,e),n!==!1&&n!==i&&null!=n?function(){return($=a.exclude)===i||null==$||$.$$is_boolean&&1!=$?r(e,a.end):t(e,a.end)}():n},f.$$arity=1),e.defn(E,"$each",p=function(){var r,n,$,a=this,o=p.$$p,l=o||i,s=i,u=i;if(p.$$p=null,l===i)return a.$enum_for("each");var c,f;if(a.begin.$$is_number&&a.end.$$is_number){for(a.begin%1===0&&a.end%1===0||a.$raise(O.get("TypeError"),"can't iterate from Float"),c=a.begin,f=a.end+function(){return(r=a.exclude)===i||null==r||r.$$is_boolean&&1!=r?1:0}();c<f;c++)l(c);return a}if(a.begin.$$is_string&&a.end.$$is_string)return(r=(n=a.begin).$upto,r.$$p=l.$to_proc(),r).call(n,a.end,a.exclude),a;for(s=a.begin,u=a.end;($=t(s,u))!==i&&null!=$&&(!$.$$is_boolean||1==$);)e.yield1(l,s),s=s.$succ();return $=a.exclude["$!"](),(r=$!==!1&&$!==i&&null!=$?s["$=="](u):$)===i||null==r||r.$$is_boolean&&1!=r||e.yield1(l,s),a},p.$$arity=0),e.defn(E,"$eql?",_=function(e){var r,t,n=this;return!((r=O.get("Range")["$==="](e))===i||null==r||r.$$is_boolean&&1!=r)&&(t=n.exclude["$==="](e["$exclude_end?"]()),r=t!==!1&&t!==i&&null!=t?n.begin["$eql?"](e.$begin()):t,r!==!1&&r!==i&&null!=r?n.end["$eql?"](e.$end()):r)},_.$$arity=1),e.defn(E,"$exclude_end?",h=function(){var e=this;return e.exclude},h.$$arity=0),e.alias(E,"first","begin"),e.alias(E,"include?","cover?"),e.alias(E,"last","end"),e.defn(E,"$max",d=function(){var r,t,n=this,$=d.$$p,a=$||i,o=i,l=i;for(d.$$p=null,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return a!==i?(t=n,r=e.find_super_dispatcher(n,"max",d,!1),r.$$p=$,r).apply(t,o):n.exclude?n.end-1:n.end},d.$$arity=0),e.alias(E,"member?","cover?"),e.defn(E,"$min",g=function(){var r,t,n=this,$=g.$$p,a=$||i,o=i,l=i;for(g.$$p=null,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return a!==i?(t=n,r=e.find_super_dispatcher(n,"min",g,!1),r.$$p=$,r).apply(t,o):n.begin},g.$$arity=0),e.alias(E,"member?","include?"),e.defn(E,"$size",v=function(){var e,r,$=this,a=i,o=i,l=i;return a=$.begin,o=$.end,(e=$.exclude)===i||null==e||e.$$is_boolean&&1!=e||(o=n(o,1)),r=O.get("Numeric")["$==="](a),(e=r!==!1&&r!==i&&null!=r?O.get("Numeric")["$==="](o):r)===i||null==e||e.$$is_boolean&&1!=e?i:(e=t(o,a))===i||null==e||e.$$is_boolean&&1!=e?(l=O.get("Float").$$scope.get("INFINITY"),(e=(r=l["$=="](a.$abs()))!==!1&&r!==i&&null!=r?r:o.$abs()["$=="](l))===i||null==e||e.$$is_boolean&&1!=e?(Math.abs(o-a)+1).$to_i():l):0},v.$$arity=0),e.defn(E,"$step",y=function(e){var r=this;return null==e&&(e=1),r.$raise(O.get("NotImplementedError"))},y.$$arity=-1),e.defn(E,"$to_s",m=function(){var e=this;return e.begin.$inspect()+(e.exclude?"...":"..")+e.end.$inspect()},m.$$arity=0),e.alias(E,"inspect","to_s"),e.defn(E,"$marshal_load",b=function(e){var r=this;return r.begin=e["$[]"]("begin"),r.end=e["$[]"]("end"),r.exclude=e["$[]"]("excl")},b.$$arity=1),i&&"marshal_load"}(a.base,null)},Opal.modules["corelib/proc"]=function(e){var r=(e.top,e),t=e.nil,n=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$raise","$coerce_to!"]),function(r,a){function i(){}var o,l,s,u,c,f,p,_,h,d,g=i=$(r,a,"Proc",i),v=g.$$proto,y=g.$$scope;return v.$$is_proc=!0,v.$$is_lambda=!1,e.defs(g,"$new",o=function(){var e=this,r=o.$$p,n=r||t;return o.$$p=null,n!==!1&&n!==t&&null!=n||e.$raise(y.get("ArgumentError"),"tried to create a Proc object without a block"),n},o.$$arity=0),e.defn(g,"$call",l=function(r){var n,$=this,a=l.$$p,i=a||t,o=arguments.length,s=o-0;s<0&&(s=0),n=new Array(s);for(var u=0;u<o;u++)n[u-0]=arguments[u];l.$$p=null,i!==t&&($.$$p=i);var c,f=$.$$brk;if(f)try{c=$.$$is_lambda?$.apply(null,n):e.yieldX($,n)}catch(e){if(e===f)return f.$v;throw e}else c=$.$$is_lambda?$.apply(null,n):e.yieldX($,n);return c},l.$$arity=-1),e.alias(g,"[]","call"),e.alias(g,"===","call"),e.alias(g,"yield","call"),e.defn(g,"$to_proc",s=function(){var e=this;return e},s.$$arity=0),e.defn(g,"$lambda?",u=function(){var e=this;return!!e.$$is_lambda},u.$$arity=0),e.defn(g,"$arity",c=function(){var e=this;return e.$$is_curried?-1:e.$$arity},c.$$arity=0),e.defn(g,"$source_location",f=function(){var e=this;return e.$$is_curried?t:t},f.$$arity=0),e.defn(g,"$binding",p=function(){var e=this;return e.$$is_curried&&e.$raise(y.get("ArgumentError"),"Can't create Binding"),t},p.$$arity=0),e.defn(g,"$parameters",_=function(){var e=this;if(e.$$is_curried)return[["rest"]];if(e.$$parameters){if(e.$$is_lambda)return e.$$parameters;var r,t,n=[];for(r=0,t=e.$$parameters.length;r<t;r++){var $=e.$$parameters[r];"req"===$[0]&&($=["opt",$[1]]),n.push($)}return n}return[]},_.$$arity=0),e.defn(g,"$curry",h=function(e){function r(){var $,a=n.call(arguments),i=a.length;return i>e&&t.$$is_lambda&&!t.$$is_curried&&t.$raise(y.get("ArgumentError"),"wrong number of arguments ("+i+" for "+e+")"),i>=e?t.$call.apply(t,a):($=function(){return r.apply(null,a.concat(n.call(arguments)))},$.$$is_lambda=t.$$is_lambda,$.$$is_curried=!0,$)}var t=this;return void 0===e?e=t.length:(e=y.get("Opal")["$coerce_to!"](e,y.get("Integer"),"to_int"),t.$$is_lambda&&e!==t.length&&t.$raise(y.get("ArgumentError"),"wrong number of arguments ("+e+" for "+t.length+")")),r.$$is_lambda=t.$$is_lambda,r.$$is_curried=!0,r},h.$$arity=-1),e.defn(g,"$dup",d=function(){var e=this,r=e.$$original_proc||e,t=function(){return r.apply(this,arguments)};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},d.$$arity=0),e.alias(g,"clone","dup")}(r.base,Function)},Opal.modules["corelib/method"]=function(e){var r=(e.top,e),t=e.nil,n=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$attr_reader","$class","$arity","$new","$name"]),function(r,a){function i(){}var o,l,s,u,c,f,p,_=i=$(r,a,"Method",i),h=_.$$proto,d=_.$$scope;return h.method=h.receiver=h.owner=h.name=t,_.$attr_reader("owner","receiver","name"),e.defn(_,"$initialize",o=function(e,r,t){var n=this;return n.receiver=e,n.owner=e.$class(),n.name=t,n.method=r},o.$$arity=3),e.defn(_,"$arity",l=function(){var e=this;return e.method.$arity()},l.$$arity=0),e.defn(_,"$parameters",s=function(){var e=this;return e.method.$$parameters},s.$$arity=0),e.defn(_,"$call",u=function(e){var r,n=this,$=u.$$p,a=$||t,i=arguments.length,o=i-0;o<0&&(o=0),r=new Array(o);for(var l=0;l<i;l++)r[l-0]=arguments[l];return u.$$p=null,n.method.$$p=a,n.method.apply(n.receiver,r)},u.$$arity=-1),e.alias(_,"[]","call"),e.defn(_,"$unbind",c=function(){var e=this;return d.get("UnboundMethod").$new(e.owner,e.method,e.name)},c.$$arity=0),e.defn(_,"$to_proc",f=function(){var e=this,r=function(){return e.$call.apply(e,n.call(arguments))};return r.$$unbound=e.method,r.$$is_lambda=!0,r},f.$$arity=0),e.defn(_,"$inspect",p=function(){var e=this;return"#<Method: "+e.receiver.$class()+"#"+e.name+">"},p.$$arity=0),t&&"inspect"}(r.base,null),function(r,n){function a(){}var i,o,l,s,u,c=a=$(r,n,"UnboundMethod",a),f=c.$$proto,p=c.$$scope;return f.method=f.name=f.owner=t,c.$attr_reader("owner","name"),e.defn(c,"$initialize",i=function(e,r,t){var n=this;return n.owner=e,n.method=r,n.name=t},i.$$arity=3),e.defn(c,"$arity",o=function(){var e=this;return e.method.$arity()},o.$$arity=0),e.defn(c,"$parameters",l=function(){var e=this;return e.method.$$parameters},l.$$arity=0),e.defn(c,"$bind",s=function(e){var r=this;return p.get("Method").$new(e,r.method,r.name)},s.$$arity=1),e.defn(c,"$inspect",u=function(){var e=this;return"#<UnboundMethod: "+e.owner.$name()+"#"+e.name+">"},u.$$arity=0),t&&"inspect"}(r.base,null)},Opal.modules["corelib/variables"]=function(e){var r=(e.top,e),t=e.nil,n=(e.breaker,e.slice,e.gvars),$=e.hash2;return e.add_stubs(["$new"]),n["&"]=n["~"]=n["`"]=n["'"]=t,n.LOADED_FEATURES=n['"']=e.loaded_features,n.LOAD_PATH=n[":"]=[],n["/"]="\n",n[","]=t,e.cdecl(r,"ARGV",[]),e.cdecl(r,"ARGF",r.get("Object").$new()),e.cdecl(r,"ENV",$([],{})),n.VERBOSE=!1,n.DEBUG=!1,n.SAFE=0},Opal.modules["opal/regexp_anchors"]=function(e){var r=(e.top,e),t=e.nil,n=(e.breaker,e.slice,e.module);return e.add_stubs(["$==","$new"]),function(r){var $,a=$=n(r,"Opal"),i=(a.$$proto,a.$$scope);e.cdecl(i,"REGEXP_START",function(){return i.get("RUBY_ENGINE")["$=="]("opal")?"^":t}()),e.cdecl(i,"REGEXP_END",function(){return i.get("RUBY_ENGINE")["$=="]("opal")?"$":t}()),e.cdecl(i,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),e.cdecl(i,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),e.cdecl(i,"INLINE_IDENTIFIER_REGEXP",i.get("Regexp").$new("[^"+i.get("FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+i.get("FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),e.cdecl(i,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),e.cdecl(i,"CONST_NAME_REGEXP",i.get("Regexp").$new(""+i.get("REGEXP_START")+"(::)?[A-Z][^"+i.get("FORBIDDEN_CONST_NAME_CHARS")+"]*"+i.get("REGEXP_END")))}(r.base)},Opal.modules["opal/mini"]=function(e){var r=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),r.$require("opal/base"),r.$require("corelib/nil"),r.$require("corelib/boolean"),r.$require("corelib/string"),r.$require("corelib/comparable"),r.$require("corelib/enumerable"),r.$require("corelib/enumerator"),r.$require("corelib/array"),r.$require("corelib/hash"),r.$require("corelib/number"),r.$require("corelib/range"),r.$require("corelib/proc"),r.$require("corelib/method"),r.$require("corelib/regexp"),r.$require("corelib/variables"),r.$require("opal/regexp_anchors")},Opal.modules.native=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e-r:e["$-"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e>=r:e["$>="](r)}var n=e.top,$=e,a=e.nil,i=(e.breaker,e.slice,e.module),o=e.range,l=e.hash2,s=e.klass,u=e.gvars;return e.add_stubs(["$try_convert","$native?","$respond_to?","$to_n","$raise","$inspect","$Native","$proc","$map!","$end_with?","$define_method","$[]","$convert","$call","$to_proc","$new","$each","$native_reader","$native_writer","$extend","$is_a?","$map","$alias_method","$to_a","$_Array","$include","$method_missing","$bind","$instance_method","$[]=","$slice","$-","$length","$enum_for","$===","$>=","$<<","$each_pair","$_initialize","$name","$exiting_mid","$native_module"]),function(r){var t,n,$,s,u,c,f,p,_,h=t=i(r,"Native"),d=(h.$$proto,h.$$scope);e.defs(h,"$is_a?",n=function(e,r){var t=this;try{return e instanceof t.$try_convert(r)}catch(e){return!1}},n.$$arity=2),e.defs(h,"$try_convert",$=function(e,r){var t=this;return null==r&&(r=a),t["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():r},$.$$arity=-2),e.defs(h,"$convert",s=function(e){var r=this;return r["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():void r.$raise(d.get("ArgumentError"),""+e.$inspect()+" isn't native")},s.$$arity=1),e.defs(h,"$call",u=function(e,r,t){var n,$=this,i=u.$$p,o=i||a,l=arguments.length,s=l-2;s<0&&(s=0),n=new Array(s);for(var c=2;c<l;c++)n[c-2]=arguments[c];u.$$p=null;var f=e[r];if(f instanceof Function){for(var p=new Array(n.length),_=0,h=n.length;_<h;_++){var d=n[_],g=$.$try_convert(d);p[_]=g===a?d:g}return o!==a&&p.push(o),$.$Native(f.apply(e,p))}return $.$Native(f)},u.$$arity=-3),e.defs(h,"$proc",c=function(){var r,t,n,$=this,i=c.$$p,o=i||a;return c.$$p=null,o!==!1&&o!==a&&null!=o||$.$raise(d.get("LocalJumpError"),"no block given"),(r=(t=d.get("Kernel")).$proc,r.$$p=(n=function(r){var t,$,i,l,s=n.$$s||this,u=a,c=arguments.length,f=c-0;f<0&&(f=0),t=new Array(f);for(var p=0;p<c;p++)t[p-0]=arguments[p];if(($=(i=t)["$map!"],$.$$p=(l=function(e){var r=l.$$s||this;return null==e&&(e=a),r.$Native(e)},l.$$s=s,l.$$arity=1,l),$).call(i),u=s.$Native(this),this===e.global)return o.apply(s,t);var _=o.$$s;o.$$s=null;try{return o.apply(u,t)}finally{o.$$s=_}},n.$$s=$,n.$$arity=-1,n),r).call(t)},c.$$arity=0),function(r){var t,n,$,s,u,c=t=i(r,"Helpers"),f=(c.$$proto,c.$$scope);e.defn(c,"$alias_native",n=function(r,t,n){var $,i,s,u,c,p,_,h,d,g,v=this;if(h=e.slice.call(arguments,1,arguments.length),n=e.extract_kwargs(h),null==n||!n.$$is_hash){if(null!=n)throw e.ArgumentError.$new("expected kwargs");n=l([],{})}return null==(d=n.$$smap.as)&&(d=a),0<h.length&&(g=h.splice(0,1)[0]),null==g&&(g=r),($=g["$end_with?"]("="))===a||null==$||$.$$is_boolean&&1!=$?d!==!1&&d!==a&&null!=d?($=(u=v).$define_method,$.$$p=(c=function(r){var t,n,$,i,o,l=c.$$s||this,s=a;null==l.native&&(l.native=a),t=c.$$p||a,c.$$p=null;var u=arguments.length,p=u-0;p<0&&(p=0),n=new Array(p);for(var _=0;_<u;_++)n[_-0]=arguments[_];return($=s=(i=(o=f.get("Native")).$call,
i.$$p=t.$to_proc(),i).apply(o,[l.native,g].concat(e.to_a(n))))===a||null==$||$.$$is_boolean&&1!=$?a:d.$new(s.$to_n())},c.$$s=v,c.$$arity=-1,c),$).call(u,r):($=(p=v).$define_method,$.$$p=(_=function(r){var t,n,$,i,o=_.$$s||this;null==o.native&&(o.native=a),t=_.$$p||a,_.$$p=null;var l=arguments.length,s=l-0;s<0&&(s=0),n=new Array(s);for(var u=0;u<l;u++)n[u-0]=arguments[u];return($=(i=f.get("Native")).$call,$.$$p=t.$to_proc(),$).apply(i,[o.native,g].concat(e.to_a(n)))},_.$$s=v,_.$$arity=-1,_),$).call(p,r):($=(i=v).$define_method,$.$$p=(s=function(e){var r=s.$$s||this;return null==r.native&&(r.native=a),null==e&&(e=a),r.native[g["$[]"](o(0,-2,!1))]=f.get("Native").$convert(e),e},s.$$s=v,s.$$arity=1,s),$).call(i,r)},n.$$arity=-2),e.defn(c,"$native_reader",$=function(e){var r,t,n,$,i=this,o=arguments.length,l=o-0;l<0&&(l=0),$=new Array(l);for(var s=0;s<o;s++)$[s-0]=arguments[s];return(r=(t=$).$each,r.$$p=(n=function(e){var r,t,$,i=n.$$s||this;return null==e&&(e=a),(r=(t=i).$define_method,r.$$p=($=function(){var r=$.$$s||this;return null==r.native&&(r.native=a),r.$Native(r.native[e])},$.$$s=i,$.$$arity=0,$),r).call(t,e)},n.$$s=i,n.$$arity=1,n),r).call(t)},$.$$arity=-1),e.defn(c,"$native_writer",s=function(e){var r,t,n,$,i=this,o=arguments.length,l=o-0;l<0&&(l=0),$=new Array(l);for(var s=0;s<o;s++)$[s-0]=arguments[s];return(r=(t=$).$each,r.$$p=(n=function(e){var r,t,$,i=n.$$s||this;return null==e&&(e=a),(r=(t=i).$define_method,r.$$p=($=function(r){var t=$.$$s||this;return null==t.native&&(t.native=a),null==r&&(r=a),t.$Native(t.native[e]=r)},$.$$s=i,$.$$arity=1,$),r).call(t,""+e+"=")},n.$$s=i,n.$$arity=1,n),r).call(t)},s.$$arity=-1),e.defn(c,"$native_accessor",u=function(r){var t,n,$,a=this,i=arguments.length,o=i-0;o<0&&(o=0),$=new Array(o);for(var l=0;l<i;l++)$[l-0]=arguments[l];return(t=a).$native_reader.apply(t,e.to_a($)),(n=a).$native_writer.apply(n,e.to_a($))},u.$$arity=-1)}(d.base),e.defs(h,"$included",f=function(e){return e.$extend(d.get("Helpers"))},f.$$arity=1),e.defn(h,"$initialize",p=function(e){var r,t=this;return((r=d.get("Kernel")["$native?"](e))===a||null==r||r.$$is_boolean&&1!=r)&&d.get("Kernel").$raise(d.get("ArgumentError"),""+e.$inspect()+" isn't native"),t.native=e},p.$$arity=1),e.defn(h,"$to_n",_=function(){var e=this;return null==e.native&&(e.native=a),e.native},_.$$arity=0)}($.base),function(r){var t,n,$,o,l=t=i(r,"Kernel"),s=(l.$$proto,l.$$scope);e.defn(l,"$native?",n=function(e){return null==e||!e.$$class},n.$$arity=1),e.defn(l,"$Native",$=function(r){var t,n,$,i,o,l=this;return(t=null==r)===a||null==t||t.$$is_boolean&&1!=t?(t=l["$native?"](r))===a||null==t||t.$$is_boolean&&1!=t?(t=r["$is_a?"](s.get("Array")))===a||null==t||t.$$is_boolean&&1!=t?(t=r["$is_a?"](s.get("Proc")))===a||null==t||t.$$is_boolean&&1!=t?r:(t=(i=l).$proc,t.$$p=(o=function(t){var n,$,i,l,s=o.$$s||this;n=o.$$p||a,o.$$p=null;var u=arguments.length,c=u-0;c<0&&(c=0),$=new Array(c);for(var f=0;f<u;f++)$[f-0]=arguments[f];return s.$Native((i=(l=r).$call,i.$$p=n.$to_proc(),i).apply(l,e.to_a($)))},o.$$s=l,o.$$arity=-1,o),t).call(i):(t=(n=r).$map,t.$$p=($=function(e){var r=$.$$s||this;return null==e&&(e=a),r.$Native(e)},$.$$s=l,$.$$arity=1,$),t).call(n):s.get("Native").$$scope.get("Object").$new(r):a},$.$$arity=1),l.$alias_method("_Array","Array"),e.defn(l,"$Array",o=function(r,t){var n,$,i,l=this,u=o.$$p,c=u||a,f=arguments.length,p=f-1;p<0&&(p=0),i=new Array(p);for(var _=1;_<f;_++)i[_-1]=arguments[_];return o.$$p=null,(n=l["$native?"](r))===a||null==n||n.$$is_boolean&&1!=n?l.$_Array(r):(n=($=s.get("Native").$$scope.get("Array")).$new,n.$$p=c.$to_proc(),n).apply($,[r].concat(e.to_a(i))).$to_a()},o.$$arity=-2)}($.base),function(t,n){function $(){}var i,o,u,c,f,p,_,h,d,g,v,y,m,b,E,w=$=s(t,n,"Object",$),O=w.$$proto,A=w.$$scope;return O.native=a,w.$include(e.get("Native")),e.defn(w,"$==",i=function(e){var r=this;return r.native===A.get("Native").$try_convert(e)},i.$$arity=1),e.defn(w,"$has_key?",o=function(r){var t=this;return e.hasOwnProperty.call(t.native,r)},o.$$arity=1),e.alias(w,"key?","has_key?"),e.alias(w,"include?","has_key?"),e.alias(w,"member?","has_key?"),e.defn(w,"$each",u=function(r){var t,n,$=this,i=u.$$p,o=i||a,l=arguments.length,s=l-0;s<0&&(s=0),n=new Array(s);for(var c=0;c<l;c++)n[c-0]=arguments[c];if(u.$$p=null,o!==a){for(var f in $.native)e.yieldX(o,[f,$.native[f]]);return $}return(t=$).$method_missing.apply(t,["each"].concat(e.to_a(n)))},u.$$arity=-1),e.defn(w,"$[]",c=function(r){var t=this,n=t.native[r];return n instanceof Function?n:e.get("Native").$call(t.native,r)},c.$$arity=1),e.defn(w,"$[]=",f=function(e,r){var t,n=this,$=a;return $=A.get("Native").$try_convert(r),(t=$===a)===a||null==t||t.$$is_boolean&&1!=t?n.native[e]=$:n.native[e]=r},f.$$arity=2),e.defn(w,"$merge!",p=function(e){var r=this;e=A.get("Native").$convert(e);for(var t in e)r.native[t]=e[t];return r},p.$$arity=1),e.defn(w,"$respond_to?",_=function(e,r){var t=this;return null==r&&(r=!1),A.get("Kernel").$instance_method("respond_to?").$bind(t).$call(e,r)},_.$$arity=-2),e.defn(w,"$respond_to_missing?",h=function(r,t){var n=this;return null==t&&(t=!1),e.hasOwnProperty.call(n.native,r)},h.$$arity=-2),e.defn(w,"$method_missing",d=function(t,n){var $,i,o,l=this,s=d.$$p,u=s||a,c=arguments.length,f=c-1;f<0&&(f=0),o=new Array(f);for(var p=1;p<c;p++)o[p-1]=arguments[p];return d.$$p=null,"="===t.charAt(t.length-1)?l["$[]="](t.$slice(0,r(t.$length(),1)),o["$[]"](0)):($=(i=e.get("Native")).$call,$.$$p=u.$to_proc(),$).apply(i,[l.native,t].concat(e.to_a(o)))},d.$$arity=-2),e.defn(w,"$nil?",g=function(){return!1},g.$$arity=0),e.defn(w,"$is_a?",v=function(r){var t=this;return e.is_a(t,r)},v.$$arity=1),e.alias(w,"kind_of?","is_a?"),e.defn(w,"$instance_of?",y=function(e){var r=this;return r.$$class===e},y.$$arity=1),e.defn(w,"$class",m=function(){var e=this;return e.$$class},m.$$arity=0),e.defn(w,"$to_a",b=function(e){var r,t,n=this,$=b.$$p,i=$||a;return null==e&&(e=l([],{})),b.$$p=null,(r=(t=A.get("Native").$$scope.get("Array")).$new,r.$$p=i.$to_proc(),r).call(t,n.native,e).$to_a()},b.$$arity=-1),e.defn(w,"$inspect",E=function(){var e=this;return"#<Native:"+String(e.native)+">"},E.$$arity=0),a&&"inspect"}($.get("Native"),$.get("BasicObject")),function(n,$){function i(){}var o,u,c,f,p,_,h,d=i=s(n,$,"Array",i),g=d.$$proto,v=d.$$scope;return g.named=g.native=g.get=g.block=g.set=g.length=a,d.$include(v.get("Native")),d.$include(v.get("Enumerable")),e.defn(d,"$initialize",o=function(r,t){var n,$,i=this,s=o.$$p,u=s||a;return null==t&&(t=l([],{})),o.$$p=null,($=i,n=e.find_super_dispatcher(i,"initialize",o,!1),n.$$p=null,n).call($,r),i.get=(n=t["$[]"]("get"))!==!1&&n!==a&&null!=n?n:t["$[]"]("access"),i.named=t["$[]"]("named"),i.set=(n=t["$[]"]("set"))!==!1&&n!==a&&null!=n?n:t["$[]"]("access"),i.length=(n=t["$[]"]("length"))!==!1&&n!==a&&null!=n?n:"length",i.block=u,(n=null==i.$length())===a||null==n||n.$$is_boolean&&1!=n?a:i.$raise(v.get("ArgumentError"),"no length found on the array-like object")},o.$$arity=-2),e.defn(d,"$each",u=function(){var r=this,t=u.$$p,n=t||a;if(u.$$p=null,n===!1||n===a||null==n)return r.$enum_for("each");for(var $=0,i=r.$length();$<i;$++)e.yield1(n,r["$[]"]($));return r},u.$$arity=0),e.defn(d,"$[]",c=function(e){var r,t=this,n=a,$=a;return n=function(){return $=e,v.get("String")["$==="]($)||v.get("Symbol")["$==="]($)?(r=t.named)===a||null==r||r.$$is_boolean&&1!=r?t.native[e]:t.native[t.named](e):v.get("Integer")["$==="]($)?(r=t.get)===a||null==r||r.$$is_boolean&&1!=r?t.native[e]:t.native[t.get](e):a}(),n!==!1&&n!==a&&null!=n?(r=t.block)===a||null==r||r.$$is_boolean&&1!=r?t.$Native(n):t.block.$call(n):a},c.$$arity=1),e.defn(d,"$[]=",f=function(e,r){var t,n=this;return(t=n.set)===a||null==t||t.$$is_boolean&&1!=t?n.native[e]=v.get("Native").$convert(r):n.native[n.set](e,v.get("Native").$convert(r))},f.$$arity=2),e.defn(d,"$last",p=function(e){var n,$=this,i=a,o=a;if(null==e&&(e=a),e!==!1&&e!==a&&null!=e){for(i=r($.$length(),1),o=[];(n=t(i,0))!==a&&null!=n&&(!n.$$is_boolean||1==n);)o["$<<"]($["$[]"](i)),i=r(i,1);return o}return $["$[]"](r($.$length(),1))},p.$$arity=-1),e.defn(d,"$length",_=function(){var e=this;return e.native[e.length]},_.$$arity=0),e.alias(d,"to_ary","to_a"),e.defn(d,"$inspect",h=function(){var e=this;return e.$to_a().$inspect()},h.$$arity=0),a&&"inspect"}($.get("Native"),null),function(r,t){function n(){}var $,i=n=s(r,t,"Numeric",n);i.$$proto,i.$$scope;return e.defn(i,"$to_n",$=function(){var e=this;return e.valueOf()},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"Proc",n);i.$$proto,i.$$scope;return e.defn(i,"$to_n",$=function(){var e=this;return e},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"String",n);i.$$proto,i.$$scope;return e.defn(i,"$to_n",$=function(){var e=this;return e.valueOf()},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"Regexp",n);i.$$proto,i.$$scope;return e.defn(i,"$to_n",$=function(){var e=this;return e.valueOf()},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"MatchData",n),o=i.$$proto;i.$$scope;return o.matches=a,e.defn(i,"$to_n",$=function(){var e=this;return e.matches},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"Struct",n),o=(i.$$proto,i.$$scope);return e.defn(i,"$to_n",$=function(){var e,r,t,n=this,$=a;return $={},(e=(r=n).$each_pair,e.$$p=(t=function(e,r){t.$$s||this;return null==e&&(e=a),null==r&&(r=a),$[e]=o.get("Native").$try_convert(r,r)},t.$$s=n,t.$$arity=2,t),e).call(r),$},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"Array",n),o=(i.$$proto,i.$$scope);return e.defn(i,"$to_n",$=function(){for(var e=this,r=[],t=0,n=e.length;t<n;t++){var $=e[t];r.push(o.get("Native").$try_convert($,$))}return r},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"Boolean",n);i.$$proto,i.$$scope;return e.defn(i,"$to_n",$=function(){var e=this;return e.valueOf()},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"Time",n);i.$$proto,i.$$scope;return e.defn(i,"$to_n",$=function(){var e=this;return e},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"NilClass",n);i.$$proto,i.$$scope;return e.defn(i,"$to_n",$=function(){return null},$.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i,o=n=s(r,t,"Hash",n),l=(o.$$proto,o.$$scope);return o.$alias_method("_initialize","initialize"),e.defn(o,"$initialize",$=function(e){var r,t,n=this,i=$.$$p,o=i||a;if($.$$p=null,null!=e&&e.constructor===Object){var s,u,c=n.$$smap,f=n.$$keys;for(s in e)u=e[s],u&&u.constructor===Object?c[s]=l.get("Hash").$new(u):u&&u.$$is_array?(u=u.map(function(e){return e&&e.constructor===Object?l.get("Hash").$new(e):e}),c[s]=u):c[s]=n.$Native(u),f.push(s);return n}return(r=(t=n).$_initialize,r.$$p=o.$to_proc(),r).call(t,e)},$.$$arity=-1),e.defn(o,"$to_n",i=function(){for(var e,r,t=this,n={},$=t.$$keys,a=t.$$smap,i=0,o=$.length;i<o;i++)e=$[i],e.$$is_string?r=a[e]:(e=e.key,r=e.value),n[e]=l.get("Native").$try_convert(r,r);return n},i.$$arity=0),a&&"to_n"}($.base,null),function(r,t){function n(){}var $,i=n=s(r,t,"Module",n);i.$$proto,i.$$scope;return e.defn(i,"$native_module",$=function(){var r=this;return e.global[r.$name()]=r},$.$$arity=0),a&&"native_module"}($.base,null),function(r,t){function n(){}var $,i,o=n=s(r,t,"Class",n),l=(o.$$proto,o.$$scope);return e.defn(o,"$native_alias",$=function(e,r){var t=this,n=t.$$proto["$"+r];n||t.$raise(l.get("NameError").$new("undefined method `"+r+"' for class `"+t.$inspect()+"'",t.$exiting_mid())),t.$$proto[e]=n},$.$$arity=2),e.defn(o,"$native_class",i=function(){var e=this;e.$native_module(),e.new=e.$new},i.$$arity=0),a&&"native_class"}($.base,null),u.$=u.global=n.$Native(e.global)},Opal.modules.sql_formatter=function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e*r:e["$*"](r)}function t(e,r){return"number"==typeof e&&"number"==typeof r?e+r:e["$+"](r)}function n(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}function $(e,r){return"number"==typeof e&&"number"==typeof r?e-r:e["$-"](r)}var a=(e.top,e),i=e.nil,o=(e.breaker,e.slice,e.klass),l=e.hash2,s=e.range,u=e.gvars;return e.add_stubs(["$*","$split","$gsub","$create_shift_arr","$flat_map","$split_if_even","$[]","$length","$reduce","$subquery_level","$!","$=~","$+","$<<","$dup","$update_output","$merge","$strip","$<","$!=","$-","$lambda","$upcase","$new","$is_a?","$call","$all_replacements","$==","$%","$split_sql"]),function(a,c){function f(){}var p=f=o(a,c,"SQLFormatter",f),_=(p.$$proto,p.$$scope);return e.cdecl(_,"SEP","~::~"),function(a){var o,c,f,p,_,h,d,g=a.$$scope;a.$$proto;return e.defn(a,"$format",o=function(e,n){var $,a,o,u,c,f=this,p=i,_=i,h=i,d=i,v=i;return p=r(" ",n),_=e.$gsub(/\s+/," ").$gsub(/'/,""+g.get("SEP")+"'").$split(g.get("SEP")),h=l(["str","shift_arr","tab","arr","parens_level","deep"],{str:"",shift_arr:f.$create_shift_arr(p),tab:p,arr:($=(a=s(0,_.$length(),!0)).$flat_map,$.$$p=(o=function(e){var r=o.$$s||this;return null==e&&(e=i),r.$split_if_even(e,_["$[]"](e),p)},o.$$s=f,o.$$arity=1,o),$).call(a),parens_level:0,deep:0}),d=h["$[]"]("arr").$length(),v=($=(u=s(0,d,!0)).$reduce,$.$$p=(c=function(e,n){var $,a=c.$$s||this,o=i,u=i,f=i,p=i,_=i;return null==e&&(e=i),null==n&&(n=i),o=e["$[]"]("arr")["$[]"](n),u=a.$subquery_level(o,e["$[]"]("parens_level")),f=function(){return($=o["$=~"](/SELECT|SET/)["$!"]()["$!"]())===i||null==$||$.$$is_boolean&&1!=$?e["$[]"]("arr").$dup():t(e["$[]"]("arr")["$[]"](s(0,n,!0))["$<<"](o.$gsub(/,\s+/,",\n"+r(e["$[]"]("tab"),2))),e["$[]"]("arr")["$[]"](s(t(n,1),-1,!1)))}(),p=f["$[]"](n),_=a.$update_output(p,u,e,n),e.$merge(l(["str","arr","parens_level","deep"],{str:_["$[]"](0),arr:f,parens_level:u,deep:_["$[]"](1)}))},c.$$s=f,c.$$arity=2,c),$).call(u,h),v["$[]"]("str").$gsub(/\s+\n/,"\n").$gsub(/\n+/,"\n").$strip()},o.$$arity=2),e.defn(a,"$update_output",c=function(e,r,a,o){var l,s;return(l=e["$=~"](/\(\s*SELECT/)["$!"]()["$!"]())===i||null==l||l.$$is_boolean&&1!=l?[function(){return(l=e["$=~"](/'/)["$!"]()["$!"]())===i||null==l||l.$$is_boolean&&1!=l?t(t(a["$[]"]("str"),a["$[]"]("shift_arr")["$[]"](a["$[]"]("deep"))),e):t(a["$[]"]("str"),e)}(),function(){return s=n(r,1),(l=s!==!1&&s!==i&&null!=s?a["$[]"]("deep")["$!="](0):s)===i||null==l||l.$$is_boolean&&1!=l?a["$[]"]("deep"):$(a["$[]"]("deep"),1)}()]:[t(t(a["$[]"]("str"),a["$[]"]("shift_arr")["$[]"](t(a["$[]"]("deep"),1))),e),t(a["$[]"]("deep"),1)]},c.$$arity=4),e.defn(a,"$create_shift_arr",f=function(e){var t,n,$,a=this;return(t=(n=s(0,99,!1)).$reduce,t.$$p=($=function(t,n){$.$$s||this;return null==t&&(t=i),null==n&&(n=i),t["$<<"]("\n"+r(e,n))},$.$$s=a,$.$$arity=2,$),t).call(n,[])},f.$$arity=1),e.defn(a,"$subquery_level",p=function(e,r){return $(r,$(e.$gsub(/\(/,"").$length(),e.$gsub(/\)/,"").$length()))},p.$$arity=2),e.defn(a,"$all_replacements",_=function(e){var r,n,$,a=this;return[[/ AND /i,t(t(g.get("SEP"),e),"AND ")],[/ BETWEEN /i,t(t(g.get("SEP"),e),"BETWEEN ")],[/ CASE /i,t(t(g.get("SEP"),e),"CASE ")],[/ ELSE /i,t(t(g.get("SEP"),e),"ELSE ")],[/ END /i,t(t(g.get("SEP"),e),"END ")],[/ FROM /i,t(g.get("SEP"),"FROM ")],[/ GROUP\s+BY /i,t(g.get("SEP"),"GROUP BY ")],[/ HAVING /i,t(g.get("SEP"),"HAVING ")],[/ IN /i," IN "],[/ ((CROSS|INNER|LEFT|RIGHT) )?JOIN /i,(r=(n=a).$lambda,r.$$p=($=function(e){var r,n;$.$$s||this;return null==e&&(e=i),t(t(g.get("SEP"),(r=(n=u["~"])===i?i:n["$[]"](1))!==!1&&r!==i&&null!=r?r:""),"JOIN ").$upcase()},$.$$s=a,$.$$arity=1,$),r).call(n)],[/ ON /i,t(t(g.get("SEP"),e),"ON ")],[/ OR /i,t(t(g.get("SEP"),e),"OR ")],[/ ORDER\s+BY /i,t(g.get("SEP"),"ORDER BY ")],[/ OVER /i,t(t(g.get("SEP"),e),"OVER ")],[/\(\s*SELECT /i,t(g.get("SEP"),"(SELECT ")],[/\)\s*SELECT /i,t(t(")",g.get("SEP")),"SELECT ")],[/ THEN /i,t(t(" THEN",g.get("SEP")),e)],[/ UNION /i,t(t(g.get("SEP"),"UNION"),g.get("SEP"))],[/ USING /i,t(g.get("SEP"),"USING ")],[/ WHEN /i,t(t(g.get("SEP"),e),"WHEN ")],[/ WHERE /i,t(g.get("SEP"),"WHERE ")],[/ WITH /i,t(g.get("SEP"),"WITH ")],[/ SET /i,t(g.get("SEP"),"SET ")],[/ ALL /i," ALL "],[/ AS /i," AS "],[/ ASC /i," ASC "],[/ DESC /i," DESC "],[/ DISTINCT /i," DISTINCT "],[/ EXISTS /i," EXISTS "],[/ NOT /i," NOT "],[/ NULL /i," NULL "],[/ LIKE /i," LIKE "],[/\s*SELECT /i,"SELECT "],[/\s*UPDATE /i,"UPDATE "],[/\s*DELETE /i,"DELETE "],[g.get("Regexp").$new("("+g.get("SEP")+")+"),g.get("SEP")]]},_.$$arity=1),e.defn(a,"$split_sql",h=function(e,r){var t,n,$,a=this;return(t=(n=a.$all_replacements(r)).$reduce,t.$$p=($=function(e,r){var t,n,a,o=$.$$s||this;return null==e&&(e=i),null==r&&(r=i),(t=(n=e).$gsub,t.$$p=(a=function(e){var t;a.$$s||this;return null==e&&(e=i),(t=r["$[]"](1)["$is_a?"](g.get("Proc")))===i||null==t||t.$$is_boolean&&1!=t?r["$[]"](1):r["$[]"](1).$call(e)},a.$$s=o,a.$$arity=1,a),t).call(n,r["$[]"](0))},$.$$s=a,$.$$arity=2,$),t).call(n,e.$gsub(/\s+/," ")).$split(g.get("SEP"))},h.$$arity=2),e.defn(a,"$split_if_even",d=function(e,r,t){var n=this;return e["$%"](2)["$=="](0)?n.$split_sql(r,t):[r]},d.$$arity=3),i&&"split_if_even"}(e.get_singleton_class(p))}(a.base,null)},function(e){function r(e,r){return"number"==typeof e&&"number"==typeof r?e<r:e["$<"](r)}var t=e.top,n=e,$=e.nil,a=(e.breaker,e.slice,e.klass),i=e.gvars;return e.add_stubs(["$require","$attr_accessor","$render","$memoize_els","$bind_events","$innerHTML=","$getElementById","$document","$input=","$output=","$spaces=","$value=","$format","$value","$input","$<","$to_i","$spaces","$output","$select","$addEventListener","$update_output","$select_output","$main"]),t.$require("opal/mini"),t.$require("native"),t.$require("sql_formatter"),function(t,n){function o(){}var l=o=a(t,n,"App",o);l.$$proto,l.$$scope;return function(t){var n,a,o,l,s,u,c=t.$$scope;t.$$proto;return t.$attr_accessor("input","output","spaces"),e.defn(t,"$main",n=function(){var e=this;return e.$render(),e.$memoize_els(),e.$bind_events()},n.$$arity=0),e.defn(t,"$render",a=function(){var e,r;return null==i.$&&(i.$=$),e=['        <div class="container">\n          <div class="form-inline mb-3">\n            <label for="sql-spaces" class="h4 mr-3">Spaces</label>\n            <input id="sql-spaces" class="form-control" type="number" value="2" min="0">\n          </div>\n          <div class="form-group">\n            <label for="sql-input" class="d-flex h4 mb-3">Input</label>\n            <textarea id="sql-input" class="form-control code" placeholder="Enter SQL" rows="9"></textarea>\n          </div>\n          <div class="form-group">\n            <label for="sql-output" class="d-flex h4 mb-3">Output</label>\n            <textarea id="sql-output" class="form-control code" rows="20" readonly></textarea>\n          </div>\n        </div>\n'],r=i.$.$document().$getElementById("main"),r["$innerHTML="].apply(r,e),e[e.length-1]},a.$$arity=0),e.defn(t,"$memoize_els",o=function(){var e,r,t=this;return null==i.$&&(i.$=$),e=[i.$.$document().$getElementById("sql-input")],r=t,r["$input="].apply(r,e),e[e.length-1],e=[i.$.$document().$getElementById("sql-output")],r=t,r["$output="].apply(r,e),e[e.length-1],e=[i.$.$document().$getElementById("sql-spaces")],r=t,r["$spaces="].apply(r,e),e[e.length-1]},o.$$arity=0),e.defn(t,"$update_output",l=function(){var e,t,n,a=this;return e=[c.get("SQLFormatter").$format(a.$input().$value(),function(){return(n=r(a.$spaces().$value().$to_i(),0))===$||null==n||n.$$is_boolean&&1!=n?a.$spaces().$value().$to_i():0}())],t=a.$output(),t["$value="].apply(t,e),e[e.length-1]},l.$$arity=0),e.defn(t,"$select_output",s=function(){var e=this;return e.$output().$select()},s.$$arity=0),e.defn(t,"$bind_events",u=function(){var e,r,t,n,$,a,i,o,l,s=this;return(e=(r=s.$input()).$addEventListener,e.$$p=(t=function(){var e=t.$$s||this;return e.$update_output()},t.$$s=s,t.$$arity=0,t),e).call(r,"input"),(e=(n=s.$spaces()).$addEventListener,e.$$p=($=function(){var e=$.$$s||this;return e.$update_output()},$.$$s=s,$.$$arity=0,$),e).call(n,"input"),(e=(a=s.$output()).$addEventListener,e.$$p=(i=function(){var e=i.$$s||this;return e.$select_output()},i.$$s=s,i.$$arity=0,i),e).call(a,"click"),(e=(o=s.$output()).$addEventListener,e.$$p=(l=function(){var e=l.$$s||this;return e.$select_output()},l.$$s=s,l.$$arity=0,l),e).call(o,"focus")},u.$$arity=0),$&&"bind_events"}(e.get_singleton_class(l))}(n.base,null),n.get("App").$main()}(Opal),function(e){var r=(e.top,e);e.nil,e.breaker,e.slice;return e.add_stubs(["$exit"]),r.get("Kernel").$exit()}(Opal)}).call(exports,__webpack_require__(56))},56:function(e,r,t){"use strict";var n,$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":$(window))&&(n=window)}e.exports=n},634:function(e,r,t){"use strict";t(456)}});